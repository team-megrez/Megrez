HOL_restore_exiled_netherlands = {
	every_owned_state = {
		limit = {
			NOT = {
				is_on_continent = asia
				is_core_of = DEI
				is_core_of = INS
			}
		}
		transfer_state_to = HOL
	}
	HOL = { drop_cosmetic_tag = yes }
	hidden_effect = {
		if = {
			limit = { is_in_faction = yes }
			faction_leader = {
				add_to_faction = HOL
				if = {
					limit = { tag = GER }
					HOL = { GER_add_to_mitteleuropa = yes }
				}
			}
		}
		HOL = {
			transfer_technology_without_doctrines = yes
			drop_cosmetic_tag = yes
			set_politics = {
				ruling_party = authoritarian_democrat
				elections_allowed = no
			}
			set_popularities = {
				totalist = 0
				syndicalist = 0
				radical_socialist = 0
				social_democrat = 20
				social_liberal = 10
				market_liberal = 5
				social_conservative = 25
				authoritarian_democrat = 40
				paternal_autocrat = 0
				national_populist = 0
			}
			#Clean slate
			complete_national_focus = HOL_reijnders_putsch #Junta path, so you can restore democracy afterwards
			complete_national_focus = HOL_junta_consolidation
		}
		transfer_navy = { target = HOL }
	}
}

HOL_remove_monarchy = {
	if = {
		limit = { has_character = HOL_wilhelmina_van_orange_nassau }
		HOL_wilhelmina_van_orange_nassau = {
			set_character_name = HOL_wilhelmina_van_orange_nassau
			hidden_effect = { remove_all_country_leader_roles = yes }
			retire = yes
		}
	}
	if = {
		limit = { has_character = HOL_juliana_van_orange_nassau }
		HOL_juliana_van_orange_nassau = {
			set_character_name = HOL_juliana_van_orange_nassau
			hidden_effect = { remove_all_country_leader_roles = yes }
			retire = yes
		}
	}
	if = {
		limit = { original_tag = HOL }
		HOL_parliament_sic = yes
	}
}

HOL_create_wilhelmina = {
	if = {
		limit = { event_target:original_netherlands = { HOL_wilhelmina_van_orange_nassau = { is_dead = no } } }
		event_target:original_netherlands = {
			HOL_wilhelmina_van_orange_nassau = {
				set_nationality = PREV.PREV
				set_character_name = HOL_wilhelmina_van_orange_nassau_regnal
				character_becomes_leader_of_ruling_party_effect_tooltip = yes
				hidden_effect = {
					remove_all_country_leader_roles = yes
					add_country_leader_role = {
						country_leader = { ideology = social_democrat_subtype }
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = { ideology = social_liberal_subtype }
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = { ideology = market_liberal_subtype }
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = { ideology = social_conservative_subtype }
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = { ideology = authoritarian_democrat_subtype }
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = { ideology = paternal_autocrat_subtype }
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = { ideology = national_populist_subtype }
						promote_leader = yes
					}
				}
			}
		}
	}
	else = {
		HOL_create_juliana = yes
	}
}

HOL_create_juliana = {
	HOL = {
		HOL_juliana_van_orange_nassau = {
			set_nationality = PREV.PREV
			set_character_name = HOL_juliana_van_orange_nassau_regnal
			character_becomes_leader_of_ruling_party_effect_tooltip = yes
			hidden_effect = {
				remove_all_country_leader_roles = yes
				add_country_leader_role = {
					country_leader = { ideology = social_democrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = social_liberal_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = market_liberal_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = social_conservative_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = authoritarian_democrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = paternal_autocrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = national_populist_subtype }
					promote_leader = yes
				}
			}
		}
	}
}

HOL_albarda_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { has_character = HOL_johan_willem_albarda }
		if = {
			limit = { HOL_johan_willem_albarda = { is_second_in_command = no } }
			activate_advisor = HOL_johan_willem_albarda_sic
		}
	}
	else_if = {
		limit = { HOL_willem_drees = { is_second_in_command = no } }
		activate_advisor = HOL_willem_drees_sic
	}
}

HOL_drees_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { HOL_willem_drees = { is_second_in_command = no } }
		activate_advisor = HOL_willem_drees_sic
	}
}

HOL_schermerhorn_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { HOL_willem_schermerhorn = { is_second_in_command = no } }
		activate_advisor = HOL_willem_schermerhorn_sic
	}
}

HOL_oud_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { HOL_pieter_jacobus_oud = { is_second_in_command = no } }
		activate_advisor = HOL_pieter_jacobus_oud_sic
	}
}

HOL_de_geer_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { HOL_dirk_jan_de_geer = { is_second_in_command = no } }
		activate_advisor = HOL_dirk_jan_de_geer_sic
	}
}

HOL_colijn_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { has_character = HOL_hendrikus_colijn }
		if = {
			limit = { HOL_hendrikus_colijn = { is_second_in_command = no } }
			activate_advisor = HOL_hendrikus_colijn_sic
		}
	}
	else_if = {
		limit = { HOL_louis_joseph_maria_beel = { is_second_in_command = no } }
		activate_advisor = HOL_louis_joseph_maria_beel_sic
	}
}

HOL_beel_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { HOL_louis_joseph_maria_beel = { is_second_in_command = no } }
		activate_advisor = HOL_louis_joseph_maria_beel_sic
	}
}

HOL_reijnders_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { HOL_izaak_reijnders = { is_second_in_command = no } }
		activate_advisor = HOL_izaak_reijnders_sic
	}
}

HOL_swart_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { HOL_henri_nicolas_alfred_swart = { is_second_in_command = no } }
		activate_advisor = HOL_henri_nicolas_alfred_swart_sic
	}
}

HOL_van_geelkerken_sic = {
	if = {
		limit = { is_monarchy = no }
		HOL_parliament_sic = yes
	}
	else_if = {
		limit = { HOL_cornelis_van_geelkerken = { is_second_in_command = no } }
		activate_advisor = HOL_cornelis_van_geelkerken_sic
	}
}

HOL_parliament_sic = {
	if = {
		limit = { HOL_states_general = { is_second_in_command = no } }
		activate_advisor = HOL_states_general_sic
	}
}

HOL_DEI_is_annexed = {
	hidden_effect = {
		every_state = {
			limit = { is_core_of = DEI }
			remove_core_of = DEI
		}
		DEI = {
			transfer_navy = { target = HOL }
			every_unit_leader = {
				limit = { has_character_flag = HOL_leader }
				set_nationality = HOL
			}
		}
		annex_country = {
			target = DEI
			transfer_troops = yes
		}
	}
	HOL_DEI_is_restored = yes
}

HOL_DEI_is_restored = {
	hidden_effect = {
		if = {
			limit = { country_exists = DEI }
			HOL = {
				set_autonomy = {
					target = DEI
					autonomy_state = kr_default_puppet
					end_wars = no
				}
			}
		}
		DEI = {
			set_politics = {
				ruling_party = authoritarian_democrat
				last_election = "1935.11.14"
				election_frequency = 48
				elections_allowed = no
			}
			set_popularities = {
				totalist = 0
				radical_socialist = 0
				syndicalist = 0
				social_democrat = 0
				social_liberal = 4
				market_liberal = 10
				social_conservative = 5
				authoritarian_democrat = 56
				paternal_autocrat = 25
				national_populist = 0
			}
			HOL_remove_monarchy = yes
			if = {
				limit = { NOT = { has_country_leader = { character = DEI_alidius_tjarda_van_starkenborgh_stachouwer } } }
				DEI_alidius_tjarda_van_starkenborgh_stachouwer = { promote_character = yes }
			}
			set_country_flag = dei_long_name_appointed
			clr_country_flag = dei_palar_appointed
			clr_country_flag = holex_got_exiled
			clr_country_flag = dei_furstner_appointed
			mark_focus_tree_layout_dirty = yes
			if = {
				limit = { has_variable = DEI_original_army_idea }
				add_ideas = var:DEI_original_army_idea
				clear_variable = DEI_original_army_idea
			}
		}
	}
}

HOL_remove_socialist_ideas = {
	remove_ideas = HOL_idea_transition_to_fair_economy
	if = {
		limit = { has_idea = HOL_idea_batavian_courage }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_idea_batavian_courage }
		remove_ideas = HOL_idea_batavian_courage
	}
	else_if = {
		limit = { has_idea = HOL_idea_batavian_courage_1 }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_idea_batavian_courage_1 }
		remove_ideas = HOL_idea_batavian_courage_1
	}
	else_if = {
		limit = { has_idea = HOL_idea_batavian_courage_2 }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_idea_batavian_courage_2 }
		remove_ideas = HOL_idea_batavian_courage_2
	}
	if = {
		limit = { has_idea = HOL_Red_Sky }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_Red_Sky }
		remove_ideas = HOL_Red_Sky
	}
	else_if = {
		limit = { has_idea = HOL_Red_Sky_1 }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_Red_Sky_1 }
		remove_ideas = HOL_Red_Sky_1
	}
	if = {
		limit = { has_idea = HOL_british_designs_tanks }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_british_designs_tanks }
		remove_ideas = HOL_british_designs_tanks
	}
	if = {
		limit = { has_idea = HOL_red_navy_0 }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_red_navy_0 }
		remove_ideas = HOL_red_navy_0
	}
	else_if = {
		limit = { has_idea = HOL_red_navy_1 }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_red_navy_1 }
		remove_ideas = HOL_red_navy_1
	}
	else_if = {
		limit = { has_idea = HOL_red_navy_2 }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_red_navy_2 }
		remove_ideas = HOL_red_navy_2
	}
	if = {
		limit = { has_idea = HOL_syn_rebuilding_idea }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_syn_rebuilding_idea }
		remove_ideas = HOL_syn_rebuilding_idea
	}
	else_if = {
		limit = { has_idea = HOL_Proletarian_humanism_idea }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_Proletarian_humanism_idea }
		remove_ideas = HOL_Proletarian_humanism_idea
	}
	else_if = {
		limit = { has_idea = HOL_Proletarian_humanism_idea_final }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_Proletarian_humanism_idea_final }
		remove_ideas = HOL_Proletarian_humanism_idea_final
	}
	else_if = {
		limit = { has_idea = HOL_Industrial_Dem_idea }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_Industrial_Dem_idea }
		remove_ideas = HOL_Industrial_Dem_idea
	}
	else_if = {
		limit = { has_idea = HOL_Industrial_Dem_idea_final }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_Industrial_Dem_idea_final }
		remove_ideas = HOL_Industrial_Dem_idea_final
	}
	else_if = {
		limit = { has_idea = HOL_rev_vanguard_idea }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_rev_vanguard_idea }
		remove_ideas = HOL_rev_vanguard_idea
	}
	else_if = {
		limit = { has_idea = HOL_rev_vanguard_idea_final }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_rev_vanguard_idea_final }
		remove_ideas = HOL_rev_vanguard_idea_final
	}
	else_if = {
		limit = { has_idea = HOL_rev_vanguard_idea_final }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_rev_vanguard_idea_final }
		remove_ideas = HOL_rev_vanguard_idea_final
	}
	else_if = {
		limit = { has_idea = HOL_idea_democratic_workplace }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_idea_democratic_workplace }
		remove_ideas = HOL_idea_democratic_workplace
	}
	else_if = {
		limit = { has_idea = HOL_idea_democratic_workplace_final }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_idea_democratic_workplace_final }
		remove_ideas = HOL_idea_democratic_workplace_final
	}
	if = {
		limit = { has_idea = HOL_Rebuild_The_Bureaucracy_idea }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_Rebuild_The_Bureaucracy_idea }
		remove_ideas = HOL_Rebuild_The_Bureaucracy_idea
	}
	if = {
		limit = { has_idea = HOL_idea_mass_collectivisation }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_idea_mass_collectivisation }
		remove_ideas = HOL_idea_mass_collectivisation
	}
	if = {
		limit = { has_idea = HOL_idea_verzorgingsstaat }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_idea_verzorgingsstaat }
		remove_ideas = HOL_idea_verzorgingsstaat
	}
	if = {
		limit = { has_idea = HOL_idea_market_socialism }
		add_to_array = { HOL_socialist_ideas_to_restore = token:HOL_idea_market_socialism }
		remove_ideas = HOL_idea_market_socialism
	}
}

HOL_add_socialist_ideas = {
	if = {
		limit = { check_variable = { HOL_socialist_ideas_to_restore^num > 0 } }
		for_each_loop = {
			array = HOL_socialist_ideas_to_restore
			if = {
				limit = { NOT = { has_idea = var:v } }
				add_ideas = var:v
			}
		}
		clear_array = HOL_socialist_ideas_to_restore
	}
}

HOL_puppet_setup = {
	hidden_effect = {
		if = {
			limit = { country_exists = DEI }
			DEI = { country_event = holex.39 }
		}
		HOL = {
			if = {
				limit = { has_government = syndicalist }
				random_list = {
					40 = {
						set_party_name = {
							ideology = syndicalist
							name = HOL_council_communist
							long_name = HOL_council_communist_long
						}
						promote_character = HOL_antonie_pannekoek #== puppet KAPN instead of NAS
					}
					60 = {
						set_party_name = {
							ideology = syndicalist
							name = HOL_syndicalist_party
							long_name = HOL_syndicalist_party_long
						}
						promote_character = HOL_jacques_de_kadt
					}
				}
			}
			else_if = {
				limit = { has_government = radical_socialist }
				random_list = {
					40 = {
						set_party_name = {
							ideology = radical_socialist
							name = HOL_social_democrat_party
							long_name = HOL_social_democrat_party_long
						}
						promote_character = HOL_willem_drees #== puppet SDAP instead of RSAP
					}
					60 = {
						set_party_name = {
							ideology = radical_socialist
							name = HOL_radical_socialist_party
							long_name = HOL_radical_socialist_party_long
						}
						promote_character = HOL_henk_sneevliet
					}
				}
			}
			else_if = {
				limit = { has_government = social_democrat }
				unlock_national_focus = HOL_left_list_victorious
				unlock_national_focus = HOL_VDB_SDAP
			}
			else_if = {
				limit = { has_government = social_liberal }
				unlock_national_focus = HOL_left_list_victorious
				unlock_national_focus = HOL_work_with_LSP
			}
			else_if = {
				limit = { has_government = social_conservative }
				unlock_national_focus = HOL_CNA_gamble_worked
				unlock_national_focus = HOL_CNA_on_its_own
			}
			else_if = {
				limit = { has_government = authoritarian_democrat }
				unlock_national_focus = HOL_reijnders_putsch
				unlock_national_focus = HOL_junta_consolidation
			}
			else_if = {
				limit = { has_dictatorship_government = yes }
				unlock_national_focus = HOL_VNH_victory
				unlock_national_focus = HOL_intimidate_parliament
			}
		}
	}
}

HOL_calculate_assembly_results = {
	hidden_effect = {
		if = {
			limit = { check_variable = { HOL_assembly_patriotten > 2 } }
			country_event = { id = holfocus.62 days = 10 }
		}
		else_if = {
			limit = { check_variable = { HOL_assembly_nas > 2 } }
			country_event = { id = holfocus.63 days = 10 }
		}
		else_if = {
			limit = { check_variable = { HOL_assembly_rsap > 2 } }
			country_event = { id = holfocus.64 days = 10 }
		}
		else_if = {
			limit = { check_variable = { HOL_assembly_sdap > 2 } }
			country_event = { id = holfocus.65 days = 10 }
		}
		else_if = {
			limit = { check_variable = { HOL_assembly_kapn > 2 } }
			country_event = { id = holfocus.95 days = 10 }
		}
		else = {
			country_event = { id = holfocus.66 days = 10 }
		}
	}
}

HOL_left_negotiations_fail_chance_large = {
	random = {
		chance = 35
		country_event = { id = holfocus.36 days = 1 }
	}
}

HOL_left_negotiations_fail_chance_small = {
	random = {
		chance = 10
		country_event = { id = holfocus.36 days = 1 }
	}
}

HOL_right_negotiations_fail_chance_large = {
	random = {
		chance = 35
		country_event = { id = holfocus.39 days = 1 }
	}
}

HOL_right_negotiations_fail_chance_small = {
	random = {
		chance = 10
		country_event = { id = holfocus.39 days = 1 }
	}
}
