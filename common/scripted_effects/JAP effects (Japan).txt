##############################
### Japan Scripted Effects ###
### By Zankoas and ~mw~    ###
##############################

JAP_capitulation_effect = {
	JAP_fading_sun = yes
	every_other_country = {
		limit = {
			is_in_faction_with = PREV
			is_subject = no
			has_capitulated = no
		}
		faction_collapse_member_peace_effect = yes
		country_event = japfor.251
	}
	if = {
		limit = { is_in_faction = yes }
		faction_leader = { dismantle_faction = yes }
	}
	news_event = { id = japfor.252 hours = 30 }
}

JAP_fading_sun = {
	hidden_effect = {
		if = {
			limit = {
				NOT = { has_global_flag = JAP_Fading_Sun }
			}
			set_global_flag = JAP_Fading_Sun
			log = "KR_Event_Logging;JAPAN FADING SUN;[GetDateText]"

			# fire country-specific events
			TRM = { country_event = tram.106 }

			# clear imperial ideas
			JAP = {
				remove_ideas = {
					JAP_rising_sun_idea_1
					JAP_rising_sun_idea_2
					JAP_rising_sun_idea_3
					JAP_rising_sun_idea_4
					JAP_rising_sun_idea_5
					japan_NSA_act
					JAP_imperial_gov
					Fund_Adjustment_Ordinance
					National_Total_Mobilisation_Ordinance_1
					National_Total_Mobilisation_Ordinance_2
					National_Service_Draft_Ordinance_1
					National_Service_Draft_Ordinance_2
					JAP_yokuseiha_idea_1
					JAP_yokuseiha_idea_2
					JAP_yokuseiha_idea_3
					JAP_yokuseiha_idea_4
					JAP_kodoha_idea_1
					JAP_kodoha_idea_2
					JAP_kodoha_idea_3
					JAP_Kakushinha_idea_1
					JAP_Kakushinha_idea_2
					JAP_Kakushinha_idea_3
					JAP_Kakushinha_idea_4
					JAP_chinese_manpower_idea
					JAP_three_alls_idea
					JAP_ichigo
					JAP_MANTETSU_COLLAPSE
					JAP_COL_PREP
				}

				if = {
					limit = { exists = yes }
					every_subject_country = {
						JAP = {
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_free
							}
						}
					}
					every_country = {
						limit = {
							OR = {
								is_guaranteed_by = PREV
								has_non_aggression_pact_with = PREV
								has_military_access_to = PREV
								gives_military_access_to = PREV
							}
						}
						diplomatic_relation = {
							country = JAP
							relation = military_access
							active = no
						}
						JAP = {
							diplomatic_relation = {
								country = PREV
								relation = guarantee
								active = no
							}
							diplomatic_relation = {
								country = PREV
								relation = non_aggression_pact
								active = no
							}
							diplomatic_relation = {
								country = PREV
								relation = military_access
								active = no
							}
						}
					}
				}
			}

			# clear cores, claims and ambitions outside the Home Islands
			every_state = {
				limit = {
					NOT = {
						region = 154 #Home Islands
						state = 526 #Okinawa
						state = 645 #Iwo Jima
						state = 648 #Marcus Island
						AND = {
							OR = {
								state = 537 #Sakhalin
								state = 555 #Kuril Islands
							}
							is_owned_by = JAP
						}
					}
				}
				remove_core_of = JAP
				remove_claim_by = JAP
				clear_variable = ambition_area_JAP
			}

			JAP_close_all = yes

			# end the economic sphere
			clr_country_flag = JAP_economic_sphere_leader
			every_country = {
				limit = { has_country_flag = JAP_economic_sphere_member }
				country_event = japfor.404
			}
			if = {
				limit = { has_dynamic_modifier = { modifier = JAP_asian_economic_sphere } }
				remove_dynamic_modifier = { modifier = JAP_asian_economic_sphere }
			}
			clear_array = global.asian_economic_sphere
			clear_variable = global.sphere_industry_boost
			clear_variable = global.sphere_goods_boost
			clear_variable = global.sphere_resources_boost_member
			clear_variable = global.sphere_goods_boost_member

			# end the research group
			every_country = {
				limit = { is_in_tech_sharing_group = japan_research }
				remove_from_tech_sharing_group = japan_research
			}
		}
		FNG = {
			# FNG_Commission_Japanese_Ships
			remove_targeted_decision = { target = JAP decision = FNG_JAP_destroyers }
			remove_targeted_decision = { target = JAP decision = FNG_JAP_subs }
			remove_targeted_decision = { target = JAP decision = FNG_JAP_cruisers }
			remove_targeted_decision = { target = JAP decision = FNG_JAP_convoys }
		}
	}
}

JAP_china_peace_next_country = {
	hidden_effect = {
		event_target:japan = {
			if = {
				limit = {
					any_enemy_country = {
						is_chinese_tag = yes
						is_valid_peace_target = yes
						NOT = { has_country_flag = JAP_accepted_peace }
						NOT = { has_country_flag = JAP_refused_peace }
					}
				}
				random_enemy_country = {
					limit = {
						is_chinese_tag = yes
						is_valid_peace_target = yes
						NOT = { has_country_flag = JAP_accepted_peace }
						NOT = { has_country_flag = JAP_refused_peace }
					}
					country_event = japfor.230
				}
			}
			else = {
				country_event = japfor.231
			}
		}
	}
}

JAP_add_to_economic_sphere = {
	if = {
		limit = {
			JAP = { is_faction_leader = yes }
			NOT = { has_country_flag = JAP_economic_sphere_member }
		}
		custom_effect_tooltip = JAP_member_of_co_prosperity_sphere
		clr_country_flag = JAP_refused_sphere_invitation
		set_country_flag = JAP_economic_sphere_member
		add_to_array = { global.asian_economic_sphere = THIS }
		if = {
			limit = { NOT = { has_dynamic_modifier = { modifier = JAP_asian_economic_sphere_member } } }
			add_dynamic_modifier = { modifier = JAP_asian_economic_sphere_member }
		}
		JAP = {
			hidden_effect = {
				remove_opinion_modifier = { target = PREV modifier = KR_disapproves_of_govt }
				remove_opinion_modifier = { target = PREV modifier = KR_hates_govt }
				remove_opinion_modifier = { target = PREV modifier = KR_outraged }
			}
		}
		JAP_recalculate_economic_integration = yes
	}
}

JAP_remove_from_economic_sphere = {
	if = {
		limit = { has_country_flag = JAP_economic_sphere_member }
		custom_effect_tooltip = JAP_withdraws_from_sphere
		clr_country_flag = JAP_economic_sphere_member
		remove_from_array = { global.asian_economic_sphere = THIS }
		if = {
			limit = { tag = ROOT }
			if = {
				limit = { has_idea = JAP_member_integration_1 }
				remove_ideas = JAP_member_integration_1
			}
			if = {
				limit = { has_idea = JAP_member_integration_2 }
				remove_ideas = JAP_member_integration_2
			}
			if = {
				limit = { has_idea = JAP_member_integration_3 }
				remove_ideas = JAP_member_integration_3
			}
			if = {
				limit = { has_idea = JAP_nav_tra_idea }
				remove_ideas = JAP_nav_tra_idea
			}
			if = {
				limit = { has_dynamic_modifier = { modifier = JAP_asian_economic_sphere_member } }
				remove_dynamic_modifier = { modifier = JAP_asian_economic_sphere_member }
			}
		}
		else = {
			hidden_effect = {
				if = {
					limit = { has_idea = JAP_member_integration_1 }
					remove_ideas = JAP_member_integration_1
				}
				if = {
					limit = { has_idea = JAP_member_integration_2 }
					remove_ideas = JAP_member_integration_2
				}
				if = {
					limit = { has_idea = JAP_member_integration_3 }
					remove_ideas = JAP_member_integration_3
				}
				if = {
					limit = { has_idea = JAP_nav_tra_idea }
					remove_ideas = JAP_nav_tra_idea
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = JAP_asian_economic_sphere_member } }
					remove_dynamic_modifier = { modifier = JAP_asian_economic_sphere_member }
				}
			}
		}
		JAP_recalculate_economic_integration = yes
		JAP = {
			if = {
				limit = { has_guaranteed = PREV }
				diplomatic_relation = {
					country = PREV
					relation = guarantee
					active = no
				}
			}
			if = {
				limit = { has_non_aggression_pact_with = PREV }
				diplomatic_relation = {
					country = PREV
					relation = non_aggression_pact
					active = no
				}
			}
			hidden_effect = {
				remove_targeted_decision = { decision = JAP_invest_in_sphere_member1 target = PREV }
				remove_targeted_decision = { decision = JAP_invest_in_sphere_member2 target = PREV }
				remove_targeted_decision = { decision = JAP_invest_in_sphere_member3 target = PREV }
				remove_targeted_decision = { decision = JAP_economic_sphere_takeover target = PREV }
				remove_targeted_decision = { decision = JAP_invest_in_sphere_member_docks target = PREV }
				remove_targeted_decision = { decision = JAP_invest_in_sphere_naval_advisors target = PREV }
				remove_targeted_decision = { decision = JAP_invest_in_sphere_prosperity_ships target = PREV }
				remove_targeted_decision = { decision = JAP_invest_in_sphere_take_dockyards target = PREV }
			}
		}
		hidden_effect = {
			remove_targeted_decision = { decision = JAP_join_rikagaku_kenkyusho target = JAP }
			remove_targeted_decision = { decision = JAP_request_nav_advisors target = JAP }
			remove_targeted_decision = { decision = JAP_withdraw_from_alliance target = JAP }
			remove_targeted_decision = { decision = JAP_withdraw_from_sphere target = JAP }
		}
	}
}

JAP_recalculate_economic_integration = {
	hidden_effect = {
		set_variable = { global.var_sphere_factories = 0 }
		for_each_scope_loop = {
			array = global.asian_economic_sphere
			add_to_variable = { global.var_sphere_factories = THIS.num_of_civilian_factories }
		}

		#Japan's industry boost
		set_variable = { global.sphere_industry_boost = global.var_sphere_factories }
		clamp_variable = { var = global.sphere_industry_boost max = 60 min = 0 }
		multiply_variable = { global.sphere_industry_boost = 0.5 }
		multiply_variable = { global.sphere_industry_boost = 0.01 }
		if = {
			limit = { JAP = { has_country_flag = JAP_pressured_for_trade } }
			multiply_variable = { global.sphere_industry_boost = 0.9 }
		}

		#Japan's consumer goods boost
		set_variable = { global.sphere_goods_boost = global.var_sphere_factories }
		clamp_variable = { var = global.sphere_goods_boost max = 100 min = 0 }
		multiply_variable = { global.sphere_goods_boost = 1.5 }
		multiply_variable = { global.sphere_goods_boost = -0.001 }
		if = {
			limit = { JAP = { has_country_flag = JAP_pressured_for_trade } }
			multiply_variable = { global.sphere_goods_boost = 0.9 }
		}

		#Member's consumer goods boost
		set_variable = { global.sphere_goods_boost_member = global.var_sphere_factories }
		add_to_variable = { global.sphere_goods_boost_member = JAP.num_of_civilian_factories }
		clamp_variable = { var = global.sphere_goods_boost_member max = 100 min = 0 }
		multiply_variable = { global.sphere_goods_boost_member = -0.001 }
		if = {
			limit = { JAP = { has_country_flag = JAP_pressured_for_trade } }
			multiply_variable = { global.sphere_goods_boost_member = 1.1 }
		}

		#Member's resources boost
		set_variable = { global.sphere_resources_boost_member = global.var_sphere_factories }
		add_to_variable = { global.sphere_resources_boost_member = JAP.num_of_civilian_factories }
		clamp_variable = { var = global.sphere_resources_boost_member max = 100 min = 0 }
		multiply_variable = { global.sphere_resources_boost_member = 0.002 }
		if = {
			limit = { JAP = { has_country_flag = JAP_pressured_for_trade } }
			multiply_variable = { global.sphere_resources_boost_member = 1.1 }
		}
	}
}

### Targeted Decisions
JAP_open_JAP_land_reform = {
	activate_targeted_decision = { target = THIS decision = JAP_land_reform_1 }
	activate_targeted_decision = { target = THIS decision = JAP_land_reform_2 }
	activate_targeted_decision = { target = THIS decision = JAP_land_reform_3 }
	activate_targeted_decision = { target = THIS decision = JAP_land_adjustment }
	activate_targeted_decision = { target = THIS decision = JAP_rent_control }
	activate_targeted_decision = { target = THIS decision = JAP_agriculture_land_control }
	activate_targeted_decision = { target = THIS decision = JAP_finish_land_reform }
}

JAP_close_JAP_land_reform = {
	remove_targeted_decision = { target = THIS decision = JAP_land_reform_1 }
	remove_targeted_decision = { target = THIS decision = JAP_land_reform_2 }
	remove_targeted_decision = { target = THIS decision = JAP_land_reform_3 }
	remove_targeted_decision = { target = THIS decision = JAP_land_adjustment }
	remove_targeted_decision = { target = THIS decision = JAP_rent_control }
	remove_targeted_decision = { target = THIS decision = JAP_agriculture_land_control }
	remove_targeted_decision = { target = THIS decision = JAP_finish_land_reform }
}

JAP_open_JAP_influence_china_JAP_support_allies = {
	# JAP_china_army_training
	activate_targeted_decision = { target = FNG decision = JAP_china_army_training }
	activate_targeted_decision = { target = ANQ decision = JAP_china_army_training }
	activate_targeted_decision = { target = GXC decision = JAP_china_army_training }
	activate_targeted_decision = { target = SHX decision = JAP_china_army_training }
	activate_targeted_decision = { target = SQI decision = JAP_china_army_training }
	activate_targeted_decision = { target = SZC decision = JAP_china_army_training }
	activate_targeted_decision = { target = XSM decision = JAP_china_army_training }
	# JAP_china_army_training
	activate_targeted_decision = { target = FNG decision = JAP_provide_arms_facilities }
	activate_targeted_decision = { target = ANQ decision = JAP_provide_arms_facilities }
	activate_targeted_decision = { target = GXC decision = JAP_provide_arms_facilities }
	activate_targeted_decision = { target = SHX decision = JAP_provide_arms_facilities }
	activate_targeted_decision = { target = SQI decision = JAP_provide_arms_facilities }
	activate_targeted_decision = { target = SZC decision = JAP_provide_arms_facilities }
	activate_targeted_decision = { target = XSM decision = JAP_provide_arms_facilities }
	# JAP_support_offensive
	activate_targeted_decision = { target = FNG decision = JAP_support_offensive }
	activate_targeted_decision = { target = ANQ decision = JAP_support_offensive }
	activate_targeted_decision = { target = GXC decision = JAP_support_offensive }
	activate_targeted_decision = { target = SHX decision = JAP_support_offensive }
	activate_targeted_decision = { target = SQI decision = JAP_support_offensive }
	activate_targeted_decision = { target = SZC decision = JAP_support_offensive }
	activate_targeted_decision = { target = XSM decision = JAP_support_offensive }
	# JAP_provide_planes
	activate_targeted_decision = { target = FNG decision = JAP_provide_planes }
	activate_targeted_decision = { target = ANQ decision = JAP_provide_planes }
	activate_targeted_decision = { target = GXC decision = JAP_provide_planes }
	activate_targeted_decision = { target = SHX decision = JAP_provide_planes }
	activate_targeted_decision = { target = SQI decision = JAP_provide_planes }
	activate_targeted_decision = { target = SZC decision = JAP_provide_planes }
	activate_targeted_decision = { target = XSM decision = JAP_provide_planes }
}

JAP_open_JAP_influence_china_JAP_sow_chaos = {
	# support_chinese_seperatists
	activate_targeted_decision = { target = TIB decision = support_chinese_seperatists }
	activate_targeted_decision = { target = ETS decision = support_chinese_seperatists }
	activate_targeted_decision = { target = MON decision = support_chinese_seperatists }
	activate_targeted_decision = { target = KAC decision = support_chinese_seperatists }
	activate_targeted_decision = { target = SHA decision = support_chinese_seperatists }
	activate_targeted_decision = { target = SIA decision = support_chinese_seperatists }
	activate_targeted_decision = { target = BRM decision = support_chinese_seperatists }
	# send_ETS_tartar_guy
	activate_targeted_decision = { target = ETS decision = send_ETS_tartar_guy }
	# arms_factories_to_weaker_chinese_tags
	activate_targeted_decision = { target = CHI decision = arms_factories_to_weaker_chinese_tags }
	activate_targeted_decision = { target = GXC decision = arms_factories_to_weaker_chinese_tags }
	activate_targeted_decision = { target = HNN decision = arms_factories_to_weaker_chinese_tags }
	activate_targeted_decision = { target = SZC decision = arms_factories_to_weaker_chinese_tags }
	activate_targeted_decision = { target = SIK decision = arms_factories_to_weaker_chinese_tags }
	activate_targeted_decision = { target = XSM decision = arms_factories_to_weaker_chinese_tags }
	activate_targeted_decision = { target = SQI decision = arms_factories_to_weaker_chinese_tags }
	activate_targeted_decision = { target = SHX decision = arms_factories_to_weaker_chinese_tags }
	activate_targeted_decision = { target = YUN decision = arms_factories_to_weaker_chinese_tags }
	# bailout_weak_tags
	activate_targeted_decision = { target = CHI decision = bailout_weak_tags }
	activate_targeted_decision = { target = GXC decision = bailout_weak_tags }
	activate_targeted_decision = { target = HNN decision = bailout_weak_tags }
	activate_targeted_decision = { target = SZC decision = bailout_weak_tags }
	activate_targeted_decision = { target = SIK decision = bailout_weak_tags }
	activate_targeted_decision = { target = XSM decision = bailout_weak_tags }
	activate_targeted_decision = { target = SQI decision = bailout_weak_tags }
	activate_targeted_decision = { target = SHX decision = bailout_weak_tags }
	activate_targeted_decision = { target = YUN decision = bailout_weak_tags }
}

JAP_open_JAP_mantetsu_projects = {
	# develop_fengtian
	activate_targeted_decision = { target = FNG decision = develop_fengtian }
	# develop_generic_tag
	activate_targeted_decision = { target = ANQ decision = develop_generic_tag }
	activate_targeted_decision = { target = GXC decision = develop_generic_tag }
	activate_targeted_decision = { target = SHX decision = develop_generic_tag }
	activate_targeted_decision = { target = SQI decision = develop_generic_tag }
	activate_targeted_decision = { target = SZC decision = develop_generic_tag }
	activate_targeted_decision = { target = XSM decision = develop_generic_tag }
	# minor_railroad_investment
	activate_targeted_decision = { target = ANQ decision = minor_railroad_investment }
	activate_targeted_decision = { target = GXC decision = minor_railroad_investment }
	activate_targeted_decision = { target = SHX decision = minor_railroad_investment }
	activate_targeted_decision = { target = SQI decision = minor_railroad_investment }
	activate_targeted_decision = { target = SZC decision = minor_railroad_investment }
	activate_targeted_decision = { target = XSM decision = minor_railroad_investment }
	# harbin_chemical_research
	activate_targeted_decision = { target = FNG decision = harbin_chemical_research }
	# changchun_industry_investment
	activate_targeted_decision = { target = FNG decision = changchun_industry_investment }
}

JAP_open_JAP_co_prosperity_decisions_JAP_osaka_conference = {
	# JAP_invite_into_economic_sphere :tester:
	activate_targeted_decision = { target = ANQ decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = ASM decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = AST decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = BNG decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = BOM decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = BRM decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = CAM decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = CEY decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = ETS decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = MAN decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = FNG decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = GUJ decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = GXC decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = HAW decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = HND decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = HYD decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = INC decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = INS decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = KAC decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = KAS decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = KOR decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = LAO decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = LEC decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = MAL decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = MDR decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = MON decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = MYS decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = NZL decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = ORI decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = PAK decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = PHI decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = PJB decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = PNG decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = PRF decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = RJS decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = SAR decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = SHA decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = SHX decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = SIA decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = SQI decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = SZC decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = TIB decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = TRM decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = TRV decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = XSM decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = VIN decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = NEP decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = AFG decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = ALO decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = TRK decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = BUK decision = JAP_invite_into_economic_sphere }
	activate_targeted_decision = { target = KHI decision = JAP_invite_into_economic_sphere }
}

JAP_close_all = {
	### > JAP_close_JAP_land_reform < ###
	remove_targeted_decision = { target = THIS decision = JAP_land_reform_1 }
	remove_targeted_decision = { target = THIS decision = JAP_land_reform_2 }
	remove_targeted_decision = { target = THIS decision = JAP_land_reform_3 }
	remove_targeted_decision = { target = THIS decision = JAP_land_adjustment }
	remove_targeted_decision = { target = THIS decision = JAP_rent_control }
	remove_targeted_decision = { target = THIS decision = JAP_agriculture_land_control }
	remove_targeted_decision = { target = THIS decision = JAP_finish_land_reform }

	### > JAP_open_JAP_influence_china_JAP_support_allies < ###
	# JAP_china_army_training
	remove_targeted_decision = { target = FNG decision = JAP_china_army_training }
	remove_targeted_decision = { target = ANQ decision = JAP_china_army_training }
	remove_targeted_decision = { target = GXC decision = JAP_china_army_training }
	remove_targeted_decision = { target = SHX decision = JAP_china_army_training }
	remove_targeted_decision = { target = SQI decision = JAP_china_army_training }
	remove_targeted_decision = { target = SZC decision = JAP_china_army_training }
	remove_targeted_decision = { target = XSM decision = JAP_china_army_training }
	# JAP_china_army_training
	remove_targeted_decision = { target = FNG decision = JAP_provide_arms_facilities }
	remove_targeted_decision = { target = ANQ decision = JAP_provide_arms_facilities }
	remove_targeted_decision = { target = GXC decision = JAP_provide_arms_facilities }
	remove_targeted_decision = { target = SHX decision = JAP_provide_arms_facilities }
	remove_targeted_decision = { target = SQI decision = JAP_provide_arms_facilities }
	remove_targeted_decision = { target = SZC decision = JAP_provide_arms_facilities }
	remove_targeted_decision = { target = XSM decision = JAP_provide_arms_facilities }
	# JAP_support_offensive
	remove_targeted_decision = { target = FNG decision = JAP_support_offensive }
	remove_targeted_decision = { target = ANQ decision = JAP_support_offensive }
	remove_targeted_decision = { target = GXC decision = JAP_support_offensive }
	remove_targeted_decision = { target = SHX decision = JAP_support_offensive }
	remove_targeted_decision = { target = SQI decision = JAP_support_offensive }
	remove_targeted_decision = { target = SZC decision = JAP_support_offensive }
	remove_targeted_decision = { target = XSM decision = JAP_support_offensive }
	# JAP_provide_planes
	remove_targeted_decision = { target = FNG decision = JAP_provide_planes }
	remove_targeted_decision = { target = ANQ decision = JAP_provide_planes }
	remove_targeted_decision = { target = GXC decision = JAP_provide_planes }
	remove_targeted_decision = { target = SHX decision = JAP_provide_planes }
	remove_targeted_decision = { target = SQI decision = JAP_provide_planes }
	remove_targeted_decision = { target = SZC decision = JAP_provide_planes }
	remove_targeted_decision = { target = XSM decision = JAP_provide_planes }

	### > JAP_open_JAP_influence_china_JAP_sow_chaos < ###
	# support_chinese_seperatists
	remove_targeted_decision = { target = TIB decision = support_chinese_seperatists }
	remove_targeted_decision = { target = ETS decision = support_chinese_seperatists }
	remove_targeted_decision = { target = MON decision = support_chinese_seperatists }
	remove_targeted_decision = { target = KAC decision = support_chinese_seperatists }
	remove_targeted_decision = { target = SHA decision = support_chinese_seperatists }
	remove_targeted_decision = { target = SIA decision = support_chinese_seperatists }
	remove_targeted_decision = { target = BRM decision = support_chinese_seperatists }
	# send_ETS_tartar_guy
	remove_targeted_decision = { target = ETS decision = send_ETS_tartar_guy }
	# arms_factories_to_weaker_chinese_tags
	remove_targeted_decision = { target = CHI decision = arms_factories_to_weaker_chinese_tags }
	remove_targeted_decision = { target = GXC decision = arms_factories_to_weaker_chinese_tags }
	remove_targeted_decision = { target = HNN decision = arms_factories_to_weaker_chinese_tags }
	remove_targeted_decision = { target = SZC decision = arms_factories_to_weaker_chinese_tags }
	remove_targeted_decision = { target = SIK decision = arms_factories_to_weaker_chinese_tags }
	remove_targeted_decision = { target = XSM decision = arms_factories_to_weaker_chinese_tags }
	remove_targeted_decision = { target = SQI decision = arms_factories_to_weaker_chinese_tags }
	remove_targeted_decision = { target = SHX decision = arms_factories_to_weaker_chinese_tags }
	remove_targeted_decision = { target = YUN decision = arms_factories_to_weaker_chinese_tags }
	# bailout_weak_tags
	remove_targeted_decision = { target = CHI decision = bailout_weak_tags }
	remove_targeted_decision = { target = GXC decision = bailout_weak_tags }
	remove_targeted_decision = { target = HNN decision = bailout_weak_tags }
	remove_targeted_decision = { target = SZC decision = bailout_weak_tags }
	remove_targeted_decision = { target = SIK decision = bailout_weak_tags }
	remove_targeted_decision = { target = XSM decision = bailout_weak_tags }
	remove_targeted_decision = { target = SQI decision = bailout_weak_tags }
	remove_targeted_decision = { target = SHX decision = bailout_weak_tags }
	remove_targeted_decision = { target = YUN decision = bailout_weak_tags }

	### > JAP_open_JAP_mantetsu_projects < ###
	# develop_fengtian
	remove_targeted_decision = { target = FNG decision = develop_fengtian }
	# major_railroad_investment
	remove_targeted_decision = { target = ANQ decision = major_railroad_investment }
	remove_targeted_decision = { target = GXC decision = major_railroad_investment }
	remove_targeted_decision = { target = SHX decision = major_railroad_investment }
	remove_targeted_decision = { target = SQI decision = major_railroad_investment }
	remove_targeted_decision = { target = SZC decision = major_railroad_investment }
	remove_targeted_decision = { target = XSM decision = major_railroad_investment }
	# minor_railroad_investment
	remove_targeted_decision = { target = ANQ decision = minor_railroad_investment }
	remove_targeted_decision = { target = GXC decision = minor_railroad_investment }
	remove_targeted_decision = { target = SHX decision = minor_railroad_investment }
	remove_targeted_decision = { target = SQI decision = minor_railroad_investment }
	remove_targeted_decision = { target = SZC decision = minor_railroad_investment }
	remove_targeted_decision = { target = XSM decision = minor_railroad_investment }
	# harbin_chemical_research
	remove_targeted_decision = { target = FNG decision = harbin_chemical_research }
	# changchun_industry_investment
	remove_targeted_decision = { target = FNG decision = changchun_industry_investment }

	### > JAP_open_JAP_co_prosperity_decisions < ###
	for_each_scope_loop = {
		array = global.JAP_possible_allies_array
		PREV = { remove_targeted_decision = { target = PREV decision = JAP_invite_into_faction } }
	}

	### > JAP_open_JAP_co_prosperity_decisions_JAP_osaka_conference < ###
	# JAP_invite_into_economic_sphere :tester:
	remove_targeted_decision = { target = ANQ decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = ASM decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = AST decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = BNG decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = BOM decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = BRM decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = CAM decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = CEY decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = ETS decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = MAN decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = FNG decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = GUJ decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = GXC decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = HAW decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = HND decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = HYD decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = INC decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = INS decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = KAC decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = KAS decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = KOR decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = LAO decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = LEC decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = MAL decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = MDR decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = MON decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = MYS decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = NZL decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = ORI decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = PAK decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = PHI decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = PJB decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = PNG decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = PRF decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = RJS decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = SAR decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = SHA decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = SHX decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = SIA decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = SQI decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = SZC decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = TIB decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = TRM decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = TRV decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = XSM decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = VIN decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = NEP decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = AFG decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = ALO decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = TRK decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = BUK decision = JAP_invite_into_economic_sphere }
	remove_targeted_decision = { target = KHI decision = JAP_invite_into_economic_sphere }

	### > JAP_open_JAP_co_prosperity_decisions < ###
	for_each_scope_loop = {
		array = global.asian_economic_sphere
		FROM = {
			remove_targeted_decision = { target = PREV decision = JAP_invest_in_sphere_member1 }
			remove_targeted_decision = { target = PREV decision = JAP_invest_in_sphere_member2 }
			remove_targeted_decision = { target = PREV decision = JAP_invest_in_sphere_member3 }
			remove_targeted_decision = { target = PREV decision = JAP_economic_sphere_takeover }
			remove_targeted_decision = { target = PREV decision = JAP_invest_in_sphere_member_docks }
			remove_targeted_decision = { target = PREV decision = JAP_invest_in_sphere_naval_advisors }
			remove_targeted_decision = { target = PREV decision = JAP_invest_in_sphere_prosperity_ships }
			remove_targeted_decision = { target = PREV decision = JAP_invest_in_sphere_take_dockyards }
		}
		remove_targeted_decision = { target = JAP decision = JAP_join_rikagaku_kenkyusho }
		remove_targeted_decision = { target = JAP decision = JAP_request_nav_advisors }
		remove_targeted_decision = { target = JAP decision = JAP_withdraw_from_sphere }
		# JAP_nationalize_japanese_investments handled through on_remove in ideas
	}
	every_country = {
		limit = { is_in_faction_with = JAP }
		remove_targeted_decision = { target = JAP decision = JAP_withdraw_from_alliance }
	}

	### > operations < ###
	remove_targeted_decision = { target = PHI decision = JAP_threaten_philippines }
	remove_targeted_decision = { target = INC decision = JAP_attack_indochina }
	remove_targeted_decision = { target = VIN decision = JAP_attack_indochina }
	remove_targeted_decision = { target = LAO decision = JAP_attack_indochina }
	remove_targeted_decision = { target = CAM decision = JAP_attack_indochina }
	remove_targeted_decision = { target = SIA decision = JAP_attack_siam }
	for_each_scope_loop = {
		array = global.indian_tags_array
		JAP = { remove_targeted_decision = { target = PREV decision = JAP_attack_india } }
	}
	remove_targeted_decision = { target = CEY decision = JAP_attack_india }
	remove_targeted_decision = { target = BRM decision = JAP_attack_india }
	remove_targeted_decision = { target = NEP decision = JAP_attack_india }
	remove_targeted_decision = { target = BHU decision = JAP_attack_india }
	remove_targeted_decision = { target = SHA decision = JAP_attack_india }
	remove_targeted_decision = { target = KAC decision = JAP_attack_india }
	remove_targeted_decision = { target = AST decision = JAP_attack_australia }
	remove_targeted_decision = { target = NZL decision = JAP_attack_australia }
	remove_targeted_decision = { target = FNG decision = JAP_invade_manchuria }
}

JAP_log_war_progress_in_china = {
	# Base value - no progress
	set_temp_variable = { JAP_progress_in_china = 0 }
	# Conquered coastal states
	if = {
		limit = {
			614 = { is_controlled_by_ROOT_or_ally = yes }    # Tangshan - coastal QIE
			1065 = { is_controlled_by_ROOT_or_ally = yes }   # Nantong - coastal SQI
			803 = { is_controlled_by_ROOT_or_ally = yes }    # Wenzhou - coastal LEP
		}
		add_to_temp_variable = { JAP_progress_in_china = 1 }
	}
	# Conquered interior
	if = {
		limit = {
			606 = { is_controlled_by_ROOT_or_ally = yes }    # Anqing - ANQ
			608 = { is_controlled_by_ROOT_or_ally = yes }    # Beijing - QIE
			613 = { is_controlled_by_ROOT_or_ally = yes }    # Nanjing - LEP
			602 = { is_controlled_by_ROOT_or_ally = yes }    # Changsha - HNN
			592 = { is_controlled_by_ROOT_or_ally = yes }    # Guangzhou - GXC
			1048 = { is_controlled_by_ROOT_or_ally = yes }   # Wuchang - QIE
		}
		add_to_temp_variable = { JAP_progress_in_china = 2 }
	}
	# Conquered outer
	if = {
		limit = {
			1072 = { is_controlled_by_ROOT_or_ally = yes }    # Shanxi - SXH
			605 = { is_controlled_by_ROOT_or_ally = yes }     # Sichuan - SZC
			325 = { is_controlled_by_ROOT_or_ally = yes }     # Yunnan - YUN
		}
		add_to_temp_variable = { JAP_progress_in_china = 4 }
	}
	if = {
		limit = { check_variable = { JAP_progress_in_china = 0 } }
		log = "KR_Event_Logging;JAP WAR PROGRESS - Could not push into China;[GetDateText]"
	}
	else_if = {
		limit = { check_variable = { JAP_progress_in_china < 2 } }
		log = "KR_Event_Logging;JAP WAR PROGRESS - Conquered only the coastal states;[GetDateText]"
	}
	else_if = {
		limit = { check_variable = { JAP_progress_in_china < 7 } }
		log = "KR_Event_Logging;JAP WAR PROGRESS - Conquered all but the interior (Sichuan, Yunnan, Shanxi);[GetDateText]"
	}
	else_if = {
		limit = { check_variable = { JAP_progress_in_china = 7 } }
		log = "KR_Event_Logging;JAP WAR PROGRESS - Conquered all of China;[GetDateText]"
	}
}
