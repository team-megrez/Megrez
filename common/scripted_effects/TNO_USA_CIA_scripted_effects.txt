#########################################################################################################
#####
##### CIA STUFF
#####
#########################################################################################################





USA_CIA_clear_region_flags = {
	clr_country_flag = USA_CIA_Viewing_East_Asia
	clr_country_flag = USA_CIA_Viewing_Africa
	clr_country_flag = USA_CIA_Viewing_Central_America
	clr_country_flag = USA_CIA_Viewing_Europe
	clr_country_flag = USA_CIA_Viewing_Middle_East
	clr_country_flag = USA_CIA_Viewing_North_America
	clr_country_flag = USA_CIA_Viewing_Russia
	clr_country_flag = USA_CIA_Viewing_South_America
	clr_country_flag = USA_CIA_Viewing_South_East_Asia
	clr_country_flag = USA_CIA_Viewing_Australia
}










USA_CIA_Operations_Addition = {

	# CALCULATING THE STARTING VALUE
	USA_CIA_initialize_calculate_success_chance = yes

	# UPPING THE ADD COUNT
	add_to_variable = { USA_CIA_Amount_Times_Invested_Budget = 1 }

	# THE COUNTING VARS
	set_variable = { USA_CIA_Operation_Addition_Temp_Var = 0 }
	set_variable = { USA_CIA_Operation_Addition_Temp_Var = USA_CIA_Amount_Times_Invested_Budget }
	multiply_variable = { USA_CIA_Operation_Addition_Temp_Var = 5 }

	# ADDING TO IT
	add_to_variable = { USA_CIA_Operation_Success_Chance = USA_CIA_Operation_Addition_Temp_Var }
		# adding this, fuck you if it doesn't works - mango
		add_to_variable = { USA_CIA_Operation_Success_Chance = USA_Success_Increase_HART }
	add_to_variable = { USA_CIA_Invested_Budget = 0.005 }

	# CLAMPING

	clamp_variable = {
		var = USA_CIA_Operation_Success_Chance
		min = 0
		max = 100
	}
}


USA_CIA_Operations_Subtraction = {

	# CALCULATING THE STARTING VALUE
	USA_CIA_initialize_calculate_success_chance = yes

	# REDUCING THE ADD COUNT
	add_to_variable = { USA_CIA_Amount_Times_Invested_Budget = -1 }

	# THE COUNTING VARS
	set_variable = { USA_CIA_Operation_Addition_Temp_Var = 0 }
	set_variable = { USA_CIA_Operation_Addition_Temp_Var = USA_CIA_Amount_Times_Invested_Budget }
	multiply_variable = { USA_CIA_Operation_Addition_Temp_Var = 5 }

	# SUBTRACTING FROM IT
	add_to_variable = { USA_CIA_Operation_Success_Chance = USA_CIA_Operation_Addition_Temp_Var }
	add_to_variable = { USA_CIA_Invested_Budget = -0.005 }

	# CLAMPING

	clamp_variable = {
		var = USA_CIA_Operation_Success_Chance
		min = 0
		max = 100
	}
}











USA_CIA_Investigation_Launcher_effect = {

	set_country_flag = USA_CIA_Currently_Doing_Operation

	country_event = { id = USA_CIA.1 }

	subtract_from_variable = { USA_CIA_Budget = USA_CIA_Invested_Budget }

	USA_CIA_check_success = yes

	USA_CIA_Operation_Closing_Effect = yes
}











USA_CIA_Operation_Closing_Effect = {

	set_variable = { USA_CIA_Invested_Budget = 0 }

	set_variable = { USA_CIA_Operation_Success_Chance = 0 }

	set_variable = { USA_CIA_Amount_Times_Invested_Budget = 0 }
}












#Exactly what it sounds like, go here to check whether attempt #657 at assassinating Castro works out (hint it won't)
USA_CIA_check_success = {
	if = {
		limit = { check_variable = { USA_CIA_Operation_Success_Chance = 100 } }

		if = { # Slow down the rate at which the AI does missions to prevent spam
			limit = { USA = { is_ai = no } }
			country_event = { id = USA_CIA.3 days = 14 } ### YAY WE DID IT
		}
		else = {
			country_event = { id = USA_CIA.3 days = 120 } ### YAY WE DID IT
		}
	}
	else = {
		set_temp_variable = { USA_CIA_failure_chance = 100 }
		subtract_from_temp_variable = { USA_CIA_failure_chance = USA_CIA_Operation_Success_Chance }

		if = { # Slow down the rate at which the AI does missions to prevent spam
			limit = { USA = { is_ai = no } }
			random_list = {
				USA_CIA_Operation_Success_Chance = { country_event = { id = USA_CIA.3 days = 14 } } ### YAY WE DID IT
				USA_CIA_failure_chance = { country_event = { id = USA_CIA.2 days = 14 } } ### SHIT WE DIDN'T
			}
		}
		else = {
			random_list = {
				USA_CIA_Operation_Success_Chance = { country_event = { id = USA_CIA.3 days = 120 } } ### YAY WE DID IT
				USA_CIA_failure_chance = { country_event = { id = USA_CIA.2 days = 120 } } ### SHIT WE DIDN'T
			}
		}
	}

	USA_CIA_clean_up = yes
}






USA_CIA_Rewards_Calculation = {

	####################################################
	##### MIDDLE EAST
	####################################################

	if = {
		limit = { has_country_flag = USA_CIA_Contacting_Israeli_Paramilitaries_Flag }
		hidden_effect = {
			IME = {
				set_country_flag = USA_CIA_Irgun_Assistance
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_me }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_7_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^4 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^4 = 1 } }
		}
	}





	####################################################
	##### EUROPE
	####################################################

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_eu }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^1 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^1 = 1 } }
		}
	}

	# Ireland
	else_if = {
		limit = { has_country_flag = USA_CIA_Fucking_Irish_Politics_Flag }
		hidden_effect = {
			IRE = { country_event = USA_CIA_UK.101 }
		}
	}

	# OCW
	else_if = {
		limit = { has_country_flag = USA_CIA_OCW_send_landrut_rifles_flag }
		hidden_effect = {
			send_equipment = {
				equipment = infantry_equipment
				amount = 125
				target = GER
			}
		}
	}

	# GGN
	else_if = {
		limit = { has_country_flag = USA_CIA_GGN_send_help_to_the_underground_flag }
		hidden_effect = {
			GGN = {
				add_stability = -0.025
			}
		}
	}

	# SER
	else_if = {
		limit = { has_country_flag = USA_CIA_SER_send_rifles_to_the_insurrection_flag }
		hidden_effect = {
			SER = {
				add_stability = -0.025
			}
		}
	}

	## England
	# Stateroom
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_find_out_politics_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_found_out_politics_flag
			if = {
				limit = {
					ENG = {
						OR = {
							has_country_flag = SLP_victorious
							has_country_flag = SLP_victorious2
						}
					}
				}
				country_event = USA_CIA_UK.1
			}
			else_if = {
				limit = {
					ENG = {
						OR = {
							has_country_flag = NDL_victorious
							has_country_flag = NDL_victorious2
						}
					}
				}
				country_event = USA_CIA_UK.2
			}
			else_if = {
				limit = {
					ENG = {
						OR = {
							has_country_flag = ENG_macmillan_victorious
							has_country_flag = ENG_macmillan_victorious2
						}
					}
				}
				country_event = USA_CIA_UK.3
			}
			else_if = {
				limit = {
					ENG = {
						OR = {
							has_country_flag = ENG_Thatcher_victorious
							has_country_flag = ENG_Thatcher_victorious2
						}
					}
				}
				country_event = USA_CIA_UK.4
			}
		}
	}
	# Military
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_increase_military_loyalty_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_increase_military_loyalty_success_flag
			country_event = USA_CIA_UK.10
			ENG = { country_event = USA_CIA_UK.11 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_decrease_military_loyalty_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_decrease_military_loyalty_success_flag
			country_event = USA_CIA_UK.12
			ENG = { country_event = USA_CIA_UK.13 }
		}
	}
	# SLP
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_slp_reduce_hardliners_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_slp_reduce_hardliners_success_flag
			country_event = USA_CIA_UK.20
			ENG = { country_event = USA_CIA_UK.21 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_slp_increase_reform_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_slp_increase_reform_success_flag
			country_event = USA_CIA_UK.22
			ENG = { country_event = USA_CIA_UK.23 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_slp_increase_reformists_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_slp_increase_reformists_success_flag
			country_event = USA_CIA_UK.24
			ENG = { country_event = USA_CIA_UK.25 }
		}
	}
	# NDL
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_ndl_decrease_liberals_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_ndl_decrease_liberals_success_flag
			country_event = USA_CIA_UK.30
			ENG = { country_event = USA_CIA_UK.31 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_ndl_decrease_patriots_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_ndl_decrease_patriots_success_flag
			country_event = USA_CIA_UK.32
			ENG = { country_event = USA_CIA_UK.33 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_ndl_increase_moderates_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_ndl_increase_moderates_success_flag
			country_event = USA_CIA_UK.34
			ENG = { country_event = USA_CIA_UK.35 }
		}
	}
	# SuperMac
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_mac_increase_macmillan_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_mac_increase_macmillan_success_flag
			country_event = USA_CIA_UK.40
			ENG = { country_event = USA_CIA_UK.41 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_mac_increase_liberals_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_mac_increase_liberals_success_flag
			country_event = USA_CIA_UK.42
			ENG = { country_event = USA_CIA_UK.43 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_mac_increase_democratization_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_mac_increase_democratization_success_flag
			country_event = USA_CIA_UK.44
			ENG = { country_event = USA_CIA_UK.45 }
		}
	}
	# Maggie
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_thatcher_party_influence_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_thatcher_og_influence_success_flag
			country_event = USA_CIA_UK.50
			ENG = { country_event = USA_CIA_UK.51 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_thatcher_populist_support_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_thatcher_pop_sup_success_flag
			country_event = USA_CIA_UK.52
			ENG = { country_event = USA_CIA_UK.53 }
		}
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_ENG_thatcher_elite_support_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_ENG_thatcher_eli_sup_success_flag
			country_event = USA_CIA_UK.54
			ENG = { country_event = USA_CIA_UK.55 }
		}
	}

	#IBR
	else_if = {
		limit = { has_country_flag = USA_CIA_Iberia_Franco_Allign }
		set_country_flag = USA_CIA_Iberia_Franco_Allign_success
		IBR = { country_event = USA_CIA_IBR.1 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_Iberia_Salazar_Allign }
		set_country_flag = USA_CIA_Iberia_Salazar_Allign_success
		IBR = { country_event = USA_CIA_IBR.2 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_Add_AAS_Resources }
		set_country_flag = USA_CIA_AI_Add_AAS_Resources_success # This flag appplies to the ai
		IBR = { country_event = USA_CIA_IBR.3 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_Reduce_Iberia_Terrorism }
		set_country_flag = USA_CIA_Reduce_Iberia_Terrorism_success
		IBR = { country_event = USA_CIA_IBR.4 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_Stabilize_Iberia }
		set_country_flag = USA_CIA_AI_Stabilize_Iberia_success # This flag appplies to the ai
		IBR = { country_event = USA_CIA_IBR.6 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_Reform_Iberia }
		set_country_flag = USA_CIA_AI_Reform_Iberia_success # This flag appplies to the ai
		IBR = { country_event = USA_CIA_IBR.7 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_Iberian_Wars }
		set_country_flag = USA_CIA_AI_Iberian_Wars_success # This flag appplies to the ai
		hidden_effect = {
			if = {
				limit = {
					country_exists = SPR
					OR = {
						has_government = conservatism
						has_government = liberalism
						AND = {
							has_government = progressivism
							SPR = {
								NOT = {
									has_idea = SPR_Nicolas_Cotoner_hog
								}
							}
						}
						AND = {
							has_government = communist
							SPR = {
								NOT = {
									has_idea = SPR_juan_III_idea
								}
							}
						}
					}
				}

				SPR = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = POR
					OR = {
						has_government = conservatism
						has_government = liberalism
					}
					NOT = {
						country_exists = RPP
					}
				}

				POR = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = RPP
					OR = {
						has_government = conservatism
						has_government = liberalism
						has_government = progressivism
						AND = {
							has_government = communist
							NOT = {
								country_exists = PPR
							}
						}
					}
				}

				RPP = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = PPR
					has_government = communist
				}

				PPR = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = RIF
					OR = {
						has_government = conservatism
						has_government = liberalism
						has_government = progressivism
						has_government = communist
					}
				}

				RIF = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = GAL
					OR = {
						has_government = progressivism
						has_government = communist
					}
				}

				GAL = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = CTL
					OR = {
						has_government = progressivism
						AND = {
							has_government = communist
							NOT = {
								country_exists = CNT
							}
						}
					}
				}

				CTL = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = BSQ
					OR = {
						has_government = communist
						AND = {
							has_government = progressivism
							NOT = {
								BSQ = {
									has_idea = BSQ_Jose_Miguel_Benaran_hog
								}
							}
						}
					}
				}

				BSQ = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = TBA
					has_government = communist
				}

				TBA = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = CNT
					has_government = communist
				}

				CNT = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = IBR
					has_government = paternalism
				}

				IBR = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = SPS
					has_government = national_socialism
					NOT = {
						country_exists = FZL
					}
				}

				SPS = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}

			if = {
				limit = {
					country_exists = FZL
					has_government = national_socialism
				}

				FZL = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 300
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 150
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 200
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = fighter_equipment
						amount = 100
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = MBT_chassis
						amount = 50
						producer = USA
					}
					add_equipment_to_stockpile = {
						type = IFV_chassis
						amount = 50
						producer = USA
					}
				}
			}
		}
	}

	### Germany

	# Speer

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_early_flag }
		set_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_early_success_flag
		GER = { country_event = USA_CIA_SGR.1 }
	}

	else_if = {
		limit = { has_country_flag = USA_speer_radio_address_flag }

		SGR = {
			add_stability = 0.03
			add_political_power = 75
		}
	}

	else_if = {
		limit = { has_country_flag = USA_speer_send_weapons_flag }
		send_equipment = {
			equipment = support_equipment
			amount = 125
			target = SGR
		}
		send_equipment = {
			equipment = infantry_equipment
			amount = 1000
			target = SGR
		}
	}

	else_if = {
		limit = { has_country_flag = USA_speer_support_internationally_flag }
		SGR = {
			add_political_power = 100
			add_stability = 0.02
			add_war_support = 0.05
		}
	}

	else_if = {
		limit = { has_country_flag = USA_speer_send_fighters_flag }
		send_equipment = {
			equipment = fighter_equipment
			amount = 30
			target = SGR
		}
	}


	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_early_flag }
		set_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_early_success_flag
		GER = { country_event = USA_CIA_SGR.2 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_boost_reformers_early_flag }
		set_country_flag = USA_CIA_GER_SGR_boost_reformers_early_success_flag
		GER = { country_event = USA_CIA_SGR.3 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_middle_flag }
		set_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_middle_success_flag
		GER = { country_event = USA_CIA_SGR.4 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_middle_flag }
		set_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_middle_success_flag
		GER = { country_event = USA_CIA_SGR.5 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_boost_reformers_middle_flag }
		set_country_flag = USA_CIA_GER_SGR_boost_reformers_middle_success_flag
		GER = { country_event = USA_CIA_SGR.6 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_late_flag }
		set_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_late_success_flag
		GER = { country_event = USA_CIA_SGR.9 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_late_flag }
		set_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_late_success_flag
		GER = { country_event = USA_CIA_SGR.10 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_boost_reformers_late_flag }
		set_country_flag = USA_CIA_GER_SGR_boost_reformers_late_success_flag
		GER = { country_event = USA_CIA_SGR.11 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_sabotage_repatriation_efforts_flag }
		set_country_flag = USA_CIA_GER_SGR_sabotage_repatriation_efforts_success_flag
		GER = { country_event = USA_CIA_SGR.7 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_SGR_sabotage_infrastructure_flag }
		set_country_flag = USA_CIA_GER_SGR_sabotage_infrastructure_success_flag
		GER = { country_event = USA_CIA_SGR.8 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_political_sabotage_flag }
		set_country_flag = USA_CIA_GER_BOR_political_sabotage_success_flag
		GER = { country_event = USA_CIA_BOR.1 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_political_sabotage_major_flag }
		GER = { country_event = USA_CIA_BOR.2 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_economic_sabotage_initial }
		set_country_flag = USA_CIA_GER_BOR_economic_sabotage_initial_success_flag
		GER = { country_event = USA_CIA_BOR.3 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_economic_sabotage_second_flag }
		set_country_flag = USA_CIA_GER_BOR_economic_sabotage_second_success_flag
		GER = { country_event = USA_CIA_BOR.4 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_economic_sabotage_infrastructure_flag }
		set_country_flag = USA_CIA_GER_BOR_economic_sabotage_infrastructure_success_flag
		GER = { country_event = USA_CIA_BOR.5 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_economic_sabotage_infrastructure_second_flag }
		set_country_flag = USA_CIA_GER_BOR_economic_sabotage_infrastructure_second_success_flag
		GER = { country_event = USA_CIA_BOR.6 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_economic_sabotage_combined_flag }
		set_country_flag = USA_CIA_GER_BOR_economic_sabotage_combined_success_flag
		GER = { country_event = USA_CIA_BOR.7 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_flag }
		set_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_success_flag
		GER = { country_event = USA_CIA_BOR.8 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_2_flag }
		set_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_2_success_flag
		GER = { country_event = USA_CIA_BOR.9 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_fuck_with_dismantlement_2_flag }
		set_country_flag = USA_CIA_GER_BOR_fuck_with_dismantlement_2_success_flag
		GER = { country_event = USA_CIA_BOR.10 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_2_people_flag }
		set_country_flag = USA_CIA_GER_BOR_fuck_with_dismantlement_2_people_success_flag
		GER = { country_event = USA_CIA_BOR.11 }
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_2_banks_flag }
		set_country_flag = USA_CIA_GER_BOR_fuck_with_dismantlement_2_banks_success_flag
		GER = { country_event = USA_CIA_BOR.12 }
	}

	####################################################
	##### RUSSIA
	####################################################
	# Unification Ops
	else_if = { # Intel
		limit = { has_country_flag = CIA_USA_Unification_Enemy_Intel_operation }
		if = {
			limit = { WSR = { has_country_flag = USA_CIA_receiving_intel } }
			WSR = { country_event = USA_CIA_RUS.18 clr_country_flag = USA_CIA_receiving_intel }
		}
		if = {
			limit = { WSB = { has_country_flag = USA_CIA_receiving_intel } }
			WSB = { country_event = USA_CIA_RUS.18 clr_country_flag = USA_CIA_receiving_intel }
		}

		if = {
			limit = { CSB = { has_country_flag = USA_CIA_receiving_intel } }
			CSB = { country_event = USA_CIA_RUS.18 clr_country_flag = USA_CIA_receiving_intel }
		}
		if = {
			limit = { FST = { has_country_flag = USA_CIA_receiving_intel } }
			FST = { country_event = USA_CIA_RUS.18 clr_country_flag = USA_CIA_receiving_intel }
		}

		if = {
			limit = { RWS = { has_country_flag = USA_CIA_receiving_intel } }
			RWS = { country_event = USA_CIA_RUS.18 clr_country_flag = USA_CIA_receiving_intel }
		}
		if = {
			limit = { SIB = { has_country_flag = USA_CIA_receiving_intel } }
			SIB = { country_event = USA_CIA_RUS.18 clr_country_flag = USA_CIA_receiving_intel }
		}
	}

	else_if = { # Sabotage
		limit = { has_country_flag = CIA_USA_Unification_Sabotage_operation }
		if = {
			limit = { WSR = { has_country_flag = USA_CIA_being_sabotaged } }
			WSR = { country_event = USA_CIA_RUS.19 clr_country_flag = USA_CIA_being_sabotaged }
		}
		if = {
			limit = { WSB = { has_country_flag = USA_CIA_being_sabotaged } }
			WSB = { country_event = USA_CIA_RUS.19 clr_country_flag = USA_CIA_being_sabotaged }
		}

		if = {
			limit = { CSB = { has_country_flag = USA_CIA_being_sabotaged } }
			CSB = { country_event = USA_CIA_RUS.19 clr_country_flag = USA_CIA_being_sabotaged }
		}
		if = {
			limit = { FST = { has_country_flag = USA_CIA_being_sabotaged } }
			FST = { country_event = USA_CIA_RUS.19 clr_country_flag = USA_CIA_being_sabotaged }
		}

		if = {
			limit = { RWS = { has_country_flag = USA_CIA_being_sabotaged } }
			RWS = { country_event = USA_CIA_RUS.19 clr_country_flag = USA_CIA_being_sabotaged }
		}
		if = {
			limit = { SIB = { has_country_flag = USA_CIA_being_sabotaged } }
			SIB = { country_event = USA_CIA_RUS.19 clr_country_flag = USA_CIA_being_sabotaged }
		}
	}

	else_if = {
		limit = { has_country_flag = CIA_USA_RUS_Establishing_Safehouses }
		hidden_effect = { # note for the future, i'm thinking of having different flavor events for this -oveja
			every_country = {
				limit = { has_country_flag = CIA_USA_RUS_Establishing_Safehouses_target }
				set_country_flag = CIA_USA_RUS_Established_Safehouses_target
				clr_country_flag = CIA_USA_RUS_Establishing_Safehouses_target
			}
			if = {
				limit = { has_country_flag = USA_CIA_tech_8_researched }
				subtract_from_variable = { USA_CIA_Russian_Encryption = 5 }
			}
			else = { subtract_from_variable = { USA_CIA_Russian_Encryption = 3 } }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_ru }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^9 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^9 = 1 } }
		}
	}

	else_if = {
		limit = { has_country_flag = CIA_USA_WRRF_GRAND_MARSHALL }
		set_country_flag = CIA_USA_WRRF_GRAND_MARSHALL_success
		WRS = { country_event = USA_CIA_RUS.20 }
	}

	# else_if = {
	#	limit = { has_country_flag = CIA_USA_Vyatka_politics }

	#	set_country_flag = CIA_USA_Vyatka_politics_success
	#	VYT = { country_event = USA_CIA_RUS.22 }
	#	hidden_effect = {
	#		if = {
	#			limit = { has_government = national_socialism }

	#			hidden_effect = {
	#				VYT = {
	#					subtract_from_variable = { national_debt = 0.1 } #already converted to billion
	#					TNO_improve_academic_base_low = yes
	#					TNO_improve_industrial_equipment_low = yes
	#					TNO_improve_industrial_expertise_low = yes
	#					add_war_support = 0.04
	#					add_command_power = 25
	#					add_equipment_to_stockpile = { type = infantry_equipment amount = 200 }
	#					add_equipment_to_stockpile = { type = support_equipment amount = 20 }
	#					add_stability = 0.04
	#					add_political_power = 50
	#					add_to_variable = { loot_amount = 1 }
	#					VYT_increase_economic_strength_low = yes
	#					VYT_increase_popular_support_low = yes
	#					country_event = { id = BRG.5002 days = 1 }
	#					TNO_improve_army_professionalism_low = yes
	#					add_to_variable = { RUS_auth_global_bonus_pop = 0.02 }
	#				}
	#			}
	#		}

	#		if = {
	#			limit = { has_government = paternalism }

	#			hidden_effect = {
	#				VYT = {
	#					subtract_from_variable = { national_debt = 0.1 } #already converted to billion
	#					TNO_improve_academic_base_low = yes
	#					TNO_improve_industrial_equipment_low = yes
	#					TNO_improve_industrial_expertise_low = yes
	#					add_war_support = 0.04
	#					add_command_power = 25
	#					add_equipment_to_stockpile = { type = infantry_equipment amount = 200 }
	#					add_equipment_to_stockpile = { type = support_equipment amount = 20 }
	#					add_stability = 0.04
	#					add_political_power = 50
	#					add_to_variable = { loot_amount = 1 }
	#					VYT_increase_economic_strength_low = yes
	#					VYT_increase_popular_support_low = yes
	#					country_event = { id = BRG.5002 days = 1 }
	#					TNO_improve_army_professionalism_low = yes
	#					add_to_variable = { RUS_auth_global_bonus_pop = 0.02 }
	#				}
	#			}
	#		}

	#		if = {
	#			limit =
	#			{
	#				OR =
	#				{
	#					has_government = liberalism
	#					has_government = conservatism
	#				}
	#			}

	#			hidden_effect = {
	#				VYT = {
	#					add_to_variable = { national_debt = 0.1 } #already converted to billion
	#					TNO_worsen_academic_base_low = yes
	#					TNO_worsen_industrial_equipment_low = yes
	#					TNO_worsen_industrial_expertise_low = yes
	#					add_war_support = -0.04
	#					add_command_power = -25
	#					add_equipment_to_stockpile = { type = infantry_equipment amount = -200 }
	#					add_equipment_to_stockpile = { type = support_equipment amount = -20 }
	#					add_stability = -0.04
	#					add_political_power = -50
	#					subtract_from_variable = { loot_amount = 1 }
	#					VYT_decrease_economic_strength_low = yes
	#					VYT_decrease_popular_support_low = yes
	#					TNO_worsen_army_professionalism_low = yes
	#					subtract_from_variable = { RUS_auth_global_bonus_pop = 0.02 }
	#					add_to_variable = { RUS_conservative_global_bonus_pop = 0.02 }
	#				}
	#			}
	#		}

	#		if = {
	#			limit = { has_government = progressivism }

	#			hidden_effect = {
	#				VYT = {
	#					add_to_variable = { national_debt = 0.1 } #already converted to billion
	#					TNO_worsen_academic_base_low = yes
	#					TNO_worsen_industrial_equipment_low = yes
	#					TNO_worsen_industrial_expertise_low = yes
	#					add_war_support = -0.04
	#					add_command_power = -25
	#					add_equipment_to_stockpile = { type = infantry_equipment amount = -200 }
	#					add_equipment_to_stockpile = { type = support_equipment amount = -20 }
	#					add_stability = -0.04
	#					add_political_power = -50
	#					subtract_from_variable = { loot_amount = 1 }
	#					VYT_decrease_economic_strength_low = yes
	#					VYT_decrease_popular_support_low = yes
	#					TNO_worsen_army_professionalism_low = yes
	#					subtract_from_variable = { RUS_auth_global_bonus_pop = 0.02 }
	#					add_to_variable = { RUS_liberal_global_bonus_pop = 0.02 }
	#				}
	#			}
	#		}

	#		if = {
	#			limit = { has_government = communist }

	#			hidden_effect = {
	#				VYT = {
	#					add_to_variable = { national_debt = 0.1 } #already converted to billion
	#					TNO_worsen_academic_base_low = yes
	#					TNO_worsen_industrial_equipment_low = yes
	#					TNO_worsen_industrial_expertise_low = yes
	#					add_war_support = -0.04
	#					add_command_power = -25
	#					add_equipment_to_stockpile = { type = infantry_equipment amount = -200 }
	#					add_equipment_to_stockpile = { type = support_equipment amount = -20 }
	#					add_stability = -0.04
	#					add_political_power = -50
	#					subtract_from_variable = { loot_amount = 1 }
	#					VYT_decrease_economic_strength_low = yes
	#					VYT_decrease_popular_support_low = yes
	#					TNO_worsen_army_professionalism_low = yes
	#					subtract_from_variable = { RUS_auth_global_bonus_pop = 0.02 }
	#					add_to_variable = { RUS_liberal_global_bonus_pop = 0.02 }
	#				}
	#			}
	#		}
	#	}
	# }

	# Magadan
	else_if = {
		limit = { has_country_flag = CIA_USA_Magadan_Increasing_Presence }
		hidden_effect = {
			set_country_flag = USA_CIA_Magadan_Increased_Presence # USE THIS FLAG TO ENABLE ADVANCED REGIONAL OPS IN MAGADAN

			USA_CIA_increase_expertise_25 = yes

			MAG = {
				country_event = USA_CIA_RUS.8
			}
		}
	}

	else_if = {
		limit = { has_country_flag = CIA_USA_Magadan_Supporting_Reformists }
		hidden_effect = {
			set_country_flag = CIA_USA_Magadan_Supporting_Reformists_success
			USA_CIA_increase_expertise_5 = yes

			MAG = {
				country_event = USA_CIA_RUS.7
			}
		}
	}

	# Buryatia
	else_if = {
		limit = { has_country_flag = USA_CIA_BRY_strengthen_bukharinist_wing_industry_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_BRY_strengthen_bukharinist_wing_industry_success_flag

			USA_CIA_increase_expertise_5 = yes

			BRY = { country_event = USA_CIA_RUS.1 }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_BRY_strengthen_bukharinist_wing_politics_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_BRY_strengthen_bukharinist_wing_politics_success_flag

			USA_CIA_increase_expertise_5 = yes

			BRY = { country_event = USA_CIA_RUS.2 }
		}
	}

	# Irkutsk
	else_if = {
		limit = { has_country_flag = USA_CIA_IRK_strengthen_party_wing_industry_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_IRK_strengthen_party_wing_industry_success_flag

			USA_CIA_increase_expertise_5 = yes

			IRK = { country_event = USA_CIA_RUS.15 }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_IRK_strengthen_party_wing_politics_flag }
		hidden_effect = {
			set_country_flag = USA_CIA_IRK_strengthen_party_wing_politics_success_flag

			USA_CIA_increase_expertise_5 = yes

			IRK = { country_event = USA_CIA_RUS.16 }
		}
	}

	#Novosibirsk
	else_if = {
		limit = { has_country_flag = USA_CIA_aligning_novosibirsk }
		hidden_effect = {

			USA_CIA_increase_expertise_5 = yes

			NOV = { NOV_USA_gain_mid_influence = yes }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_disaligning_novosibirsk }
		hidden_effect = {

			USA_CIA_increase_expertise_5 = yes

			NOV = { NOV_JAP_lose_mid_influence = yes }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_invest_in_novosibirsk }
		hidden_effect = {

			USA_CIA_increase_expertise_5 = yes

			NOV = {
				set_temp_variable = { money_reserves_temp = 0.1 } #already converted to billion
				econ_money_reserves_change_raw_money = yes
			}
		}
	}

	####################################################
	##### OCEANIA
	####################################################

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_au }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^2 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^2 = 1 } }
		}
	}

	####################################################
	##### NORTH AMERICA
	####################################################

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_na }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^7 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^7 = 1 } }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_damage_republicans }

		custom_effect_tooltip = USA_all_voters_header_tt
		set_temp_variable = { USA_week_change_union_dem = 1 }
		add_to_variable = { Demographic_Shift_urban_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_rural_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_black_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_minority_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_nativists_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_hispanic_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_union_dem_Weeks = USA_week_change_union_dem }
		custom_effect_tooltip = USA_union_dem_shift
		
		set_temp_variable = { USA_week_change_union_pro = 1 }
		add_to_variable = { Demographic_Shift_urban_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_rural_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_black_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_minority_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_nativists_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_hispanic_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_union_pro_Weeks = USA_week_change_union_pro }
		custom_effect_tooltip = USA_union_pro_shift
		
		set_temp_variable = { USA_week_change_union_nat = 1 }
		add_to_variable = { Demographic_Shift_urban_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_rural_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_black_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_minority_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_nativists_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_hispanic_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_union_nat_Weeks = USA_week_change_union_nat }
		custom_effect_tooltip = USA_union_nat_shift
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_damage_democrats }
		
		custom_effect_tooltip = USA_all_voters_header_tt
		set_temp_variable = { USA_week_change_union_rep = 1 }
		add_to_variable = { Demographic_Shift_urban_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_rural_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_black_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_minority_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_nativists_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_hispanic_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_union_rep_Weeks = USA_week_change_union_rep }
		custom_effect_tooltip = USA_union_rep_shift
		
		set_temp_variable = { USA_week_change_union_pro = 1 }
		add_to_variable = { Demographic_Shift_urban_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_rural_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_black_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_minority_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_nativists_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_hispanic_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_union_pro_Weeks = USA_week_change_union_pro }
		custom_effect_tooltip = USA_union_pro_shift
		
		set_temp_variable = { USA_week_change_union_nat = 1 }
		add_to_variable = { Demographic_Shift_urban_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_rural_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_black_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_minority_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_nativists_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_hispanic_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_union_nat_Weeks = USA_week_change_union_nat }
		custom_effect_tooltip = USA_union_nat_shift
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_damage_center }
		
		custom_effect_tooltip = USA_all_voters_header_tt
		set_temp_variable = { USA_week_change_union_dem = 1 }
		add_to_variable = { Demographic_Shift_urban_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_rural_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_black_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_minority_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_nativists_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_hispanic_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_union_dem_Weeks = USA_week_change_union_dem }
		custom_effect_tooltip = USA_union_dem_shift
		
		set_temp_variable = { USA_week_change_union_rep = 1 }
		add_to_variable = { Demographic_Shift_urban_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_rural_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_black_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_minority_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_nativists_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_hispanic_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_union_rep_Weeks = USA_week_change_union_rep }
		custom_effect_tooltip = USA_union_rep_shift
		
		set_temp_variable = { USA_week_change_union_nat = 1 }
		add_to_variable = { Demographic_Shift_urban_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_rural_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_black_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_minority_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_nativists_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_hispanic_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_union_nat_Weeks = USA_week_change_union_nat }
		custom_effect_tooltip = USA_union_nat_shift
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_damage_right }
		
		custom_effect_tooltip = USA_all_voters_header_tt
		set_temp_variable = { USA_week_change_union_dem = 1 }
		add_to_variable = { Demographic_Shift_urban_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_rural_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_black_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_minority_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_nativists_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_hispanic_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_union_dem_Weeks = USA_week_change_union_dem }
		custom_effect_tooltip = USA_union_dem_shift
		
		set_temp_variable = { USA_week_change_union_rep = 1 }
		add_to_variable = { Demographic_Shift_urban_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_rural_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_black_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_minority_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_nativists_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_hispanic_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_union_rep_Weeks = USA_week_change_union_rep }
		custom_effect_tooltip = USA_union_rep_shift
		
		set_temp_variable = { USA_week_change_union_pro = 1 }
		add_to_variable = { Demographic_Shift_urban_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_rural_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_black_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_minority_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_nativists_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_hispanic_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_union_pro_Weeks = USA_week_change_union_pro }
		custom_effect_tooltip = USA_union_pro_shift
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_damage_yockey }
		
		custom_effect_tooltip = USA_all_voters_header_tt
		set_temp_variable = { USA_week_change_union_dem = 1 }
		add_to_variable = { Demographic_Shift_urban_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_rural_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_black_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_minority_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_nativists_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_hispanic_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_union_dem_Weeks = USA_week_change_union_dem }
		custom_effect_tooltip = USA_union_dem_shift
		
		set_temp_variable = { USA_week_change_union_rep = 1 }
		add_to_variable = { Demographic_Shift_urban_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_rural_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_black_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_minority_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_nativists_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_hispanic_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_union_rep_Weeks = USA_week_change_union_rep }
		custom_effect_tooltip = USA_union_rep_shift
		
		set_temp_variable = { USA_week_change_union_pro = 1 }
		add_to_variable = { Demographic_Shift_urban_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_rural_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_black_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_minority_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_nativists_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_hispanic_pro_Weeks = USA_week_change_union_pro }
		add_to_variable = { Demographic_Shift_union_pro_Weeks = USA_week_change_union_pro }
		custom_effect_tooltip = USA_union_pro_shift
		
		set_temp_variable = { USA_week_change_union_com = 2 }
		add_to_variable = { Demographic_Shift_urban_com_Weeks = USA_week_change_union_com }
		add_to_variable = { Demographic_Shift_rural_com_Weeks = USA_week_change_union_com }
		add_to_variable = { Demographic_Shift_black_com_Weeks = USA_week_change_union_com }
		add_to_variable = { Demographic_Shift_minority_com_Weeks = USA_week_change_union_com }
		add_to_variable = { Demographic_Shift_nativists_com_Weeks = USA_week_change_union_com }
		add_to_variable = { Demographic_Shift_hispanic_com_Weeks = USA_week_change_union_com }
		add_to_variable = { Demographic_Shift_union_com_Weeks = USA_week_change_union_com }
		custom_effect_tooltip = USA_union_com_shift
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_damage_left }
		
		custom_effect_tooltip = USA_all_voters_header_tt
		set_temp_variable = { USA_week_change_union_dem = 1 }
		add_to_variable = { Demographic_Shift_urban_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_rural_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_black_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_minority_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_nativists_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_hispanic_dem_Weeks = USA_week_change_union_dem }
		add_to_variable = { Demographic_Shift_union_dem_Weeks = USA_week_change_union_dem }
		custom_effect_tooltip = USA_union_dem_shift
		
		set_temp_variable = { USA_week_change_union_rep = 1 }
		add_to_variable = { Demographic_Shift_urban_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_rural_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_black_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_minority_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_nativists_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_hispanic_rep_Weeks = USA_week_change_union_rep }
		add_to_variable = { Demographic_Shift_union_rep_Weeks = USA_week_change_union_rep }
		custom_effect_tooltip = USA_union_rep_shift
		
		set_temp_variable = { USA_week_change_union_nat = 1 }
		add_to_variable = { Demographic_Shift_urban_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_rural_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_black_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_minority_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_nativists_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_hispanic_nat_Weeks = USA_week_change_union_nat }
		add_to_variable = { Demographic_Shift_union_nat_Weeks = USA_week_change_union_nat }
		custom_effect_tooltip = USA_union_nat_shift
		
		set_temp_variable = { USA_week_change_union_anv = 2 }
		add_to_variable = { Demographic_Shift_urban_anv_Weeks = USA_week_change_union_anv }
		add_to_variable = { Demographic_Shift_rural_anv_Weeks = USA_week_change_union_anv }
		add_to_variable = { Demographic_Shift_black_anv_Weeks = USA_week_change_union_anv }
		add_to_variable = { Demographic_Shift_minority_anv_Weeks = USA_week_change_union_anv }
		add_to_variable = { Demographic_Shift_nativists_anv_Weeks = USA_week_change_union_anv }
		add_to_variable = { Demographic_Shift_hispanic_anv_Weeks = USA_week_change_union_anv }
		add_to_variable = { Demographic_Shift_union_anv_Weeks = USA_week_change_union_anv }
		custom_effect_tooltip = USA_union_anv_shift
	}

	####################################################
	##### CENTRAL AMERICA
	####################################################

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_ca }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^5 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^5 = 1 } }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_boosting_trade_influence_in_ca }
		random_country = {
			limit = {
				OR = {
					tag = CUB
					tag = MEX
					tag = GUA
					tag = ELS
					tag = HON
					tag = NIC
					tag = COS
					tag = PAN
					tag = HAI
					tag = DOM
				}
			}
			set_temp_variable = { temp_modifier = 20 }
			USA = { add_to_trade_modifier_PREV = yes }
			USA = {
				set_temp_variable = { temp_modifier = 20 }
				PREV = { add_to_trade_modifier_PREV = yes }
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_boosting_american_influence_in_ca }
		add_political_power = 40
	}

	####################################################
	##### SOUTH AMERICA
	####################################################

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_sa }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^6 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^6 = 1 } }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_boosting_trade_influence_in_sa }
		random_country = {
			limit = {
				OR = {
					tag = COL
					tag = ECU
					tag = PRU
					tag = BOL
					tag = CHL
					tag = ARG
					tag = URG
					tag = PAR
					tag = BRA
					tag = VEN
				}
			}
			set_temp_variable = { temp_modifier = 20 }
			USA = { add_to_trade_modifier_PREV = yes }
			USA = {
				set_temp_variable = { temp_modifier = 20 }
				PREV = { add_to_trade_modifier_PREV = yes }
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_boosting_american_influence_in_sa }
		add_political_power = 40
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_boosting_UDN_in_senate_elections }
		hidden_effect = {
			BRA = {
				random_list = {
					1 = {
						BRA_boost_UDN_candidates_acre_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_alagoas_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_amazonas_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_bahia_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_ceara_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_espirito_santo_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_goias_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_guanabara_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_maranhao_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_mato_grosso_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_minas_gerais_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_para_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_paraiba_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_parana_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_pernambuco_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_piaui_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_rio_de_janeiro_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_rio_grande_do_norte_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_rio_grande_do_sul_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_santa_catarina_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_sao_paulo_high = yes
					}
					1 = {
						BRA_boost_UDN_candidates_sergipe_high = yes
					}
				}
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_raising_lott_influence }
		BRA = {
			BRA_lottquadros_regular_increase_lott_influence = yes
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_raising_quadros_influence }
		BRA = {
			BRA_lottquadros_regular_increase_quadros_influence = yes
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_ensuring_lacerda_get_nominated }
		BRA = {
			set_country_flag = BRA_CIA_helped_Lacerda_for_nomination
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_BRA_ensure_lacerda_win_hundred_days }
		BRA = {
			BRA_hd_increase_lacerda_support_med = yes
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_boosting_lacerda_in_presidential_election }
		hidden_effect = {
			BRA = {
				add_to_variable = { BRA_pres_support^1 = 5 }
				add_to_variable = { BRA_pres_support^4 = 5 }
				add_to_variable = { BRA_pres_support^7 = 5 }
				add_to_variable = { BRA_pres_support^10 = 5 }
				add_to_variable = { BRA_pres_support^13 = 5 }
				add_to_variable = { BRA_pres_support^16 = 5 }
				add_to_variable = { BRA_pres_support^19 = 5 }
				add_to_variable = { BRA_pres_support^22 = 5 }
				add_to_variable = { BRA_pres_support^25 = 5 }
				BRA_redraw_pres_info = yes
				BRA_pres_select_region = yes
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_boosting_kubitschek_in_presidential_election }
		hidden_effect = {
			BRA = {
				add_to_variable = { BRA_pres_support^0 = 5 }
				add_to_variable = { BRA_pres_support^3 = 5 }
				add_to_variable = { BRA_pres_support^6 = 5 }
				add_to_variable = { BRA_pres_support^9 = 5 }
				add_to_variable = { BRA_pres_support^12 = 5 }
				add_to_variable = { BRA_pres_support^15 = 5 }
				add_to_variable = { BRA_pres_support^18 = 5 }
				add_to_variable = { BRA_pres_support^21 = 5 }
				add_to_variable = { BRA_pres_support^24 = 5 }
				BRA_redraw_pres_info = yes
				BRA_pres_select_region = yes
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_boosting_adhemar_in_presidential_election }
		hidden_effect = {
			BRA = {
				add_to_variable = { BRA_pres_support^2 = 5 }
				add_to_variable = { BRA_pres_support^5 = 5 }
				add_to_variable = { BRA_pres_support^8 = 5 }
				add_to_variable = { BRA_pres_support^11 = 5 }
				add_to_variable = { BRA_pres_support^14 = 5 }
				add_to_variable = { BRA_pres_support^17 = 5 }
				add_to_variable = { BRA_pres_support^20 = 5 }
				add_to_variable = { BRA_pres_support^23 = 5 }
				add_to_variable = { BRA_pres_support^26 = 5 }
				BRA_redraw_pres_info = yes
				BRA_pres_select_region = yes
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_increasing_brazilian_military_loyalty }
		hidden_effect = {
			BRA = {
				BRA_military_increase_loyalty_med = yes
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_decreasing_brazilian_military_loyalty }
		hidden_effect = {
			BRA = {
				BRA_military_decrease_loyalty_med = yes
			}
		}
	}

	####################################################
	##### EASTERN ASIA
	####################################################

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_ea }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^3 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^3 = 1 } }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_destabilize_japan_flag }
		JAP = { country_event = { id = USA_CIA_JAP.1 } }
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_fund_korean_resistance_flag }
		JAP = { country_event = { id = USA_CIA_JAP.2 } }
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_fund_vladivostok_resistance_flag }
		JAP = { country_event = { id = USA_CIA_JAP.3 } }
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_fund_chinese_resistance_flag }
		JAP = { country_event = { id = USA_CIA_JAP.4 } }
	}
	else_if = {
		limit = { has_country_flag = USA_CIA_fund_hawaii_resistance_flag }
		JAP = { country_event = { id = USA_CIA_JAP.5 } }
	}

	####################################################
	##### SOUTH EASTERN ASIA
	####################################################

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_sea }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^8 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^8 = 1 } }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_buff_fri_flag }
		FRI = { country_event = { id = USA_CIA_ICW.1 } }
		every_country = {
			limit = { is_in_faction_with = FRI }
			country_event = { id = USA_CIA_ICW.1 }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_debuff_ins_flag }
		INS = { country_event = { id = USA_CIA_ICW.2 } }
		every_country = {
			limit = { is_in_faction_with = INS }
			country_event = { id = USA_CIA_ICW.2 }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_strike_ins_flag }
		INS = { country_event = { id = USA_CIA_ICW.3 } }
		every_country = {
			limit = { is_in_faction_with = INS }
			country_event = { id = USA_CIA_ICW.3 }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_influence_malaya }
		if = {
			limit = { check_variable = { TNO_razak_election_weight = 0 } }
			USA = { country_event = { id = USA_CIA_MLY.1 } }
		}
		else_if = {
			limit = { check_variable = { TNO_razak_election_weight = 1 } }
			USA = { country_event = { id = USA_CIA_MLY.2 } }
		}
		else_if = {
			limit = { check_variable = { TNO_razak_election_weight = 2 } }
			USA = { country_event = { id = USA_CIA_MLY.3 } }
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_USAFIP_Operations_Domino_USAFIP }
		USA = { country_event = { id = USA_CIA_MLY.4 } }
		send_equipment = {
			equipment = infantry_equipment
			amount = 1000
			target = UPH
		}
		UPH = {
			add_timed_idea = {
				idea = UPH_The_Second_Domino
				days = 860
			}
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_Operations_Domino_FRI }
		USA = { country_event = { id = USA_CIA_MLY.5 } }
		send_equipment = {
			equipment = infantry_equipment
			amount = 1500
			target = FRI
		}
		send_equipment = {
			equipment = support_equipment
			amount = 1000
			target = FRI
		}
		FRI = {
			set_country_flag = FRI_have_supply_lines
		}
	}

	else_if = {
		limit = { has_country_flag = USA_CIA_Operations_Domino_MLY }
		USA = { country_event = { id = USA_CIA_MLY.6 } }
		add_political_power = 70
	}

	####################################################
	##### AFRICA
	####################################################

	else_if = {
		limit = { has_country_flag = USA_CIA_damaging_ger_encryption_af }
		hidden_effect = {
			if = {
				limit = { AND = { has_country_flag = USA_CIA_tech_8_researched } }
				add_to_variable = { GER.GER_Regional_Encryption^0 = 5 }
			}
			else = { add_to_variable = { GER.GER_Regional_Encryption^0 = 1 } }
		}
	}

	else = {
		log = "[GetDateText]: [Root.GetName]: ERROR USA_CIA_Rewards_Calculation finished without checking flag"
	}

	USA_CIA_Clear_Mission_Flags = yes
}


USA_CIA_Clear_Mission_Flags = {

	####################################################
	##### MIDDLE EAST
	####################################################

	# Israel
	clr_country_flag = USA_CIA_Contacting_Israeli_Paramilitaries_Flag

	# Ger encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_me

	####################################################
	##### EUROPE
	####################################################

	# Ger Encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_eu

	# Ireland
	clr_country_flag = USA_CIA_Fucking_Irish_Politics_Flag

	# OCW
	clr_country_flag = USA_CIA_OCW_send_landrut_rifles_flag

	# GGN
	clr_country_flag = USA_CIA_GGN_send_help_to_the_underground_flag

	# SER
	clr_country_flag = USA_CIA_SER_send_rifles_to_the_insurrection_flag

	# England
	clr_country_flag = USA_CIA_ENG_find_out_politics_flag
	clr_country_flag = USA_CIA_ENG_increase_military_loyalty_flag
	clr_country_flag = USA_CIA_ENG_decrease_military_loyalty_flag
	clr_country_flag = USA_CIA_ENG_slp_reduce_hardliners_flag
	clr_country_flag = USA_CIA_ENG_slp_increase_reform_flag
	clr_country_flag = USA_CIA_ENG_slp_increase_reformists_flag
	clr_country_flag = USA_CIA_ENG_ndl_decrease_liberals_flag
	clr_country_flag = USA_CIA_ENG_ndl_decrease_patriots_flag
	clr_country_flag = USA_CIA_ENG_ndl_increase_moderates_flag
	clr_country_flag = USA_CIA_ENG_mac_increase_macmillan_flag
	clr_country_flag = USA_CIA_ENG_mac_increase_liberals_flag
	clr_country_flag = USA_CIA_ENG_mac_increase_democratization_flag
	clr_country_flag = USA_CIA_ENG_thatcher_party_influence_flag
	clr_country_flag = USA_CIA_ENG_thatcher_populist_support_flag
	clr_country_flag = USA_CIA_ENG_thatcher_elite_support_flag

	# IBR
	clr_country_flag = USA_CIA_Iberia_Franco_Allign
	clr_country_flag = USA_CIA_Iberia_Salazar_Allign
	clr_country_flag = USA_CIA_Add_AAS_Resources
	clr_country_flag = USA_CIA_Reduce_Iberia_Terrorism
	clr_country_flag = USA_CIA_Stabilize_Iberia
	clr_country_flag = USA_CIA_Reform_Iberia
	clr_country_flag = USA_CIA_Iberian_Wars

	### Germany

	# Speer GCW

	clr_country_flag = USA_speer_radio_address_flag
	clr_country_flag = USA_speer_send_weapons_flag
	clr_country_flag = USA_speer_support_internationally_flag
	clr_country_flag = USA_speer_send_fighters_flag

	# SGR

	clr_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_early_flag
	clr_country_flag = USA_CIA_GER_SGR_boost_reformers_early_flag
	clr_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_early_flag
	clr_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_middle_flag
	clr_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_middle_flag
	clr_country_flag = USA_CIA_GER_SGR_boost_reformers_middle_flag
	clr_country_flag = USA_CIA_GER_SGR_weaken_reactionaries_late_flag
	clr_country_flag = USA_CIA_GER_SGR_buff_regime_leaning_late_flag
	clr_country_flag = USA_CIA_GER_SGR_boost_reformers_late_flag
	clr_country_flag = USA_CIA_GER_SGR_sabotage_repatriation_efforts_flag
	clr_country_flag = USA_CIA_GER_SGR_sabotage_infrastructure_flag

	# BOR

	clr_country_flag = USA_CIA_GER_BOR_political_sabotage_flag
	clr_country_flag = USA_CIA_GER_BOR_political_sabotage_major_flag
	clr_country_flag = USA_CIA_GER_BOR_economic_sabotage_initial_flag
	clr_country_flag = USA_CIA_GER_BOR_economic_sabotage_second_flag
	clr_country_flag = USA_CIA_GER_BOR_economic_sabotage_infrastructure_flag
	clr_country_flag = USA_CIA_GER_BOR_economic_sabotage_infrastructure_second_flag
	clr_country_flag = USA_CIA_GER_BOR_economic_sabotage_combined_flag
	clr_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_flag
	clr_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_2_flag
	clr_country_flag = USA_CIA_GER_BOR_fuck_with_dismantlement_2_flag
	clr_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_2_people_flag
	clr_country_flag = USA_CIA_GER_BOR_fuck_with_anti_reformist_dismantlement_2_banks_flag

	####################################################
	##### RUSSIA
	####################################################
	# Unification Ops
	clr_country_flag = CIA_USA_Unification_Enemy_Intel_operation
	clr_country_flag = CIA_USA_Unification_Sabotage_operation

	# Common Ops
	clr_country_flag = CIA_USA_RUS_Establishing_Safehouses

	# Ger Encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_ru

	# Meddling in politics
	clr_country_flag = CIA_USA_WRRF_GRAND_MARSHALL
	clr_country_flag = CIA_USA_Komi_politics
	clr_country_flag = CIA_USA_Vyatka_politics

	# Magadan
	clr_country_flag = CIA_USA_Magadan_Increasing_Presence
	clr_country_flag = CIA_USA_Magadan_Supporting_Reformists

	# Buryatia
	clr_country_flag = USA_CIA_BRY_strengthen_bukharinist_wing_industry_flag
	clr_country_flag = USA_CIA_BRY_strengthen_bukharinist_wing_politics_flag

	# Irkutsk
	clr_country_flag = USA_CIA_IRK_strengthen_party_wing_industry_flag
	clr_country_flag = USA_CIA_IRK_strengthen_party_wing_politics_flag

	# Novosibirsk
	clr_country_flag = USA_CIA_aligning_novosibirsk
	clr_country_flag = USA_CIA_disaligning_novosibirsk
	clr_country_flag = USA_CIA_invest_in_novosibirsk


	####################################################
	##### OCEANIA
	####################################################

	# Ger Encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_au

	####################################################
	##### NORTH AMERICA
	####################################################

	# Ger Encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_na

	#USA
	clr_country_flag = USA_CIA_damage_republicans
	clr_country_flag = USA_CIA_damage_democrats
	clr_country_flag = USA_CIA_damage_center
	clr_country_flag = USA_CIA_damage_right
	clr_country_flag = USA_CIA_damage_left
	clr_country_flag = USA_CIA_damage_yockey

	####################################################
	##### CENTRAL AMERICA
	####################################################

	clr_country_flag = USA_CIA_boosting_trade_influence_in_ca
	clr_country_flag = USA_CIA_boosting_american_influence_in_ca

	# Ger Encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_ca

	####################################################
	##### SOUTH AMERICA
	####################################################

	# Ger Encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_sa
	clr_country_flag = USA_CIA_boosting_trade_influence_in_sa
	clr_country_flag = USA_CIA_boosting_american_influence_in_sa

	# BRA
	clr_country_flag = USA_CIA_boosting_UDN_in_senate_elections
	clr_country_flag = USA_CIA_raising_lott_influence
	clr_country_flag = USA_CIA_raising_quadros_influence
	clr_country_flag = USA_CIA_ensuring_lacerda_get_nominated
	clr_country_flag = USA_CIA_ensuring_lacerda_win_hundred_days
	clr_country_flag = USA_CIA_boosting_lacerda_in_presidential_election
	clr_country_flag = USA_CIA_boosting_kubitschek_in_presidential_election
	clr_country_flag = USA_CIA_boosting_adhemar_in_presidential_election
	clr_country_flag = USA_CIA_increasing_brazilian_military_loyalty
	clr_country_flag = USA_CIA_decreasing_brazilian_military_loyalty

	####################################################
	##### EASTERN ASIA
	####################################################

	# JAP
	clr_country_flag = USA_CIA_destabilize_japan_flag
	clr_country_flag = USA_CIA_fund_korean_resistance_flag
	clr_country_flag = USA_CIA_fund_vladivostok_resistance_flag
	clr_country_flag = USA_CIA_fund_chinese_resistance_flag
	clr_country_flag = USA_CIA_fund_hawaii_resistance_flag

	# Ger Encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_ea

	####################################################
	##### SOUTH EASTERN ASIA
	####################################################

	# ICW
	clr_country_flag = USA_CIA_buff_fri_flag
	clr_country_flag = USA_CIA_debuff_ins_flag
	clr_country_flag = USA_CIA_strike_ins_flag
	clr_country_flag = USA_CIA_supporting_razak
	clr_country_flag = USA_CIA_USAFIP_Operations_Domino_USAFIP
	clr_country_flag = USA_CIA_Operations_Domino_FRI
	clr_country_flag = USA_CIA_Operations_Domino_MLY

	#Malaya
	clr_country_flag = USA_CIA_influence_malaya

	# Ger Encryption
	clr_country_flag = USA_CIA_damaging_ger_encryption_sea

	####################################################
	##### AFRICA
	####################################################

	clr_country_flag = USA_CIA_damaging_ger_encryption_af
}




#Clean up effect, always use this after you've done CIA stuff
USA_CIA_clean_up = {
	clear_variable = USA_CIA_initialize_calculate_success_chance
	clear_variable = USA_CIA_encryption_impact
	clear_variable = USA_CIA_target_country
	clr_country_flag = USA_CIA_successful_mission
}

























#	#For calculating initial success chance of a mission
#
USA_CIA_initialize_calculate_success_chance = {
	set_variable = { USA_CIA_Operation_Success_Chance = 50 }

	#### ENCRYPTION VS DECRYPTION

	set_variable = { USA_CIA_Targeted_Region_Encyrption = 0 }

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_Africa }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^0 }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_Europe }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^1 }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_Russia }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_CIA_Russian_Encryption }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_Australia }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^2 }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_East_Asia }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^3 }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_Middle_East }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^4 }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_North_America }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^7 }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_South_America }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^6 }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_Central_America }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^5 }
	}

	if = {
		limit = { has_country_flag = USA_CIA_Viewing_South_East_Asia }
		set_variable = { USA_CIA_Targeted_Region_Encyrption = USA_Regional_Encryption^8 }
	}

	set_variable = { USA_CIA_Encryp_Decryp_Expertise_Bonus = USA_CIA_expertise }

	clamp_variable = {
		var = USA_CIA_Encryp_Decryp_Expertise_Bonus
		min = -150
		max = 150
	}

	divide_variable = { USA_CIA_Encryp_Decryp_Expertise_Bonus = 25 }

	round_variable = USA_CIA_Encryp_Decryp_Expertise_Bonus

	subtract_from_variable = { USA_CIA_Targeted_Region_Encyrption = USA_CIA_Encryp_Decryp_Expertise_Bonus }

	clamp_variable = {
		var = USA_CIA_Targeted_Region_Encyrption
		min = -20
		max = 20
	}

	set_variable = { USA_CIA_Decyption_Calc_Chance_Placeholder = USA_CIA_Decryption }

	subtract_from_variable = { USA_CIA_Decyption_Calc_Chance_Placeholder = USA_CIA_Targeted_Region_Encyrption }

	clamp_variable = {
		var = USA_CIA_Decyption_Calc_Chance_Placeholder
		min = -20
		max = 20
	}

	add_to_variable = { USA_CIA_Operation_Success_Chance = USA_CIA_Decyption_Calc_Chance_Placeholder }

	#Research bonus
	add_to_variable = { USA_CIA_Operation_Success_Chance = USA_CIA_success_chance_research_bonus }

	clamp_variable = {
		var = USA_CIA_Operation_Success_Chance
		max = 100
	}
}

#For ensuring everything Expertise is used for updates correctly

USA_CIA_increase_expertise_1 = {
	custom_effect_tooltip = USA_CIA_add_1_expertise
	add_to_variable = { USA_CIA_expertise = 1 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_3 = {
	custom_effect_tooltip = USA_CIA_add_3_expertise
	add_to_variable = { USA_CIA_expertise = 3 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_5 = {
	custom_effect_tooltip = USA_CIA_add_5_expertise
	add_to_variable = { USA_CIA_expertise = 5 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_8 = {
	custom_effect_tooltip = USA_CIA_add_8_expertise
	add_to_variable = { USA_CIA_expertise = 8 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_10 = {
	custom_effect_tooltip = USA_CIA_add_10_expertise
	add_to_variable = { USA_CIA_expertise = 10 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_15 = {
	custom_effect_tooltip = USA_CIA_add_15_expertise
	add_to_variable = { USA_CIA_expertise = 15 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_25 = {
	custom_effect_tooltip = USA_CIA_add_25_expertise
	add_to_variable = { USA_CIA_expertise = 25 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_40 = {
	custom_effect_tooltip = USA_CIA_add_40_expertise
	add_to_variable = { USA_CIA_expertise = 40 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_50 = {
	custom_effect_tooltip = USA_CIA_add_50_expertise
	add_to_variable = { USA_CIA_expertise = 50 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_increase_expertise_60 = {
	custom_effect_tooltip = USA_CIA_add_60_expertise
	add_to_variable = { USA_CIA_expertise = 60 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_decrease_expertise_1 = {
	custom_effect_tooltip = USA_CIA_remove_1_expertise
	subtract_from_variable = { USA_CIA_expertise = 1 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_decrease_expertise_3 = {
	custom_effect_tooltip = USA_CIA_remove_3_expertise
	subtract_from_variable = { USA_CIA_expertise = 3 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_decrease_expertise_5 = {
	custom_effect_tooltip = USA_CIA_remove_5_expertise
	subtract_from_variable = { USA_CIA_expertise = 5 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_decrease_expertise_10 = {
	custom_effect_tooltip = USA_CIA_remove_10_expertise
	subtract_from_variable = { USA_CIA_expertise = 10 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_decrease_expertise_25 = {
	custom_effect_tooltip = USA_CIA_remove_25_expertise
	subtract_from_variable = { USA_CIA_expertise = 25 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_decrease_expertise_40 = {
	custom_effect_tooltip = USA_CIA_remove_40_expertise
	subtract_from_variable = { USA_CIA_expertise = 40 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_decrease_expertise_50 = {
	custom_effect_tooltip = USA_CIA_remove_50_expertise
	subtract_from_variable = { USA_CIA_expertise = 50 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_decrease_expertise_60 = {
	custom_effect_tooltip = USA_CIA_remove_60_expertise
	subtract_from_variable = { USA_CIA_expertise = 60 }
	clamp_variable = {
		var = USA_CIA_expertise
		min = -150
		max = 150
	}
	USA_CIA_calculate_expertise_vars = yes
}

USA_CIA_calculate_expertise_vars = {
	#set_temp_variable = { USA_CIA_expertise_research_impact = USA_CIA_expertise }
	#divide_temp_variable = { USA_CIA_expertise_research_impact = 10 }
	#set_variable = { USA_CIA_research_growth = USA_CIA_base_research_growth }
	#add_to_variable = { USA_CIA_research_growth = USA_CIA_expertise_research_impact }
	#set_variable = { USA_CIA_training_time = 150 }
	#subtract_from_variable = { USA_CIA_training_time = USA_CIA_expertise }
}



USA_CIA_Clamp_Regional_Encryption = {
	clamp_variable = { var = USA_Regional_Encryption^0 min = 0 max = 20 }
	clamp_variable = { var = USA_Regional_Encryption^1 min = 0 max = 20 }
	clamp_variable = { var = USA_Regional_Encryption^2 min = 0 max = 20 }
	clamp_variable = { var = USA_Regional_Encryption^3 min = 0 max = 20 }
	clamp_variable = { var = USA_Regional_Encryption^4 min = 0 max = 20 }
	clamp_variable = { var = USA_Regional_Encryption^5 min = 0 max = 20 }
	clamp_variable = { var = USA_Regional_Encryption^6 min = 0 max = 20 }
	clamp_variable = { var = USA_Regional_Encryption^7 min = 0 max = 20 }
	clamp_variable = { var = USA_Regional_Encryption^8 min = 0 max = 20 }
}

USA_CIA_recruitment_pulse = {
	if = {
		limit = { has_country_flag = USA_CIA_currently_recruiting }
		add_to_variable = { USA_CIA_recruit_progress = 10 }
		if = {
			limit = { check_variable = { USA_CIA_recruit_progress > 90 } }
			clr_country_flag = USA_CIA_currently_recruiting
			country_event = { id = USA_CIA.7 }
			set_variable = { USA_CIA_recruit_progress = 0 }
		}
	}
}

#####Research

@CIA_BASE_RESEARCH_GROWTH = 2.5


USA_CIA_clr_research_flags = {
	clr_country_flag = USA_CIA_research_picked
	clr_country_flag = USA_CIA_tech_1_research
	clr_country_flag = USA_CIA_tech_2_research
	clr_country_flag = USA_CIA_tech_3_research
	clr_country_flag = USA_CIA_tech_4_research
	clr_country_flag = USA_CIA_tech_5_research
	clr_country_flag = USA_CIA_tech_6_research
	clr_country_flag = USA_CIA_tech_7_research
	clr_country_flag = USA_CIA_tech_8_research
	clr_country_flag = USA_CIA_tech_9_research
	clr_country_flag = USA_CIA_tech_10_research
}


USA_CIA_tech_1_research = {
	USA_CIA_clr_research_flags = yes
	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}

	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_1_research
	set_variable = {USA_CIA_tech_cost = 100}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_2_research = {
	USA_CIA_clr_research_flags = yes

	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_2_research
	set_variable = {USA_CIA_tech_cost = 75}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_3_research = {
	USA_CIA_clr_research_flags = yes

	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_3_research
	set_variable = {USA_CIA_tech_cost = 150}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_4_research = {
	USA_CIA_clr_research_flags = yes
	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_4_research
	set_variable = {USA_CIA_tech_cost = 25}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_5_research = {
	USA_CIA_clr_research_flags = yes
	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_5_research
	set_variable = {USA_CIA_tech_cost = 50}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_6_research = {
	USA_CIA_clr_research_flags = yes
	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_6_research
	set_variable = {USA_CIA_tech_cost = 30}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_7_research = {
	USA_CIA_clr_research_flags = yes
	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_7_research
	set_variable = {USA_CIA_tech_cost = 60}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_8_research = {
	USA_CIA_clr_research_flags = yes
	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_8_research
	set_variable = {USA_CIA_tech_cost = 20}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_9_research = {
	USA_CIA_clr_research_flags = yes

	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_9_research
	set_variable = {USA_CIA_tech_cost = 50}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}
USA_CIA_tech_10_research = {
	USA_CIA_clr_research_flags = yes
	set_variable = { USA_CIA_research_progress = 0 }
	set_variable = {USA_CIA_research_speed_display = 0}
	set_country_flag = USA_CIA_research_picked
	set_country_flag = USA_CIA_tech_10_research
	set_variable = {USA_CIA_tech_cost = 30}
	country_event = {
		id = USA_CIA.10001
		days = 7
	}
}

USA_CIA_research_progress = { #every 7 days

	#Base research growth
	set_temp_variable = {tempTechProg = @CIA_BASE_RESEARCH_GROWTH}

	#Addition from budget
	set_temp_variable = {tempBudget = USA_CIA_Budget}
	multiply_temp_variable = {tempBudget = 0.002}
	add_to_temp_variable = {tempTechProg = tempBudget}

	#Addition from Expertise
	#set_temp_variable = {tempExpertise = CIA_training_lvl}
	#multiply_temp_variable = {tempExpertise = 0.02}
	#add_to_temp_variable = {tempTechProg = tempExpertise}

	##Further boni that can be gained
	#add_to_temp_variable = {tempTechProg = USA_CIA_research_boni}

	#Making sure it doesn't get too big
	clamp_temp_variable = {
		var = tempTechProg
		min = 0
		max = 10
	}

	#Addition to the progress var
	add_to_variable = {USA_CIA_research_progress = tempTechProg}

	set_variable = {USA_CIA_research_speed_display = tempTechProg}

	clamp_variable = {
		var = USA_CIA_research_progress
		min = 0
		max = USA_CIA_tech_cost
	}

	#Calculating how long research is gonna take anymore

	set_temp_variable = { tempProgress = USA_CIA_research_progress }
	set_temp_variable = { tempCost = USA_CIA_tech_cost }

	divide_temp_variable = { tempProgress = tempCost }

	set_variable = { USA_CIA_research_progress_percentage = tempProgress }
	set_variable = { USA_CIA_research_progress_big_percentage = tempProgress }
	multiply_variable = { USA_CIA_research_progress_big_percentage = 100 }

	if = {
		limit = {
			NOT = { check_variable = { USA_CIA_research_progress = USA_CIA_tech_cost } }
		}
		country_event = {
			id = USA_CIA.10001
			days = 7
		}
	}
	else_if = {
		limit = {
			check_variable = { USA_CIA_research_progress = USA_CIA_tech_cost }
		}
		USA_CIA_TECH_check_tech_bonus = yes
		USA_CIA_TECH_clear_flags = yes
		set_variable = { USA_CIA_research_progress = 0 }
		clear_variable = USA_CIA_research_progress_percentage
		set_variable = { USA_CIA_research_progress_big_percentage = 0 }
	}
}

USA_CIA_TECH_check_tech_bonus = {
	if = {
		limit = {
			has_country_flag = USA_CIA_tech_1_research
		}
		add_to_variable = {USA_CIA_Decryption = 1}
		add_to_variable = {USA_CIA_success_chance_research_bonus = 2}
		set_country_flag = USA_CIA_tech_1_researched
		set_country_flag = USA_CIA_tech_1_researched_display
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_2_research
		}
		add_to_variable = {USA_CIA_Decryption = 2}
		set_country_flag = USA_CIA_tech_2_researched
		set_country_flag = USA_CIA_tech_2_researched_display
		hidden_effect = {
			add_ideas = USA_CIA_tech_2_bonus
		}
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_3_research
		}
		#Encrypt better against others
		add_to_variable = {USA_CIA_escape_chance = 5}
		add_to_variable = {USA_CIA_success_chance_research_bonus = 1}
		set_country_flag = USA_CIA_tech_3_researched
		set_country_flag = USA_CIA_tech_3_researched_display
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_4_research
		}
		add_to_variable = {USA_CIA_Decryption = 1}
		add_to_variable = {USA_CIA_success_chance_research_bonus = 2}
		add_to_variable = {USA_CIA_research_boni = 2}
		set_country_flag = USA_CIA_tech_4_researched
		set_country_flag = USA_CIA_tech_4_researched_display
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_5_research
		}
		add_to_variable = {USA_CIA_escape_chance = 5}
		add_to_variable = {USA_CIA_success_chance_research_bonus = 2}
		set_country_flag = USA_CIA_tech_5_researched
		set_country_flag = USA_CIA_tech_5_researched_display
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_6_research
		}
		add_to_variable = {USA_CIA_success_chance_research_bonus = 2}
		#Also reduces expertise lost from faiure (check for this being researched is done in the failure event)
		add_to_variable = {USA_CIA_research_boni = 1}
		set_country_flag = USA_CIA_tech_6_researched
		set_country_flag = USA_CIA_tech_6_researched_display
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_7_research
		}
		#Aids encrytpion reduction -> Really needs an expansion in the future, currently it only gives bonuses to the safehouse missions. -Oveja
		#Also reduces expertise lost from faiure (check for this being researched is done in the failure event)
		set_country_flag = USA_CIA_tech_7_researched
		set_country_flag = USA_CIA_tech_7_researched_display
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_8_research
		}
		add_to_variable = {USA_CIA_escape_chance = 5}
		#Encrypt better against others
		add_to_variable = {USA_CIA_success_chance_research_bonus = 2}
		set_country_flag = USA_CIA_tech_8_researched
		set_country_flag = USA_CIA_tech_8_researched_display
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_9_research
		}
		add_to_variable = {USA_CIA_Decryption = 2}
		hidden_effect = {
			add_ideas = USA_CIA_tech_9_bonus
		}
		set_country_flag = USA_CIA_tech_9_researched
		set_country_flag = USA_CIA_tech_9_researched_display
	}
	else_if = {
		limit = {
			has_country_flag = USA_CIA_tech_10_research
		}
		add_to_variable = {USA_CIA_success_chance_research_bonus = 2}
		#Encrypt better against others
		#Also increase expertise gained from success (check for this being researched is done in the success event)
		set_country_flag = USA_CIA_tech_10_researched
		set_country_flag = USA_CIA_tech_10_researched_display
	}
	set_country_flag = USA_CIA_Tech_Completed_Window_Open
	scoped_sound_effect = "research_complete"
}

USA_CIA_TECH_clear_flags = {
	clr_country_flag = USA_CIA_research_picked
	clr_country_flag = USA_CIA_tech_1_research
	clr_country_flag = USA_CIA_tech_2_research
	clr_country_flag = USA_CIA_tech_3_research
	clr_country_flag = USA_CIA_tech_4_research
	clr_country_flag = USA_CIA_tech_5_research
	clr_country_flag = USA_CIA_tech_6_research
	clr_country_flag = USA_CIA_tech_7_research
	clr_country_flag = USA_CIA_tech_8_research
	clr_country_flag = USA_CIA_tech_9_research
	clr_country_flag = USA_CIA_tech_10_research
}

USA_CIA_remove_display_flags = {
	clr_country_flag = USA_CIA_tech_1_researched_display
	clr_country_flag = USA_CIA_tech_2_researched_display
	clr_country_flag = USA_CIA_tech_3_researched_display
	clr_country_flag = USA_CIA_tech_4_researched_display
	clr_country_flag = USA_CIA_tech_5_researched_display
	clr_country_flag = USA_CIA_tech_6_researched_display
	clr_country_flag = USA_CIA_tech_7_researched_display
	clr_country_flag = USA_CIA_tech_8_researched_display
	clr_country_flag = USA_CIA_tech_9_researched_display
	clr_country_flag = USA_CIA_tech_10_researched_display
}

#######################################################################################################################
#######################################################################################################################
#######################################################################################################################
#######################################################################################################################
#######              _____     _____            _                                                           	#######
#######       /\    |_   _|   / ____|          | |                                                          	#######
#######      /  \     | |    | |      ___    __| |  ___                                                     	#######
#######     / /\ \    | |    | |     / _ \  / _` | / _ \                                                    	#######
#######    / ____ \  _| |_   | |____| (_) || (_| ||  __/                                                    	#######
#######   /_/    \_\|_____|   \_____|\___/  \__,_| \___|                                                    	#######
#######           _                        _                  _                                             	#######
#######          | |                      | |                | |                                            	#######
#######     __ _ | |__    __ _  _ __    __| |  ___   _ __    | |__    ___   _ __    ___                     	#######
#######    / _` || '_ \  / _` || '_ \  / _` | / _ \ | '_ \   | '_ \  / _ \ | '_ \  / _ \                    	#######
#######   | (_| || |_) || (_| || | | || (_| || (_) || | | |  | | | || (_) || |_) ||  __/                    	#######
#######    \__,_||_.__/  \__,_||_| |_| \__,_| \___/ |_| |_|  |_| |_| \___/ | .__/  \___|                    	#######
#######           _  _              _                            _         | |     _                        	#######
#######          | || |            | |                          | |        |_|    | |                       	#######
#######     __ _ | || |  __      __| |__    ___      ___  _ __  | |_  ___  _ __   | |__    ___  _ __  ___   	#######
#######    / _` || || |  \ \ /\ / /| '_ \  / _ \    / _ \| '_ \ | __|/ _ \| '__|  | '_ \  / _ \| '__|/ _ \  	#######
#######   | (_| || || |   \ V  V / | | | || (_) |  |  __/| | | || |_|  __/| |     | | | ||  __/| |  |  __/  	#######
#######    \__,_||_||_|    \_/\_/  |_| |_| \___/    \___||_| |_| \__|\___||_|     |_| |_| \___||_|   \___|  	#######
#######																											#######
#######		- by Fedacking		- in memorial Lazergaz															#######
#######################################################################################################################
#######################################################################################################################
#######################################################################################################################
#######################################################################################################################


USA_CIA_AI_startup_flags = {
	if = {
		limit = { is_ai = yes }

		## Always change by 100 the budget
		set_variable = { USA_CIA_Budget_Change_Variable = 0.100 }

		##############
		### Europe ###
		##############
		random_list = {
			100 = {
				set_country_flag = CIA_AI_EUROPE_WILL_DO_FLAG
				set_country_flag = USA_CIA_Viewing_Europe # Visibility Flag
				set_country_flag = USA_CIA_Europe_Unlocked # Unlocked Flag
				add_to_variable = { national_debt = 0.03 } # The Ai Doesn't cheat, it pays for the unlock #already converted to billion

				#Ireland
				random_list = {
					30 = { set_country_flag = CIA_AI_EUROPE_IRE_WILL_DO_FLAG }
					70 = { } # Imagine caring about a little shitty island
				}
				### England
				random_list = {
					90 = { set_country_flag = CIA_AI_EUROPE_FEN_WILL_DO_FLAG }
					10 = { } # "special relationship" lmao
				}
				random_list = {
					60 = { set_country_flag = CIA_AI_EUROPE_ENG_POST_WAR_WILL_DO_FLAG }
					40 = { } # They can manage their internal affairs
				}
				### Iberia
				random_list = {
					50 = {
						set_country_flag = CIA_AI_EUROPE_IBR_WILL_DO_FLAG

						# Which Caudilio do we like more?
						random_list = {
							50 = { set_country_flag = CIA_AI_EUROPE_IBR_SALAZAR }
							50 = { set_country_flag = CIA_AI_EUROPE_IBR_FRANCO }
						}
					}
					50 = { } #Surely the place is to stable to bother with right?
				}

				random_list = {
					50 = { set_country_flag = CIA_AI_EUROPE_GER_WILL_DO_FLAG }
					50 = { } #Lets ignore the Krauts
				}

				### Serbia
				random_list = {
					30 = { set_country_flag = CIA_AI_EUROPE_SERBIA_WILL_DO_FLAG }
					70 = { } # Rip Serbia
				}

				### Norway
				random_list = {
					30 = { set_country_flag = CIA_AI_EUROPE_NORWAY_WILL_DO_FLAG }
					70 = { } # Rip Serbia
				}

				### Poland
				random_list = {
					30 = { set_country_flag = CIA_AI_EUROPE_POLAND_WILL_DO_FLAG }
					70 = { } # Rip Serbia
				}
			}
			0 = {
				#no Europe
			}
		}

		##############
		### Africa ###
		##############
		random_list = {
			90 = {
				set_country_flag = CIA_AI_AFRICA_WILL_DO_FLAG
				set_country_flag = USA_CIA_Viewing_Africa # Visibility Flag
				set_country_flag = USA_CIA_Africa_Unlocked # Unlocked Flag
				add_to_variable = { national_debt = 0.03 } # The Ai Doesn't cheat, it pays for the unlock #already converted to billion
			}
			10 = {
				#no Africa
			}
		}

		##############
		### Russia ###
		##############
		random_list = {
			60 = {
				set_country_flag = CIA_AI_RUSSIA_WILL_DO_FLAG
				set_country_flag = USA_CIA_Viewing_Russia # Visibility Flag
				set_country_flag = USA_CIA_Russia_Unlocked # Unlocked Flag
				add_to_variable = { national_debt = 0.03 } # The Ai Doesn't cheat, it pays for the unlock #already converted to billion
			}
			40 = {
				#no Russia
			}
		}

		##############################
		#### South East Asia Asia ####
		##############################
		random_list = {
			35 = {
				set_country_flag = CIA_AI_SEA_WILL_DO_FLAG
				set_country_flag = USA_CIA_South_East_Asia_Unlocked # Visibility Flag
				set_country_flag = USA_CIA_South_East_Asia_Unlocked # Unlocked Flag
				add_to_variable = { national_debt = 0.03 } # The Ai Doesn't cheat, it pays for the unlock #already converted to billion
			}
			65 = {
				#no SEA
			}
		}

		########################
		#### East Asia Asia ####
		#########################
		random_list = {
			30 = {
				set_country_flag = CIA_AI_EA_WILL_DO_FLAG
				set_country_flag = USA_CIA_Viewing_East_Asia # Visibility Flag
				set_country_flag = USA_CIA_East_Asia_Unlocked # Unlocked Flag
				add_to_variable = { national_debt = 0.03 } # The Ai Doesn't cheat, it pays for the unlock #already converted to billion
			}
			70 = {
				#no EA
			}
		}
	}
}
