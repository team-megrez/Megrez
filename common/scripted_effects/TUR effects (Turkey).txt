#requires a temp variable TUR_resistance_change
TUR_modify_traditionalist_resistance = {
	# convert percent to absolute
	if = {
		limit = {
			check_variable = { TUR_resistance_change > -1 }
			check_variable = { TUR_resistance_change < 1 }
		}
		multiply_temp_variable = { TUR_resistance_change = 100 }
	}
	round_temp_variable = TUR_resistance_change

	# temp variable for idea calculations below
	set_temp_variable = { TUR_new_resistance_value = TUR_traditionalist_resistance }
	add_to_temp_variable = { TUR_new_resistance_value = TUR_resistance_change }
	clamp_temp_variable = {
		var = TUR_new_resistance_value
		min = 0
		max = 100
	}

	# change the variable
	if = {
		limit = { has_variable = TUR_traditionalist_resistance }
		set_variable = {
			TUR_traditionalist_resistance = TUR_new_resistance_value
			tooltip = TUR_traditionalist_resistance_tooltip
		}
	}
	else = {
		set_variable = { TUR_traditionalist_resistance = TUR_new_resistance_value }
	}

	if = {
		limit = { check_variable = { TUR_new_resistance_value > 79 } }
		set_temp_variable = { TUR_new_resistance_idea = token:TUR_traditionalist_resistance_extreme }
	}
	else_if = {
		limit = { check_variable = { TUR_new_resistance_value > 59 } }
		set_temp_variable = { TUR_new_resistance_idea = token:TUR_traditionalist_resistance_strong }
	}
	else_if = {
		limit = { check_variable = { TUR_new_resistance_value > 39 } }
		set_temp_variable = { TUR_new_resistance_idea = token:TUR_traditionalist_resistance_significant }
	}
	else_if = {
		limit = { check_variable = { TUR_new_resistance_value > 19 } }
		set_temp_variable = { TUR_new_resistance_idea = token:TUR_traditionalist_resistance_slight }
	}
	else = {
		set_temp_variable = { TUR_new_resistance_idea = token:TUR_traditionalist_resistance_insignificant }
	}
	if = {
		limit = { NOT = { has_idea = var:TUR_new_resistance_idea } }
		if = {
			limit = { has_idea = var:TUR_traditionalist_resistance_idea }
			swap_ideas = {
				remove_idea = var:TUR_traditionalist_resistance_idea
				add_idea = var:TUR_new_resistance_idea
			}
		}
		else = {
			add_ideas = var:TUR_new_resistance_idea
		}
		set_variable = { TUR_traditionalist_resistance_idea = TUR_new_resistance_idea }
	}
}

TUR_disable_traditionalist_resistance = {
	clear_variable = TUR_traditionalist_resistance
	if = {
		limit = { has_variable = TUR_traditionalist_resistance_idea }
		remove_ideas = var:TUR_traditionalist_resistance_idea
	}
	clear_variable = TUR_traditionalist_resistance_idea
	hidden_effect = {
		remove_ideas = {
			TUR_traditionalist_resistance_insignificant
			TUR_traditionalist_resistance_slight
			TUR_traditionalist_resistance_significant
			TUR_traditionalist_resistance_strong
			TUR_traditionalist_resistance_extreme
		}
	}
}

TUR_apply_surnames = {
	event_target:original_turkey = {
		### Country Leaders ###
		TUR_resad_fuad_baraner = { set_character_name = TUR_resad_fuad_baraner_surname }
		TUR_sefik_husnu_deymer = { set_character_name = TUR_sefik_husnu_deymer_surname }
		TUR_hikmet_kivilcimli = { set_character_name = TUR_hikmet_kivilcimli_surname }
		TUR_hasan_ali_yucel = { set_character_name = TUR_hasan_ali_yucel_surname }
		TUR_ali_fethi_okyar = { set_character_name = TUR_ali_fethi_okyar_surname }
		TUR_ahmet_muhtar_cilli = { set_character_name = TUR_ahmet_muhtar_cilli_surname }
		TUR_adnan_menderes = { set_character_name = TUR_adnan_menderes_surname }
		TUR_yusuf_hikmet_bayur = { set_character_name = TUR_yusuf_hikmet_bayur_surname }
		TUR_ismet_resit = { set_character_name = TUR_ismet_resit_surname }
		TUR_fevzi_cakmak = { set_character_name = TUR_fevzi_cakmak_surname }
		TUR_mehmet_kazim_orbay = { set_character_name = TUR_mehmet_kazim_orbay_surname }
		TUR_mehmet_recep_peker = { set_character_name = TUR_mehmet_recep_peker_surname }

		### Second in Command ###
		TUR_mustafa_kemal = { set_character_name = TUR_mustafa_kemal_surname }
		TUR_sultanzade_mehmed_sabahaddin = { set_character_name = TUR_sultanzade_mehmed_sabahaddin_surname }
		TUR_musa_kazim_karabekir = { set_character_name = TUR_musa_kazim_karabekir_surname }
		TUR_mahmud_celaleddin_bayar = { set_character_name = TUR_mahmud_celaleddin_bayar_surname }
		TUR_sevket_sureyya_aydemir = { set_character_name = TUR_sevket_sureyya_aydemir_surname }
		TUR_mustafa_sabri = { set_character_name = TUR_mustafa_sabri_surname }

		### Advisors ###
		TUR_mehmet_nuri_conker = { set_character_name = TUR_mehmet_nuri_conker_surname }
		TUR_falih_rifki_atay = { set_character_name = TUR_falih_rifki_atay_surname }
		TUR_mahmut_esat_bozkurt = { set_character_name = TUR_mahmut_esat_bozkurt_surname }
		TUR_ali_kemal_kuneralp = { set_character_name = TUR_ali_kemal_kuneralp_surname }
		TUR_mehmet_cavit_yalcin = { set_character_name = TUR_mehmet_cavit_yalcin_surname }
		TUR_mustafa_vasif_karakol = { set_character_name = TUR_mustafa_vasif_karakol_surname }
		TUR_yusuf_kemal_tengirsenk = { set_character_name = TUR_yusuf_kemal_tengirsenk_surname }
		TUR_yakup_kadri_karaosmanoglu = { set_character_name = TUR_yakup_kadri_karaosmanoglu_surname }
		TUR_ismail_hakki_canbulat = { set_character_name = TUR_ismail_hakki_canbulat_surname }
		TUR_ahmet_naci_tinaz = { set_character_name = TUR_ahmet_naci_tinaz_surname }
		TUR_halide_edip_adivar = { set_character_name = TUR_halide_edip_adivar_surname }
		TUR_riza_nur = { set_character_name = TUR_riza_nur_surname }
		TUR_mehmed_sukru_saracoglu = { set_character_name = TUR_mehmed_sukru_saracoglu_surname }
		TUR_resat_muhlis_erkmen = { set_character_name = TUR_resat_muhlis_erkmen_surname }
		TUR_suleiman_sirri_aral = { set_character_name = TUR_suleiman_sirri_aral_surname }
		TUR_yunus_nadi_abalioglu = { set_character_name = TUR_yunus_nadi_abalioglu_surname }
		TUR_husnu_bingol = { set_character_name = TUR_husnu_bingol_surname }
		TUR_fatin_rustu_zorlu = { set_character_name = TUR_fatin_rustu_zorlu_surname }

		### Theorists ###
		TUR_cemal_mersinli = { set_character_name = TUR_cemal_mersinli_surname }
		TUR_izzetin_calislar = { set_character_name = TUR_izzetin_calislar_surname }
		TUR_vecihi_hurkus = { set_character_name = TUR_vecihi_hurkus_surname }

		### Generals ###
		TUR_omer_fahrettin_turkkan = { set_character_name = TUR_omer_fahrettin_turkkan_surname }
		TUR_nuri_yamut = { set_character_name = TUR_nuri_yamut_surname }
		TUR_hayrullah_fisek = { set_character_name = TUR_hayrullah_fisek_surname }
		TUR_abdurrahman_nafiz_gurman = { set_character_name = TUR_abdurrahman_nafiz_gurman_surname }
		TUR_mustafa_muglali = { set_character_name = TUR_mustafa_muglali_surname }
		TUR_cemil_cahit_toydemir = { set_character_name = TUR_cemil_cahit_toydemir_surname }
		TUR_asim_gunduz = { set_character_name = TUR_asim_gunduz_surname }
		TUR_sefik_aker = { set_character_name = TUR_sefik_aker_surname }
		TUR_huseyin_husnu_erkilet = { set_character_name = TUR_huseyin_husnu_erkilet_surname }
		TUR_mehmet_hayri_tarhan = { set_character_name = TUR_mehmet_hayri_tarhan_surname }
		TUR_nihat_anilmis = { set_character_name = TUR_nihat_anilmis_surname }
		TUR_fahrettin_altay = { set_character_name = TUR_fahrettin_altay_surname }
		TUR_tahsin_yazici = { set_character_name = TUR_tahsin_yazici_surname }
		TUR_selahattin_adil = { set_character_name = TUR_selahattin_adil_surname }

		### Admirals ###
		TUR_mehmet_ali_ulgen = { set_character_name = TUR_mehmet_ali_ulgen_surname }
		TUR_sukru_okan = { set_character_name = TUR_sukru_okan_surname }
		TUR_huseyin_rauf_orbay = { set_character_name = TUR_huseyin_rauf_orbay_surname }
		TUR_mahmud_muhtar_katircioglu = { set_character_name = TUR_mahmud_muhtar_katircioglu_surname }

		### Military Staff ###
		TUR_refet_bele = { set_character_name = TUR_refet_bele_surname }
		TUR_mehmet_rustu_sakarya = { set_character_name = TUR_mehmet_rustu_sakarya_surname }
		TUR_mehmet_sadik_altincan = { set_character_name = TUR_mehmet_sadik_altincan_surname }
		TUR_muzaffer_goksenin = { set_character_name = TUR_muzaffer_goksenin_surname }
		TUR_fevzi_ucaner = { set_character_name = TUR_fevzi_ucaner_surname }
		TUR_cemil_conk = { set_character_name = TUR_cemil_conk_surname }
		TUR_ali_fuat_cebesoy = { set_character_name = TUR_ali_fuat_cebesoy_surname }
		TUR_mehmet_fahri_engin = { set_character_name = TUR_mehmet_fahri_engin_surname }
		TUR_zeki_baraz_kolac_kilicoglu = { set_character_name = TUR_zeki_baraz_kolac_kilicoglu_surname }
	}
}

TUR_apply_republic_party_names = {
	set_party_name = {
		ideology = totalist
		name = TUR_republic_totalist_party
		long_name = TUR_republic_totalist_party_long
	}
	set_party_name = {
		ideology = syndicalist
		name = TUR_republic_syndicalist_party
		long_name = TUR_republic_syndicalist_party_long
	}
	set_party_name = {
		ideology = radical_socialist
		name = TUR_republic_radical_socialist_party
		long_name = TUR_republic_radical_socialist_party_long
	}
	set_party_name = {
		ideology = social_democrat
		name = TUR_republic_social_democrat_party
		long_name = TUR_republic_social_democrat_party_long
	}
	set_party_name = {
		ideology = social_liberal
		name = TUR_republic_social_liberal_party
		long_name = TUR_republic_social_liberal_party_long
	}
	set_party_name = {
		ideology = market_liberal
		name = TUR_republic_market_liberal_party
		long_name = TUR_republic_market_liberal_party_long
	}
	set_party_name = {
		ideology = social_conservative
		name = TUR_republic_social_conservative_party
		long_name = TUR_republic_social_conservative_party_long
	}
	set_party_name = {
		ideology = authoritarian_democrat
		long_name = TUR_republic_authoritarian_democrat_party
		name = TUR_republic_authoritarian_democrat_party_long
	}
	set_party_name = {
		ideology = paternal_autocrat
		name = TUR_republic_paternal_autocrat_party
		long_name = TUR_republic_paternal_autocrat_party_long
	}
	set_party_name = {
		ideology = national_populist
		name = TUR_republic_national_populist_party
		long_name = TUR_republic_national_populist_party_long
	}
}

TUR_apply_ottoman_party_names = {
	set_party_name = {
		ideology = totalist
		name = TUR_totalist_party
		long_name = TUR_totalist_party_long
	}
	set_party_name = {
		ideology = syndicalist
		name = TUR_syndicalist_party
		long_name = TUR_syndicalist_party_long
	}
	set_party_name = {
		ideology = radical_socialist
		name = TUR_radical_socialist_party
		long_name = TUR_radical_socialist_party_long
	}
	set_party_name = {
		ideology = social_democrat
		name = TUR_social_democrat_party
		long_name = TUR_social_democrat_party_long
	}
	set_party_name = {
		ideology = social_liberal
		name = TUR_social_liberal_party
		long_name = TUR_social_liberal_party_long
	}
	set_party_name = {
		ideology = market_liberal
		name = TUR_market_liberal_party
		long_name = TUR_market_liberal_party_long
	}
	set_party_name = {
		ideology = social_conservative
		name = TUR_social_conservative_party
		long_name = TUR_social_conservative_party_long
	}
	set_party_name = {
		ideology = authoritarian_democrat
		long_name = TUR_authoritarian_democrat_party
		name = TUR_authoritarian_democrat_party_long
	}
	set_party_name = {
		ideology = paternal_autocrat
		name = TUR_paternal_autocrat_party
		long_name = TUR_paternal_autocrat_party_long
	}
	set_party_name = {
		ideology = national_populist
		name = TUR_national_populist_party
		long_name = TUR_national_populist_party_long
	}
}

TUR_teardown_faction_joining_decisions = {
	hidden_effect = {
		remove_targeted_decision = { decision = TUR_join_reichspakt target = GER }
		remove_targeted_decision = { decision = TUR_join_entente_dem target = ENT }
		remove_targeted_decision = { decision = TUR_join_internationale target = INT }
		remove_targeted_decision = { decision = TUR_join_belgrade_pact target = SER }
	}
}

TUR_OSP_takes_over = {
	add_ideas = TUR_a_throne_without_sultan
	load_focus_tree = ottoman_provisional_government_tree
	set_politics = {
		ruling_party = paternal_autocrat
		elections_allowed = no
		name = TUR_OSP
		long_name = TUR_OSP_long
	}
	set_party_name = {
		ideology = market_liberal
		name = TUR_OSP
		long_name = TUR_OSP_long
	}
	set_party_name = {
		ideology = social_liberal
		name = TUR_OSP
		long_name = TUR_OSP_long
	}
	set_party_name = {
		ideology = social_conservative
		name = TUR_OSP
		long_name = TUR_OSP_long
	}
	set_temp_variable = { coalition_partner_var = token:market_liberal }
	add_to_coalition = yes
	set_temp_variable = { coalition_partner_var = token:social_liberal }
	add_to_coalition = yes
	set_temp_variable = { coalition_partner_var = token:social_conservative }
	add_to_coalition = yes
	hidden_effect = {
		TUR_ismet_resit = {
			if = {
				limit = { has_ideology = authoritarian_democrat_subtype }
				promote_character = authoritarian_democrat_subtype
			}
			else = {
				add_country_leader_role = {
					country_leader = { ideology = authoritarian_democrat_subtype }
					promote_leader = yes
				}
			}
		}
		TUR_hasan_ali_yucel = {
			if = {
				limit = { has_ideology = social_democrat_subtype }
				promote_character = social_democrat_subtype
			}
		}
		TUR_mehmet_recep_peker = {
			if = {
				limit = { has_ideology = national_populist_subtype }
				promote_character = national_populist_subtype
			}
		}
		if = {
			limit = { has_country_flag = TUR_fahrettin_pasha_coup }
			TUR_omer_fahrettin_turkkan = {
				remove_all_country_leader_roles = yes
				add_country_leader_role = {
					country_leader = {
						ideology = social_liberal_subtype
						desc = TUR_omer_fahrettin_turkkan_leader_desc
					}
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = {
						ideology = market_liberal_subtype
						desc = TUR_omer_fahrettin_turkkan_leader_desc
					}
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = {
						ideology = social_conservative_subtype
						desc = TUR_omer_fahrettin_turkkan_leader_desc
					}
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = {
						ideology = paternal_autocrat_subtype
						desc = TUR_omer_fahrettin_turkkan_leader_desc
					}
					promote_leader = yes
				}
			}
			else = {
				TUR_refet_bele = {
					remove_all_country_leader_roles = yes
					add_country_leader_role = {
						country_leader = {
							ideology = social_liberal_subtype
							desc = TUR_refet_bele_leader_desc
						}
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = {
							ideology = market_liberal_subtype
							desc = TUR_refet_bele_leader_desc
						}
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = {
							ideology = social_conservative_subtype
							desc = TUR_refet_bele_leader_desc
						}
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = {
							ideology = paternal_autocrat_subtype
							desc = TUR_refet_bele_leader_desc
						}
						promote_leader = yes
					}
				}
			}
		#	news_event = {
		#		id = worldnews. #TODO fix this
		#		days = 2
		#	}
		}
	}
	if = {
		limit = { NOT = { has_country_flag = TUR_fahrettin_pasha_coup } }
		country_event = { id = tur_osp.2 days = 4 }
		remove_ideas = {
			ott_military_loyalty
			ott_universal_suffrage
			ott_4_years_progress
			ott_4_years_progress_2
			ott_model_farm
			ott_autarky
		}
	}
	activate_advisor = TUR_musa_kazim_karabekir_sic
	hidden_effect = {
		TUR_fatin_rustu_zorlu = { set_nationality = ROOT }
		TUR_mustafa_sabri = { set_nationality = ROOT }
	}
}

TUR_change_kurdish_unrest = {
	if = {
		limit = { check_variable = { TUR_unrest_change < 0 } }
		add_to_variable = {
			TUR_kurdish_unrest_value = TUR_unrest_change
			tooltip = TUR_decrease_kurdish_unrest
		}
	}
	else = {
		add_to_variable = {
			TUR_kurdish_unrest_value = TUR_unrest_change?1
			tooltip = TUR_increase_kurdish_unrest
		}
	}
	clamp_variable = {
		var = TUR_kurdish_unrest_value
		min = 0
		max = 100
	}
	hidden_effect = {
		country_event = { id = tur.91 days = 1 random_days = 5 }
		country_event = { id = tur.92 days = 1 random_days = 5 }
		country_event = { id = tur.114 days = 1 random_days = 5 }
		country_event = { id = tur.115 days = 1 random_days = 5 }
		country_event = { id = tur.116 days = 1 random_days = 5 }
	}
}

TUR_disable_kurdish_decisions = {
	clear_variable = TUR_kurdish_unrest_value
	clear_variable = TUR_kurdish_unrest_round
	hidden_effect = {
		remove_targeted_decision = { decision = TUR_literacy_campaign_in_kurdistan target = KDR }
		remove_targeted_decision = { decision = TUR_send_the_army target = KDR }
		remove_targeted_decision = { decision = TUR_hunt_down_rebels target = KDR }
		remove_targeted_decision = { decision = TUR_arrest_leaders target = KDR }
		remove_targeted_decision = { decision = TUR_increase_police_presence target = KDR }
		remove_targeted_decision = { decision = TUR_grant_autonomy_to_kurdistan target = KDR }
	}
}

TUR_clear_kurdish_modifiers_and_resistance = {
	hidden_effect = {
		every_state = {
			limit = { has_state_flag = TUR_kurdish_unrest_state }
			clr_state_flag = TUR_kurdish_unrest_state
			force_enable_resistance = { occupier = TUR occupied = KDR clear = yes }
			if = {
				limit = { has_dynamic_modifier = { modifier = TUR_kurdish_unrest_modifier } }
				remove_dynamic_modifier = { modifier = TUR_kurdish_unrest_modifier }
			}
			if = {
				limit = { is_controlled_by = TUR }
				cancel_resistance = yes
			}
		}
	}
}

TUR_disable_all_decisions = {
	remove_targeted_decision = { target = THIS decision = TUR_send_turkish_agitators }
	remove_targeted_decision = { target = THIS decision = TUR_drop_tracts }
	remove_targeted_decision = { target = THIS decision = TUR_bribe_officials }
	remove_targeted_decision = { target = THIS decision = TUR_denounce_syrian_repression }
	remove_targeted_decision = { target = THIS decision = TUR_mobilize_at_the_border }
	remove_targeted_decision = { target = THIS decision = TUR_ask_for_a_referendum }

	remove_targeted_decision = { target = IRQ decision = TUR_trade_accord }
	remove_targeted_decision = { target = IRQ decision = TUR_mutual_protection }

	remove_targeted_decision = { target = EGY decision = TUR_intervene_in_war_against_egypt }

	remove_targeted_decision = { target = GER decision = TUR_join_reichspakt }
	remove_targeted_decision = { target = ENT decision = TUR_join_entente_dem }
	remove_targeted_decision = { target = SER decision = TUR_join_belgrade_pact }
	remove_targeted_decision = { target = INT decision = TUR_join_internationale }
	remove_targeted_decision = { target = ARM decision = TUR_invade_target }
	remove_targeted_decision = { target = GEO decision = TUR_invade_target }
	remove_targeted_decision = { target = BUL decision = TUR_invade_target }
	remove_targeted_decision = { target = KDR decision = TUR_invade_target }
	remove_targeted_decision = { target = RUS decision = TUR_invade_target }
	remove_targeted_decision = { target = SOV decision = TUR_invade_target }
	remove_targeted_decision = { target = TRM decision = TUR_invade_target }
	remove_targeted_decision = { target = GRE decision = TUR_demand_home_of_revolution }

	remove_targeted_decision = { target = THIS decision = TUR_send_turkish_agitators }
	remove_targeted_decision = { target = THIS decision = TUR_drop_tracts }
	remove_targeted_decision = { target = THIS decision = TUR_bribe_officials }
	remove_targeted_decision = { target = THIS decision = TUR_denounce_syrian_repression }
	remove_targeted_decision = { target = THIS decision = TUR_mobilize_at_the_border }
	remove_targeted_decision = { target = THIS decision = TUR_ask_for_a_referendum }

	remove_targeted_decision = { target = THIS decision = TUR_invest_in_fruits_cooperatives }

	remove_targeted_decision = { target = THIS decision = TUR_army_reform_organisation }
	remove_targeted_decision = { target = THIS decision = TUR_army_reform_equipment }

	every_state = {
		clr_state_flag = TUR_kurdish_unrest_state
		clr_state_flag = TUR_centralist_control_state
		clr_state_flag = TUR_decentralist_control_state
		clr_state_flag = TUR_tarikats_state
		clr_state_flag = TUR_kemalist_loyalties_state
		PREV = {
			remove_targeted_decision = { decision = TUR_install_loyalists target = PREV }
			remove_targeted_decision = { decision = TUR_deal_with_OHF target = PREV }
			remove_targeted_decision = { decision = TUR_deal_with_HIF target = PREV }
			remove_targeted_decision = { decision = TUR_invest_in_clothing_factories target = PREV }
		}
	}
}

TUR_set_correct_capital = {
	if = {
		limit = {
			OR = {
				tag = OTT
				has_cosmetic_tag = TUR_ottoman_empire
				has_cosmetic_tag = TUR_ottoman_federation
			}
			773 = { #Constantinople
				is_owned_and_controlled_by = PREV
				is_capital = no
			}
		}
		set_capital = { state = 773 remember_old_capital = no }
	}
	else_if = {
		limit = {
			OR = {
				NOT = { owns_state = 773 } #Constantinople
				NOT = {
					tag = OTT
					has_cosmetic_tag = TUR_ottoman_empire
					has_cosmetic_tag = TUR_ottoman_federation
				}
			}
			49 = { #Ankara
				is_owned_and_controlled_by = PREV
				is_capital = no
			}
		}
		set_capital = { state = 49 remember_old_capital = no }
	}
}
