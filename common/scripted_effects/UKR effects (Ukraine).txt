UKR_calculate_success_of_the_bill = {
	set_variable = { UKR_bill_success = 0 }
	if = {
		limit = {
			check_variable = { UKR_independents_support > 69 }
		}
		add_to_variable = { UKR_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { UKR_urdp_support > 69 }
		}
		add_to_variable = { UKR_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { UKR_protofis_support > 69 }
		}
		add_to_variable = { UKR_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { UKR_uskhd_support > 69 }
		}
		add_to_variable = { UKR_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { UKR_udkhp_support > 69 }
		}
		add_to_variable = { UKR_bill_success = 1 }
	}
}

UKR_activate_pacification_decisions = {
	if = {
		limit = { has_idea = UKR_anti_hetman_revolt }
		remove_ideas = UKR_anti_hetman_revolt
	}
	else_if = {
		limit = { has_idea = UKR_anti_hetman_revolt_2 }
		remove_ideas = UKR_anti_hetman_revolt_2
	}
	else = {
		remove_ideas = UKR_anti_hetman_revolt_3
	}
	add_ideas = UKR_anti_hetman_revolt_4
	if = {
		limit = { has_idea = UKR_army_in_chaos }
		remove_ideas = UKR_army_in_chaos
	}
	set_variable = { UKR_pacification_decision_time = 35 }
	every_owned_state = {
		limit = {
			is_demilitarized_zone = yes
			NOT = { state = 792 }
		}
		add_dynamic_modifier = { modifier = UKR_rebel_state }
		ROOT = {
			activate_targeted_decision = { decision = UKR_pacification_generic target = PREV }
		}
		792 = {
			add_dynamic_modifier = { modifier = UKR_rebel_state }
		}
	}
	activate_targeted_decision = { decision = UKR_pacify_volyn target = 792 }
}

UKR_industrial_score = {
	if = {
		limit = { has_active_mission = UKR_industrialisation_mission }
		custom_effect_tooltip = UKR_add_industrial_score_tt
	}
	add_to_variable = { UKR_industrial_score = UKR_influence_change }
	hidden_effect = {
		if = {
			limit = {
				check_variable = { UKR_land_reform_score < 10 }
				check_variable = { UKR_industrial_score > 20 }
			}
			country_event = { id = ukraine_landreform.32 days = 15 random_days = 15 }
		}
	}
}
UKR_industrial_score_bonuses = {
	if = {
		limit = {
			has_country_flag = UKR_ended_alliance_with_protofis_authdem
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.01
		}
	}
	if = {
		limit = {
			has_country_flag = UKR_protofis_influencing
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.01
		}
	}
	if = {
		limit = {
			has_country_flag = UKR_socialist_nationalization
		}
		add_stability = -0.02
	}
	if = {
		limit = {
			has_country_flag = UKR_utsentrprof_supported
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.01
		}
	}
	if = {
		limit = {
			has_country_flag = UKR_controlled_capitalistic_development
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.01
		}
	}
}

UKR_reform_score = {
	if = {
		limit = { has_country_flag = UKR_land_reform_in_progress }
		custom_effect_tooltip = UKR_add_reform_score_tt
	}
	add_to_variable = { UKR_land_reform_score = UKR_influence_change }
}

UKR_add_land_reform_score_based_on_current_score = {
	if = {
		limit = { has_active_mission = UKR_landreform_mission }
		if = {
			limit = { check_variable = { UKR_land_reform_score < 25 } }
			set_temp_variable = { UKR_influence_change = 4 }
			UKR_reform_score = yes
		}
		else_if = {
			limit = { check_variable = { UKR_land_reform_score < 50 } }
			set_temp_variable = { UKR_influence_change = 3 }
			UKR_reform_score = yes
		}
		else_if = {
			limit = { check_variable = { UKR_land_reform_score < 75 } }
			set_temp_variable = { UKR_influence_change = 2 }
			UKR_reform_score = yes
		}
		else = {
			set_temp_variable = { UKR_influence_change = 1 }
			UKR_reform_score = yes
		}
	}
}

UKR_reform_idea_update = {
	custom_effect_tooltip = tooltip_white_line
	if = {
		limit = { has_idea = UKR_land_reform_debacle }
		swap_ideas = {
			remove_idea = UKR_land_reform_debacle
			add_idea = UKR_land_reform_wip_1
		}
	}
	else_if = {
		limit = { has_idea = UKR_land_reform_wip_1 }
		swap_ideas = {
			remove_idea = UKR_land_reform_wip_1
			add_idea = UKR_land_reform_wip_2
		}
	}
	else_if = {
		limit = { has_idea = UKR_land_reform_wip_2 }
		swap_ideas = {
			remove_idea = UKR_land_reform_wip_2
			add_idea = UKR_land_reform_wip_3
		}
	}
	hidden_effect = {
		if = {
			limit = { check_variable = { UKR_land_reform_score > 20 } }
			country_event = { id = ukraine_landreform.29 days = 15 random_days = 15 }
		}
		else_if = {
			limit = { check_variable = { UKR_land_reform_score > 40 } }
			country_event = { id = ukraine_landreform.30 days = 15 random_days = 15 }
		}
		else_if = {
			limit = { check_variable = { UKR_land_reform_score > 60 } }
			country_event = { id = ukraine_landreform.31 days = 15 random_days = 15 }
		}
	}
}

UKR_uskhd_organic_state_idea = {
	if = {
		limit = {
			has_idea = UKR_transformation_of_the_state
		}
		swap_ideas = {
			remove_idea = UKR_transformation_of_the_state
			add_idea = UKR_transformation_of_the_state_2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_transformation_of_the_state_2
		}
		swap_ideas = {
			remove_idea = UKR_transformation_of_the_state_2
			add_idea = UKR_transformation_of_the_state_3
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_transformation_of_the_state_3
		}
		swap_ideas = {
			remove_idea = UKR_transformation_of_the_state_3
			add_idea = UKR_transformation_of_the_state_4
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_transformation_of_the_state_4
		}
		swap_ideas = {
			remove_idea = UKR_transformation_of_the_state_4
			add_idea = UKR_transformation_of_the_state_5
		}
	}
}

UKR_resistance_score = {
	custom_effect_tooltip = UKR_add_resistance_tt
	add_to_variable = { UKR_executive_office_resistance = UKR_resistance_change }
	subtract_from_variable = { UKR_otaman_minister_reform_stability = UKR_resistance_change_stability }
	subtract_from_variable = { UKR_no_confidence_pp = UKR_resistance_change_pp }
	subtract_from_variable = { UKR_review_electoral_laws_researchspeed = UKR_resistance_change_researchspeed }
}

UKR_calculate_new_opposition_strength = {
	set_temp_variable = { UKR_opposition_calculation = UKR_opposition_strength }
	add_to_temp_variable = { UKR_opposition_calculation = 10 }
	if = {
		limit = {
			check_variable = { UKR_opposition_calculation > 0 }
			check_variable = { UKR_opposition_calculation < 29 }
		}
		custom_effect_tooltip = UKR_opposition_change_nothing
	}
	else_if = {
		limit = {
			check_variable = { UKR_opposition_calculation > 29 }
			check_variable = { UKR_opposition_calculation < 40 }
		}
		custom_effect_tooltip = UKR_opposition_change_moderate
	}
	else_if = {
		limit = {
			check_variable = { UKR_opposition_calculation > 39 }
			check_variable = { UKR_opposition_calculation < 60 }
		}
		custom_effect_tooltip = UKR_opposition_change_nothing
	}
	else_if = {
		limit = {
			check_variable = { UKR_opposition_calculation > 49 }
			check_variable = { UKR_opposition_calculation < 70 }
		}
		custom_effect_tooltip = UKR_opposition_change_high
	}
	else_if = {
		limit = {
			OR = {
				check_variable = { UKR_opposition_calculation = 70 }
				check_variable = { UKR_opposition_calculation > 70 }
			}
		}
		custom_effect_tooltip = UKR_opposition_change_nothing
	}
}

UKR_gamerule_win_revolt_VDR = {
	if = {
		limit = {
			has_completed_focus = UKR_revolutionary_spirit
			has_completed_focus = UKR_strongest_message
			has_completed_focus = UKR_lessons_of_britain_and_france
			has_completed_focus = UKR_peoples_army_focus
		}
		country_event = ukraine_revolt.51 #Cheat for republican gamerules
	}
}

UKR_clear_hetmanist_ideas = {
	remove_ideas = UKR_nationalist_agitation_2
	if = {
		limit = { has_character = UKR_ivan_poltavets_ostrianytsia }
		retire_character = UKR_ivan_poltavets_ostrianytsia
	}
	hidden_effect = {
		every_owned_state = {
			limit = {
				is_demilitarized_zone = yes
				NOT = { state = 792 }
			}
			remove_dynamic_modifier = { modifier = UKR_rebel_state }
			ROOT = {
				remove_targeted_decision = { decision = UKR_pacification_generic target = PREV }
			}
			792 = {
				remove_dynamic_modifier = { modifier = UKR_rebel_state }
			}
		}
		remove_targeted_decision = { decision = UKR_pacify_volyn target = 792 }
		remove_ideas = UKR_anti_hetman_revolt_4
		if = {
			limit = { has_completed_focus = UKR_the_center_holds }
			uncomplete_national_focus = {
				focus = UKR_the_center_holds
				uncomplete_children = yes
			}
		}
		else_if = {
			limit = { has_completed_focus = UKR_all_the_hetmans_men }
			uncomplete_national_focus = {
				focus = UKR_all_the_hetmans_men
				uncomplete_children = yes
			}
		}
		else_if = {
			limit = { has_completed_focus = UKR_fall_of_uskhd }
			uncomplete_national_focus = {
				focus = UKR_fall_of_uskhd
				uncomplete_children = yes
			}
		}

		remove_ideas = {
			UKR_uskhd_issues_1 #Clear USKhD spirits
			UKR_uskhd_issues_2
			UKR_uskhd_issues_3
			UKR_uskhd_issues_4
			UKR_uskhd_issues_5
			UKR_uskhd_issues_6
			UKR_uskhd_issues_7
			UKR_transformation_of_the_state
			UKR_transformation_of_the_state_2
			UKR_transformation_of_the_state_3
			UKR_transformation_of_the_state_4
			UKR_loyal_intelligentsia
			UKR_highest_moral_authority
			UKR_highest_moral_authority_2
			UKR_territory_patriotism
			UKR_territory_patriotism_2

			UKR_revolutionary_leftism_suppression #Clear UDKhP spirits
			UKR_otaman_minister_reform_spirit
			UKR_vote_of_no_confidence_reform_spirit
			UKR_review_electoral_laws_reform_spirit
			UKR_cultural_autonomy_and_suffrage_1
			UKR_cultural_autonomy_and_suffrage_2
			UKR_cultural_autonomy_and_suffrage_3
			UKR_cultural_autonomy_and_suffrage_4
			UKR_hetmanist_soimist_idea_1
			UKR_hetmanist_soimist_idea_2
			UKR_hetmanist_soimist_idea_3

			UKR_knightly_virtues_idea #Clear SHD spirits
			UKR_administrative_reorganisation
			UKR_common_interests
			UKR_guided_economy
			UKR_ivan_po_influence_idea_1
			UKR_ivan_po_influence_idea_2
			UKR_ivan_po_influence_idea_3
			UKR_ivan_po_influence_idea_4
			UKR_ivan_po_influence_idea_5
			UKR_ivan_po_influence_idea_6
			UKR_ivan_po_influence_idea_7
			UKR_ivan_po_influence_idea_8
			UKR_ivan_po_influence_idea_9
			UKR_mechanisation_of_mining
		}

		#Clear UDKhP modifiers
		remove_dynamic_modifier = { modifier = UKR_otaman_minister_reform_spirit_modifier }
		remove_dynamic_modifier = { modifier = UKR_no_confidence_reform_spirit_modifier }
		remove_dynamic_modifier = { modifier = UKR_review_electoral_laws_reform_spirit_modifier }

		#Clear SHD mechanic
		remove_mission = UKR_ivan_po_mission
		remove_targeted_decision = { target = ROOT decision = UKR_solidfy_homzyn_position }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 200 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 821 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 221 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 259 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 225 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 193 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 197 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 226 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 203 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 192 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 202 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 199 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 201 }
		remove_targeted_decision = { decision = UKR_cossack_council_generic target = 228 }
		remove_targeted_decision = { decision = UKR_cossack_militia_kiev target = 202 }
		remove_targeted_decision = { decision = UKR_cossack_militia_poltava target = 259 }
		remove_targeted_decision = { decision = UKR_cossack_militia_chernigov target = 193 }
		remove_targeted_decision = { decision = UKR_cossack_militia_starodub target = 791 }
		remove_targeted_decision = { decision = UKR_cossack_militia_kharkov target = 221 }
		remove_targeted_decision = { decision = UKR_cossack_militia_sumy target = 225 }
		202 = {
			remove_dynamic_modifier = {
				modifier = 	UKR_cossack_militia_4
			}
		}
		clr_country_flag = UKR_cossack_militia_kiev
		193 = {
			remove_dynamic_modifier = {
				modifier = 	UKR_cossack_militia_1
			}
		}
		clr_country_flag = UKR_cossack_militia_chernigov
		259 = {
			remove_dynamic_modifier = {
				modifier = 	UKR_cossack_militia_3
			}
		}
		clr_country_flag = UKR_cossack_militia_poltava
		791 = {
			remove_dynamic_modifier = {
				modifier = 	UKR_cossack_militia_3
			}
		}
		clr_country_flag = UKR_cossack_militia_starodub
		221 = {
			remove_dynamic_modifier = {
				modifier = 	UKR_cossack_militia_2
			}
		}
		clr_country_flag = UKR_cossack_militia_kharkov
		225 = {
			remove_dynamic_modifier = {
				modifier = 	UKR_cossack_militia_3
			}
		}
		clr_country_flag = UKR_cossack_militia_sumy

		if = {
			limit = { #Clear Protofis
				has_country_flag = UKR_protofis_influencing
			}
			clr_country_flag = UKR_protofis_influencing
			add_to_variable = { UKR_industry_cost = 15 }
			add_to_variable = { UKR_industry_cost_high = 15 }
		}
		if = {
			limit = { #Clear AuthDem industry effect
				has_country_flag = UKR_ended_alliance_with_protofis_authdem
			}
			clr_country_flag = UKR_ended_alliance_with_protofis_authdem
			subtract_from_variable = { UKR_industry_remove_cost_1 = 15 }
			subtract_from_variable = { UKR_industry_remove_cost_2 = 15 }
			subtract_from_variable = { UKR_industry_remove_cost_3 = 15 }
			subtract_from_variable = { UKR_industry_remove_cost_4 = 15 }
			subtract_from_variable = { UKR_industry_remove_cost_5 = 15 }
			subtract_from_variable = { UKR_industry_remove_cost_6 = 15 }
		}
		#End UDKhP mechanic
		remove_targeted_decision = { decision = UKR_appointment_of_otaman_minister target = THIS }
		remove_targeted_decision = { decision = UKR_vote_of_no_confidence target = THIS }
		remove_targeted_decision = { decision = UKR_review_electoral_laws target = THIS }
		remove_mission = UKR_parliamentary_reform_debate_1
		remove_mission = UKR_parliamentary_reform_debate_2
		remove_mission = UKR_parliamentary_reform_debate_3
		remove_mission = UKR_executive_office_resistance_increasing
		remove_targeted_decision = { decision = UKR_visit_executive_office target = THIS }
		remove_targeted_decision = { decision = UKR_rally_the_democrats target = THIS }
		remove_targeted_decision = { decision = UKR_concessions_to_skoropadskyi target = THIS }
		remove_targeted_decision = { decision = UKR_garner_support_from_unsp target = THIS }
		remove_targeted_decision = { decision = UKR_support_from_military_clique target = THIS }
		remove_targeted_decision = { decision = UKR_support_from_agrarians target = THIS }
	}
}

UKR_clear_republic_ideas = {
	hidden_effect = {
		if = {
			limit = {
				has_completed_focus = UKR_a_family_new_and_free
			}
			uncomplete_national_focus = {
				focus = UKR_a_family_new_and_free
				uncomplete_children = yes
			}
		}
		#Clear Republic spirits
		remove_ideas = {
			UKR_GER_deal_1
			UKR_GER_deal_2
			UKR_GER_deal_3
			UKR_controlled_capitalism
			UKR_controlled_capitalism2
			UKR_decentralized_governance
			UKR_decentralized_governance2
			UKR_decentralized_governance3
			UKR_decentralized_governance4
			UKR_ukrainian_land_fund
			UKR_principles_of_municipalization
			UKR_principles_of_municipalization2
			UKR_principles_of_municipalization3
			UKR_transformation_of_the_state_4
			UKR_bolster_utsentrprof
			UKR_USDRP_nationalization_plan
			UKR_empowered_workers
			UKR_the_parliamentary_state
			UKR_the_presidental_office
			UKR_minority_government
			UKR_deepening_austrian_ties
			UKR_deepening_austrian_ties2
			UKR_progressive_tax
		}

		remove_mission = UKR_bolster_cooperative_movement
		remove_mission = UKR_build_up_the_economy
		remove_mission = UKR_institute_progressive_labor_laws
		remove_mission = UKR_expand_workers_rights_usdrp
		remove_mission = UKR_carry_out_our_nationalization_plans

		clr_country_flag = UKR_utsentrprof_supported
		clr_country_flag = UKR_controlled_capitalistic_development
	}
}

UKR_uskhd_end_tree = {
	if = {
		limit = {
			has_completed_focus = UKR_classocratic_principle
			has_completed_focus = UKR_empower_class_aristocracy
			has_completed_focus = UKR_leading_role_of_agrarian_class
			has_completed_focus = UKR_mysticism_and_imperialism
			has_completed_focus = UKR_support_loyal_intelligentsia
			has_completed_focus = UKR_the_highest_moral_authority
			has_completed_focus = UKR_territorial_patriotism
			has_completed_focus = UKR_put_end_to_parliamentarian_chaos
			has_completed_focus = UKR_eliminate_threat_of_ochlocracy
			has_completed_focus = UKR_lord_of_land_order_labour
		}
		hidden_effect = {
			remove_ideas = {
				UKR_uskhd_issues_1
				UKR_uskhd_issues_2
				UKR_uskhd_issues_3
				UKR_uskhd_issues_4
				UKR_uskhd_issues_5
				UKR_uskhd_issues_6
				UKR_uskhd_issues_7
			}
		}
	}
}

UKR_increase_ivan_po_idea = {
	if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_1
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_1
			add_idea = UKR_ivan_po_influence_idea_2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_2
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_2
			add_idea = UKR_ivan_po_influence_idea_3
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_3
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_3
			add_idea = UKR_ivan_po_influence_idea_4
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_4
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_4
			add_idea = UKR_ivan_po_influence_idea_5
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_5
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_5
			add_idea = UKR_ivan_po_influence_idea_6
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_6
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_6
			add_idea = UKR_ivan_po_influence_idea_7
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_7
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_7
			add_idea = UKR_ivan_po_influence_idea_8
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_8
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_8
			add_idea = UKR_ivan_po_influence_idea_9
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_9
		}
		add_stability = -0.03
	}
}

UKR_decrease_ivan_po_idea = {
	if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_2
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_2
			add_idea = UKR_ivan_po_influence_idea_1
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_3
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_3
			add_idea = UKR_ivan_po_influence_idea_2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_4
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_4
			add_idea = UKR_ivan_po_influence_idea_3
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_5
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_5
			add_idea = UKR_ivan_po_influence_idea_4
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_6
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_6
			add_idea = UKR_ivan_po_influence_idea_5
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_7
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_7
			add_idea = UKR_ivan_po_influence_idea_6
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_8
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_8
			add_idea = UKR_ivan_po_influence_idea_7
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_9
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_9
			add_idea = UKR_ivan_po_influence_idea_8
		}
	}
}

UKR_cohesion_update = {
	if = {
		limit = { check_variable = { UKR_lun_mechanic_variable < 1 } check_variable = { UKR_cohesion_change < 0 } }
		custom_effect_tooltip = UKR_decrease_cohesion_limit_tt
		set_temp_variable = { ideology_change_var = -10 }
		change_ruling_party_popularity = yes
		add_stability = -0.1
	}
	else_if = {
		limit = { check_variable = { UKR_lun_mechanic_variable > 5 } check_variable = { UKR_cohesion_change > 0 } }
		custom_effect_tooltip = UKR_increase_cohesion_limit_tt
		set_temp_variable = { ideology_change_var = 5 }
		change_ruling_party_popularity = yes
		add_stability = 0.05
	}
	else = {
		set_temp_variable = { change = 0.05 }
		multiply_temp_variable = { change = UKR_cohesion_change }
		add_to_variable = { UKR_lun_mechanic_stability = change }
		set_temp_variable = { change = 0.03 }
		multiply_temp_variable = { change = UKR_cohesion_change }
		add_to_variable = { UKR_lun_mechanic_political_power = change }
		add_to_variable = { UKR_lun_mechanic_variable = UKR_cohesion_change }
		if = {
			limit = { check_variable = { UKR_cohesion_change > 0 } }
			custom_effect_tooltip = UKR_increase_cohesion_tt
		}
		else = { custom_effect_tooltip = UKR_decrease_cohesion_tt }
		force_update_dynamic_modifier = yes
	}
}

UKR_lun_improve_industry = {
	if = {
		limit = { has_idea = UKR_halted_industrialisation_plans }
		swap_ideas = {
			remove_idea = UKR_halted_industrialisation_plans
			add_idea = UKR_lun_industrialisation_1
		}
	}
	else_if = {
		limit = { has_idea = UKR_lun_industrialisation_1 }
		swap_ideas = {
			remove_idea = UKR_lun_industrialisation_1
			add_idea = UKR_lun_industrialisation_2
		}
	}
	else_if = {
		limit = { has_idea = UKR_lun_industrialisation_2 }
		swap_ideas = {
			remove_idea = UKR_lun_industrialisation_2
			add_idea = UKR_lun_industrialisation_3
		}
	}
	else_if = {
		limit = { has_idea = UKR_lun_industrialisation_3 }
		swap_ideas = {
			remove_idea = UKR_lun_industrialisation_3
			add_idea = UKR_lun_industrialisation_4
		}
	}
	else_if = {
		limit = { has_idea = UKR_lun_industrialisation_4 }
		swap_ideas = {
			remove_idea = UKR_lun_industrialisation_4
			add_idea = UKR_lun_industrialisation_5
		}
	}
	else_if = {
		limit = { has_idea = UKR_lun_industrialisation_5 }
		swap_ideas = {
			remove_idea = UKR_lun_industrialisation_5
			add_idea = UKR_lun_industrialisation_6
		}
	}
	else_if = {
		limit = { has_idea = UKR_lun_industrialisation_6 }
		swap_ideas = {
			remove_idea = UKR_lun_industrialisation_6
			add_idea = UKR_lun_industrialisation_7
		}
	}
	else_if = {
		limit = { has_idea = UKR_lun_industrialisation_7 }
		swap_ideas = {
			remove_idea = UKR_lun_industrialisation_7
			add_idea = UKR_lun_industrialisation_8
		}
	}
	else_if = {
		limit = { has_idea = UKR_lun_industrialisation_8 }
		swap_ideas = {
			remove_idea = UKR_lun_industrialisation_8
			add_idea = UKR_lun_industrialisation_9
		}
	}
}
UKR_lun_improve_land = {
	if = {
		limit = { has_idea = UKR_failed_land_reform_1 }
		swap_ideas = {
			remove_idea = UKR_failed_land_reform_1
			add_idea = UKR_failed_land_reform_2
		}
	}
	else_if = {
		limit = { has_idea = UKR_failed_land_reform_2 }
		swap_ideas = {
			remove_idea = UKR_failed_land_reform_2
			add_idea = UKR_failed_land_reform_3
		}
	}
	else_if = {
		limit = { has_idea = UKR_failed_land_reform_3 }
		swap_ideas = {
			remove_idea = UKR_failed_land_reform_3
			add_idea = UKR_failed_land_reform_4
		}
	}
	else_if = {
		limit = { has_idea = UKR_failed_land_reform_4 }
		swap_ideas = {
			remove_idea = UKR_failed_land_reform_4
			add_idea = UKR_failed_land_reform_5
		}
	}
	else_if = {
		limit = { has_idea = UKR_failed_land_reform_5 }
		swap_ideas = {
			remove_idea = UKR_failed_land_reform_5
			add_idea = UKR_land_reform_rightist_1
		}
	}
	else_if = {
		limit = { has_idea = UKR_land_reform_rightist_1 }
		swap_ideas = {
			remove_idea = UKR_land_reform_rightist_1
			add_idea = UKR_land_reform_rightist_3
		}
	}
	else_if = {
		limit = { has_idea = UKR_land_reform_rightist_3 }
		swap_ideas = {
			remove_idea = UKR_land_reform_rightist_3
			add_idea = UKR_land_reform_rightist_4
		}
	}
	else_if = {
		limit = { has_idea = UKR_land_reform_rightist_4 }
		swap_ideas = {
			remove_idea = UKR_land_reform_rightist_4
			add_idea = UKR_land_reform_rightist_5
		}
	}
	else_if = {
		limit = { has_idea = UKR_land_reform_rightist_5 }
		swap_ideas = {
			remove_idea = UKR_land_reform_rightist_5
			add_idea = UKR_land_reform_rightist_7
		}
	}
}

UKR_check_left_coalition_popularity = {
	set_variable = { UKR_leftcoalition_pop = party_popularity@social_democrat }
	add_to_variable = { UKR_leftcoalition_pop = party_popularity@radical_socialist }
}

UKR_check_URDP_USDRP_popularity = {
	set_variable = { UKR_URDP_USDRP_pop = party_popularity@social_democrat }
	add_to_variable = { UKR_URDP_USDRP_pop = party_popularity@social_liberal }
}

UKR_improve_unfinished_revolution_spirit = {
	if = {
		limit = {
			has_idea = UKR_unfinished_revolution
		}
		swap_ideas = {
			remove_idea = UKR_unfinished_revolution
			add_idea = UKR_unfinished_revolution_2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_unfinished_revolution_2
		}
		swap_ideas = {
			remove_idea = UKR_unfinished_revolution_2
			add_idea = UKR_unfinished_revolution_3
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_unfinished_revolution_3
		}
		swap_ideas = {
			remove_idea = UKR_unfinished_revolution_3
			add_idea = UKR_unfinished_revolution_4
		}
	}
}

UKR_land_reform_events = {
	hidden_effect = {
		random_list = {
			10 = {
				modifier = { factor = 0 has_country_flag = UKRLR1 }
				country_event = { id = ukraine_landreform.4 days = 25 }
				country_event = { id = ukraine_landreform.5 days = 50 }
				country_event = { id = ukraine_landreform.6 days = 75 }
				country_event = { id = ukraine_landreform.7 days = 90 }
				set_country_flag = UKRLR1
			}
			10 = {
				modifier = { factor = 0 has_country_flag = UKRLR2 }
				country_event = { id = ukraine_landreform.9 days = 30 }
				country_event = { id = ukraine_landreform.10 days = 55 }
				country_event = { id = ukraine_landreform.11 days = 80 }
				country_event = { id = ukraine_landreform.8 days = 95 }
				set_country_flag = UKRLR2
			}
			10 = {
				modifier = { factor = 0 has_country_flag = UKRLR3 }
				country_event = { id = ukraine_landreform.14 days = 20 }
				country_event = { id = ukraine_landreform.15 days = 45 }
				country_event = { id = ukraine_landreform.13 days = 70 }
				country_event = { id = ukraine_landreform.12 days = 85 }
				set_country_flag = UKRLR3
			}
			10 = {
				modifier = { factor = 0 has_country_flag = UKRLR4 }
				country_event = { id = ukraine_landreform.19 days = 35 }
				country_event = { id = ukraine_landreform.18 days = 60 }
				country_event = { id = ukraine_landreform.16 days = 85 }
				country_event = { id = ukraine_landreform.17 days = 95 }
				set_country_flag = UKRLR4
			}
			10 = {
				modifier = { factor = 0 has_country_flag = UKRLR5 }
				country_event = { id = ukraine_landreform.23 days = 15 }
				country_event = { id = ukraine_landreform.20 days = 40 }
				country_event = { id = ukraine_landreform.21 days = 65 }
				country_event = { id = ukraine_landreform.22 days = 80 }
				set_country_flag = UKRLR5
			}
		}
	}
}

UKR_syndie_revolution_angry_constitution = {
	if = {
		limit = {
			has_idea = UKR_constitution_idea
		}
		swap_ideas = {
			remove_idea = UKR_constitution_idea
			add_idea = UKR_bad_constitution
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_constitution_idea_1
		}
		swap_ideas = {
			remove_idea = UKR_constitution_idea_1
			add_idea = UKR_bad_constitution
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_constitution_idea_2
		}
		swap_ideas = {
			remove_idea = UKR_constitution_idea_2
			add_idea = UKR_bad_constitution
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_constitution_idea_3
		}
		swap_ideas = {
			remove_idea = UKR_constitution_idea_3
			add_idea = UKR_bad_constitution
		}
	}
}

UKR_syndie_reduce_petlurite_resistance = {
	add_popularity = {
		ideology = social_democrat
		popularity = -0.03
	}
	if = {
		limit = {
			has_idea = UKR_petliurites1
		}
		swap_ideas = {
			remove_idea = UKR_petliurites1
			add_idea = UKR_petliurites2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_petliurites2
		}
		swap_ideas = {
			remove_idea = UKR_petliurites2
			add_idea = UKR_petliurites3
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_petliurites3
		}
		swap_ideas = {
			remove_idea = UKR_petliurites3
			add_idea = UKR_petliurites4
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_petliurites4
		}
		swap_ideas = {
			remove_idea = UKR_petliurites4
			add_idea = UKR_petliurites5
		}
	}
}

UKR_syndie_khvyliovyi_buff = {
	if = {
		limit = {
			has_idea_with_trait = KR_idealistic_communard1
		}
		remove_trait = {
			character = UKR_mykola_khvyliovyi
			slot = political_advisor
			trait = KR_idealistic_communard1
		}
		add_trait = {
			character = UKR_mykola_khvyliovyi
			slot = political_advisor
			trait = KR_idealistic_communard2
		}
	}
	else_if = {
		limit = {
			has_idea_with_trait = KR_idealistic_communard2
		}
		remove_trait = {
			character = UKR_mykola_khvyliovyi
			slot = political_advisor
			trait = KR_idealistic_communard2
		}
		add_trait = {
			character = UKR_mykola_khvyliovyi
			slot = political_advisor
			trait = KR_idealistic_communard3
		}
	}
	else_if = {
		limit = {
			has_idea_with_trait = KR_idealistic_communard3
		}
		remove_trait = {
			character = UKR_mykola_khvyliovyi
			slot = political_advisor
			trait = KR_idealistic_communard3
		}
		add_trait = {
			character = UKR_mykola_khvyliovyi
			slot = political_advisor
			trait = KR_idealistic_communard4
		}
	}
	else_if = {
		limit = {
			has_idea_with_trait = KR_idealistic_communard4
		}
		remove_trait = {
			character = UKR_mykola_khvyliovyi
			slot = political_advisor
			trait = KR_idealistic_communard4
		}
		add_trait = {
			character = UKR_mykola_khvyliovyi
			slot = political_advisor
			trait = KR_idealistic_communard5
		}
	}
}

UKR_unlock_integration = {
	ROOT = {
		218 = { enable_state_integration_50_compliance = yes } #Rostov
		custom_effect_tooltip = tooltip_white_line
		234 = { enable_state_integration_50_compliance = yes } #Ekaterinodar
		custom_effect_tooltip = tooltip_white_line
		1006 = { enable_state_integration_50_compliance = yes } #Novorossiyk
		custom_effect_tooltip = tooltip_white_line
		220 = { enable_state_integration_80_compliance = yes } #Kursk
		custom_effect_tooltip = tooltip_white_line
		240 = { enable_state_integration_80_compliance = yes } #Belgorod
		custom_effect_tooltip = tooltip_white_line
		260 = { enable_state_integration_80_compliance = yes } #Voronezh
		custom_effect_tooltip = tooltip_white_line
	}
}

MIE_promote_oststaat = {
	get_current_government_type = yes
	if = {
		limit = { has_autonomy_state = kr_oststaat }
		GER = {
			set_autonomy = {
				target = UKR
				autonomy_state = kr_oststaat_autonomous
				end_wars = no
			}
		}
	}
	else_if = {
		limit = { has_autonomy_state = kr_oststaat_autonomous }
		GER = {
			GER = { end_puppet = UKR }
		}
	}
	restore_previous_government_type = yes
}

UKR_remove_hetmanate = {
	UKR_pavlo_skoropadskyi = { set_nationality = XXA }
	UKR_danylo_skoropadskyi = { set_nationality = XXA }
	UKR_dmytro_doroshenko = {
		add_country_leader_role = {
			country_leader = { ideology = authoritarian_democrat_subtype }
			promote_leader = yes
		}
	}
	UKR_kostiantyn_prisovskyi = {
		add_country_leader_role = {
			country_leader = { ideology = paternal_autocrat_subtype }
			promote_leader = yes
		}
	}
}

UKR_puppet_setup = {
	if = {
		limit = { tag = GER }
		set_autonomy = {
			target = UKR
			autonomy_state = kr_oststaat
		}
	}
	var:tag_to_release = {
		drop_cosmetic_tag = yes
		set_party_name = {
			ideology = market_liberal
			long_name = UKR_market_liberal_party_long2
			name = UKR_market_liberal_party2
		}
		UKR_oleksandr_shulhyn = {
			add_country_leader_role = {
				country_leader = { ideology = market_liberal_subtype }
				promote_leader = yes
			}
		}
		set_country_flag = black_monday_over
		set_country_flag = UKR_revolt_over
		if = {
			limit = { is_monarchy = no }
			UKR_clear_hetmanist_ideas = yes
		}
		else = { UKR_clear_republic_ideas = yes }
		if = {
			limit = { has_socialist_government = no }
			retire_character = UKR_yurii_tiutiunnyk
			retire_character = UKR_omelian_volokh
			retire_character = FRA_nestor_makhno
		}
		if = {
			limit = {
				ROOT = {
					has_socialist_government = no
					has_left_democratic_government = no
					NOT = { tag = AUS }
				}
			}
			XXA = {
				if = {
					limit = { has_character = UKR_pavlo_skoropadskyi }
					UKR_pavlo_skoropadskyi = { set_nationality = UKR }
				}
				if = {
					limit = { has_character = UKR_kostiantyn_prisovskyi }
					UKR_kostiantyn_prisovskyi = { set_nationality = UKR }
				}
			}
		}
		else_if = {
			limit = { tag = AUS }
			if = {
				limit = { has_character = UKR_kostiantyn_prisovskyi }
				UKR_kostiantyn_prisovskyi = { set_nationality = UKR }
			}
		}
		if = {
			limit = { has_government = national_populist }
			set_country_flag = UKR_LUN_tree
			clr_country_flag = UKR_authdem_tree
			clr_country_flag = UKR_SHD_tree
			clr_country_flag = UKR_UNR_tree
			clr_country_flag = UKR_danylo_tree
		}
		else_if = {
			limit = {
				has_conservative_government = yes
				NOT = { UKR = { is_puppet_of = AUS } }
			}
			set_country_flag = UKR_authdem_tree
			clr_country_flag = UKR_LUN_tree
			clr_country_flag = UKR_SHD_tree
			clr_country_flag = UKR_UNR_tree
			clr_country_flag = UKR_danylo_tree
			complete_national_focus = UKR_fall_of_uskhd
		}
		else_if = {
			limit = {
				has_government = paternal_autocrat
				NOT = { UKR = { is_puppet_of = AUS } }
			}
			set_country_flag = UKR_SHD_tree
			clr_country_flag = UKR_authdem_tree
			clr_country_flag = UKR_LUN_tree
			clr_country_flag = UKR_UNR_tree
			clr_country_flag = UKR_danylo_tree
		}
		else_if = {
			limit = {
				OR = {
					has_government = social_liberal
					UKR = { is_puppet_of = AUS }
				}
			}
			set_country_flag = UKR_UNR_tree
			clr_country_flag = UKR_authdem_tree
			clr_country_flag = UKR_SHD_tree
			clr_country_flag = UKR_LUN_tree
			clr_country_flag = UKR_danylo_tree
			complete_national_focus = UKR_a_radical_touch
		}
		else_if = {
			limit = {
				has_government = social_democrat
				UKR = { is_puppet_of = AUS }
			}
			set_country_flag = UKR_UNR_tree
			clr_country_flag = UKR_authdem_tree
			clr_country_flag = UKR_SHD_tree
			clr_country_flag = UKR_LUN_tree
			clr_country_flag = UKR_danylo_tree
			complete_national_focus = UKR_ascension_of_the_workers_party
		}
		else_if = {
			limit = { has_government = radical_socialist }
			set_country_flag = UKR_UNR_tree
			clr_country_flag = UKR_authdem_tree
			clr_country_flag = UKR_SHD_tree
			clr_country_flag = UKR_LUN_tree
			clr_country_flag = UKR_danylo_tree
			complete_national_focus = UKR_fight_and_you_will_overcome
		}
		else_if = {
			limit = {
				OR = {
					has_government = syndicalist
					has_government = totalist
				}
			}
			set_country_flag = UKR_UNR_tree
			clr_country_flag = UKR_authdem_tree
			clr_country_flag = UKR_SHD_tree
			clr_country_flag = UKR_LUN_tree
			clr_country_flag = UKR_danylo_tree
			complete_national_focus = UKR_fighters_til_the_end
		}
		mark_focus_tree_layout_dirty = yes
	}
}

UKR_refresh_claim_decisions = {
	for_each_scope_loop = {
		array = UKR.UKR_claims_array
		if = {
			limit = {
				NOT = { is_core_of = UKR }
				NOT = { is_claimed_by = UKR }
				OR = {
					owner = { has_war_with = UKR }
					is_controlled_by = UKR
				}
			}
			UKR = { activate_targeted_decision = { decision = UKR_claim_state target = PREV } }
		}
		else = {
			UKR = { remove_targeted_decision = { decision = UKR_claim_state target = PREV } }
		}
	}
}

UKR_add_to_claim_array = {
	add_to_array = { UKR.UKR_claims_array = THIS }
	set_state_flag = UKR_claim_state
}

UKR_remove_from_claim_array = {
	UKR = { remove_targeted_decision = { decision = UKR_claim_state target = PREV } }
	remove_from_array = { UKR.UKR_claims_array = THIS }
	clr_state_flag = UKR_claim_state
}

UKR_update_military = {
	hidden_effect = {
		if = {
			limit = {
				has_completed_focus = UKR_shadow_of_mighty_wings
				NOT = { is_ally_with = GER }
			}
			uncomplete_national_focus = {
				focus = UKR_shadow_of_mighty_wings
				uncomplete_children = yes
			}
		}
		else_if = {
			limit = {
				has_completed_focus = UKR_protection_of_dual_monarchy
				NOT = { is_ally_with = AUS }
			}
			uncomplete_national_focus = {
				focus = UKR_protection_of_dual_monarchy
				uncomplete_children = yes
			}
		}
		else_if = {
			limit = {
				has_completed_focus = UKR_stronghold_of_internationale
				has_socialist_government = no
			}
			uncomplete_national_focus = {
				focus = UKR_stronghold_of_internationale
				uncomplete_children = yes
			}
		}
		else_if = {
			limit = {
				has_completed_focus = UKR_southern_flank_of_revolution
				OR = {
					NOT = { is_in_faction_with = SOV }
					SOV = { is_puppet = yes }
				}
			}
			uncomplete_national_focus = {
				focus = UKR_southern_flank_of_revolution
				uncomplete_children = yes
			}
		}
		else_if = {
			limit = {
				has_completed_focus = UKR_french_technical_expertise
				NOT = { SOV = { is_puppet = yes } }
				is_in_faction_with = SOV
			}
			uncomplete_national_focus = {
				focus = UKR_french_technical_expertise
				uncomplete_children = yes
			}
		}
		mark_focus_tree_layout_dirty = yes
	}
}
