###############################
# Left KMT Focus Tree         #
###############################
# By DSFDarker and Spiderfist #
###############################
# KMT - ESTABLISH BASE TREE   #
###############################

shared_focus = {
	id = CHI_jiangfu
	icon = GFX_goal_generic_fortify_city
	x = 4
	y = 0

	cost = 2

	ai_will_do = { factor = 100 }

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_jiangfu"
		add_political_power = 50
		1046 = {
			add_building_construction = {
				type = bunker
				level = 1
				instant_build = yes
				province = 1006
			}
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 1000
			producer = LEP
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_ruijin_arsenal
	icon = GFX_focus_generic_military_equipment
	prerequisite = { focus = CHI_jiangfu }
	x = 1
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 4

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 3
			has_war = yes
		}
		modifier = {
			factor = 10
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_ruijin_arsenal"
		add_tech_bonus = {
			name = CHI_ruijin_arsenal
			bonus = 1
			uses = 1
			category = industry
		}
		add_offsite_building = { type = arms_factory level = 1 }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_literacy_programs
	icon = GFX_focus_research
	prerequisite = { focus = CHI_jiangfu }
	x = -1
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 3
			has_war = no
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_literacy_programs"
		add_research_slot_until_five = yes
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_strike_AOG
	icon = GFX_goal_LEC_strikeAOG
	prerequisite = { focus = CHI_ruijin_arsenal }
	x = -1
	y = 1
	relative_position_id = CHI_ruijin_arsenal

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.5
			controls_state = 802 # Xiamen
		}
		modifier = {
			factor = 2
			controls_state = 803 # Wenzhou
		}
		modifier = {
			factor = 2
			controls_state = 1075 # Nantong
		}
	}

	available = {
		OR = {
			controls_state = 592 # Guangzhou
			controls_state = 744 # Qingdao
			controls_state = 802 # Xiamen
			controls_state = 803 # Wenzhou
			controls_state = 1075 # Nantong

			controls_state = 728 # Guangzhouwan
			controls_state = 996 # Weihaiwei
		}
		is_subject = no
	}

	continue_if_invalid = yes

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_strike_AOG"
		add_stability = -0.05
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 1000
			producer = GEA
		}
		GER = {
			add_opinion_modifier = {
				target = CHI
				modifier = KR_CHI_violated_AOG
			}
		}
		GEA = {
			add_opinion_modifier = {
				target = CHI
				modifier = KR_CHI_violated_AOG
			}
		}
	}
}

shared_focus = {
	id = CHI_consolidate_control
	icon = GFX_Goal_Kuomintang_Government_Initiative
	prerequisite = { focus = CHI_ruijin_arsenal }
	x = 0
	y = 2
	relative_position_id = CHI_ruijin_arsenal

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.5
			controls_state = 1044 # Nanchang
		}
		modifier = {
			factor = 2
			controls_state = 596 # Qiantang
		}
		modifier = {
			factor = 2
			controls_state = 606 # Anqing
		}
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		controls_state = 613 # Nanjing
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_consolidate_control"
		add_war_support = -0.05
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 500
			producer = LEP
		}
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_est_navy
	icon = GFX_goal_generic_navy_cruiser
	prerequisite = {
		focus = CHI_consolidate_control
		focus = CHI_strike_AOG
	}
	x = -1
	y = 1
	relative_position_id = CHI_consolidate_control

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		OR = {
			has_full_control_of_state = 743
			has_full_control_of_state = 744
			has_full_control_of_state = 746
			has_full_control_of_state = 747
			has_full_control_of_state = 801
			has_full_control_of_state = 802
			has_full_control_of_state = 803
			has_full_control_of_state = 996
			has_full_control_of_state = 1075
		}
		is_subject = no
	}

	bypass = {
		has_equipment = {
			convoy_1 > 100
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_est_navy"
		add_equipment_to_stockpile = {
			type = convoy_1
			amount = 30
			producer = GEA
		}
	}
}

shared_focus = {
	id = CHI_jiangxi_rail
	icon = GFX_goal_generic_seize_railway
	prerequisite = { focus = CHI_consolidate_control }
	x = 1
	y = 1
	relative_position_id = CHI_consolidate_control

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		owns_state = 1067
		owns_state = 1044
		owns_state = 1045
		owns_state = 596
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_jiangxi_rail"
		1067 = { # Jinhua
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}

		build_railway = {
			path = { 7191 11991 12059 11920 9944 1066 7054 4038 3992 7653 1628 }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

	###########################################
	## KMT - Provisional Civil Admin Subtree ##

shared_focus = {
	id = CHI_provisional_code
	icon = GFX_focus_generic_treaty
	prerequisite = { focus = CHI_jiangfu }
	x = -3
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	available = {
		is_subject = no
		has_country_flag = CHI_first_congress_completed
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_provisional_code"
		custom_effect_tooltip = CHI_integration_time_down_tt
		add_timed_idea = {
			idea = CHI_provisional_code_idea
			days = 365
		}
		add_stability = 0.1
	}
}

shared_focus = {
	id = CHI_expropriate_landlords
	icon = GFX_focus_generic_oppression
	prerequisite = { focus = CHI_provisional_code }
	mutually_exclusive = { focus = CHI_land_rent_caps }
	x = -1
	y = 1
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expropriate_landlords"
		add_ideas = KR_focus_CHI_land_rent1
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CHI_land_rent_caps
	icon = GFX_goal_generic_forceful_treaty
	prerequisite = { focus = CHI_provisional_code }
	mutually_exclusive = { focus = CHI_expropriate_landlords }
	x = 1
	y = 1
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_land_rent_caps"
		add_ideas = KR_focus_CHI_land_rent2
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CHI_land_tax
	icon = GFX_focus_AUS_agriculture
	prerequisite = {
		focus = CHI_expropriate_landlords
		focus = CHI_land_rent_caps
	}
	x = 0
	y = 2
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_land_tax"
		decrease_CHI_popular_support = yes
		custom_effect_tooltip = CHI_land_tax_tt
		random_state = {
			limit = {
				is_valid_state_for_development = yes
				is_core_of = CHI
				is_controlled_by = owner
			}
			increase_state_category_by_one_level = yes #land reform
		}
		if = {
			limit = {
				CHI_gu_mengyu = {
					is_political_advisor = yes
				}
			}
			random_state = {
				limit = {
					is_valid_state_for_development = yes
					is_core_of = CHI
					is_controlled_by = owner
				}
				increase_state_category_by_one_level = yes #land reform
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.05
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_opium_prohibition
	icon = GFX_goal_generic_political_pressure
	prerequisite = { focus = CHI_land_tax }
	mutually_exclusive = { focus = CHI_opium_tax }
	x = -1
	y = 1
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_opium_prohibition"
		add_ideas = KR_focus_CHI_opium1
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_opium_tax
	icon = GFX_goal_opium
	prerequisite = { focus = CHI_land_tax }
	mutually_exclusive = { focus = CHI_opium_prohibition }
	x = 1
	y = 1
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_opium_tax"
		decrease_CHI_popular_support = yes
		add_ideas = KR_focus_CHI_opium2
		add_offsite_building = {
			type = industrial_complex
			level = 1
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_gannan_deal
	icon = GFX_goal_generic_construct_civ_factory
	prerequisite = {
		focus = CHI_opium_tax
		focus = CHI_opium_prohibition
	}
	x = 0
	y = 2
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = { factor = 15 }

	available = {
		has_full_control_of_state = 600
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_gannan_deal"
		increase_CHI_popular_support = yes
		600 = { # Yuzhang
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		600 = { #Yuzhang
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = CHI_gannan_deal_tt
		if = {
			limit = {
				CHI_chiang_ching_kuo = {
					is_political_advisor = yes
				}
			}
			add_timed_idea = {
				idea = CHI_gannan_deal_idea
				days = 100
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

	#####################################
	## KMT - Warlord Diplomacy Subtree ##

shared_focus = {
	id = CHI_yangste_offensive
	icon = GFX_focus_ETH_freedom_at_gunpoint
	prerequisite = { focus = CHI_jiangfu }
	relative_position_id = CHI_jiangfu
	x = 3
	y = 1

	cost = 2

	ai_will_do = {
		factor = 45
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
	}

	available = {
		is_subject = no
		can_declare_war_on = SQI
	}

	bypass = {
		OR = {
			NOT = { country_exists = SQI }
			SQI = { is_subject = yes }
			SQI = { is_in_faction = yes }
		}
	}

	will_lead_to_war_with = SQI

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_yangste_offensive"
		create_wargoal = {
			type = annex_everything
			target = SQI
		}
	}
}

shared_focus = {
	id = CHI_expat_contacts
	icon = GFX_LEC_Smugglers
	prerequisite = { focus = CHI_yangste_offensive }
	x = -1
	y = 1
	relative_position_id = CHI_yangste_offensive

	cost = 5

	ai_will_do = { factor = 10 }

	available = {
		owns_state = 613 # Nanjing
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expat_contacts"
		add_political_power = 50
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 250
			producer = USA
		}
		CHI_sun_fo = {
			add_advisor_role = {
				advisor = {
					slot = political_advisor
					idea_token = CHI_sun_fo_token
					traits = { KR_compassionate_gentleman }
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_establish_propaganda
	icon = GFX_goal_focus_chain_army
	prerequisite = { focus = CHI_yangste_offensive }
	x = 1
	y = 1
	relative_position_id = CHI_yangste_offensive

	cost = 5

	ai_will_do = { factor = 10 }

	available = {
		is_subject = no

	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_establish_propaganda"
		add_war_support = 0.05
		add_stability = -0.1
		add_timed_idea = {
			idea = CHI_propaganda_department_idea
			days = 365
		}
		custom_effect_tooltip = CHI_establish_propagnda_tt
		if = {
			limit = {
				CHI_zhou_enlai = {
					is_political_advisor = yes
				}
			}
			army_experience = 25
			add_command_power = 20
		}
	}
}
shared_focus = {
	id = CHI_work_with_underground
	icon = GFX_goal_LEC_triads
	prerequisite = {
		focus = CHI_establish_propaganda
	}
	cost = 5
	relative_position_id = CHI_establish_propaganda
	x = 0
	y = 2
	ai_will_do = { factor = 10 }
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_work_with_underground"
		add_political_power = -50
		add_popularity = {
			ideology = totalist
			popularity = 0.05
		}
		if = {
			limit = { has_dlc_lar = yes }
			if = {
				limit = { has_intelligence_agency = no }
				create_intelligence_agency = yes
			}
			if = {
				limit = { NOT = { has_done_agency_upgrade = upgrade_commando_training } }
				upgrade_intelligence_agency = upgrade_commando_training
			}
			else = {
				gain_random_agency_upgrade = yes
			}
			if = {
				limit = { NOT = { has_done_agency_upgrade = upgrade_decryption_boost } }
				upgrade_intelligence_agency = upgrade_decryption_boost
			}
			else = {
				gain_random_agency_upgrade = yes
			}
			if = {
				limit = { NOT = { has_done_agency_upgrade = upgrade_form_department } }
				upgrade_intelligence_agency = upgrade_form_department
			}
			else = {
				gain_random_agency_upgrade = yes
			}
		}
		else = {
			add_ideas = CHI_spy_idea
		}
		custom_effect_tooltip = tooltip_white_line
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = CHI_dai_chunfeng_political_advisor
	}
}

shared_focus = {
	id = CHI_VNQDD_liaisons
	icon = GFX_INC_female_soldiers
	prerequisite = { focus = CHI_establish_propaganda focus = CHI_expat_contacts }
	relative_position_id = CHI_yangste_offensive

	x = 0
	y = 2

	cost = 6

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			INC = { has_same_government_as_ROOT = yes }
		}
		modifier = {
			factor = 0.5
			INC = { has_same_government_as_ROOT = no }
		}
	}

	available = {
		country_exists = INC
		NOT = { has_war_with = INC }
		is_subject = no
	}

	bypass = {
		has_war_with = INC
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_VNQDD_liaisons"
		country_event = { id = chi_for.54 days = 1 }
	}
}

	###############################
	## KMT - MILITARY FOCUS TREE ##
	###############################

	########################
	## KMT - Army Subtree ##

shared_focus = {
	id = CHI_form_army
	icon = GFX_goal_CHI_form_2nd_NRA
	x = 16
	y = 0

	cost = 2

	ai_will_do = { factor = 50 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_form_army"
		add_command_power = 25
		add_doctrine_cost_reduction = {
			name = CHI_form_army
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		custom_effect_tooltip = CHI_2nd_NRA_units_tt
		hidden_effect = {
			division_template = {
				name = "Guomin geming jun di shijiu lu jun" #The 19th Route Army
				division_names_group = CHI_MIL_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 1046 }
				limit = {
					is_in_home_area = yes
					impassable = no
				}
				create_unit = {
					division = "name = \"Guomin geming jun di shijiu lu jun\" division_template = \"Guomin geming jun di shijiu lu jun\" start_experience_factor = 0.9"
					prioritize_location = 1046
					owner = ROOT
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_regional_militias
	icon = GFX_goal_agrarian_soldiers
	prerequisite = { focus = CHI_form_army }
	mutually_exclusive = { focus = CHI_one_army }
	x = -3
	y = 1
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 60
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_regional_militias"
		custom_effect_tooltip = CHI_regional_militias_units_tt
		hidden_effect = {
			division_template = {
				name = "Di San Zhidui"
				division_names_group = CHI_MIL_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 1046 }
				limit = {
					is_in_home_area = yes
					impassable = no
				}
				create_unit = {
					division = "name = \"Di San Zhidui\" division_template = \"Di San Zhidui\" start_experience_factor = 0.75" #The 3rd Detachment
					prioritize_location = 1046
					owner = ROOT
				}
			}
			division_template = {
				name = "Di Si Zhidui"
				division_names_group = CHI_MIL_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 1046 }
				limit = {
					is_in_home_area = yes
					impassable = no
				}
				create_unit = {
					division = "name = \"Di Si Zhidui\" division_template = \"Di San Zhidui\" start_experience_factor = 0.75" #The Fourth Detachment - uses same template as the 3rd Detachment
					prioritize_location = 1046
					owner = ROOT
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_one_army
	icon = GFX_focus_SOV_penal_battalions
	prerequisite = { focus = CHI_form_army }
	mutually_exclusive = { focus = CHI_regional_militias }
	x = -1
	y = 1
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 60
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_one_army"
		army_experience = 30
		add_ideas = CHI_centralised_command
	}
	search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_revolutionary_spirit
	icon = GFX_goal_reform_socialist_army
	prerequisite = {
		focus = CHI_regional_militias
		focus = CHI_one_army
	}
	x = 0
	y = 2
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 4
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_revolutionary_spirit"
		add_ideas = CHI_revolutionary_spirit_idea
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }

}

shared_focus = {
	id = CHI_tigress_battalions
	icon = GFX_goal_CHI_tigress_battalions
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	x = -1
	y = 1
	relative_position_id = CHI_regional_militias
	cost = 5

	ai_will_do = {
		factor = 4
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_tigress_battalions"
		division_template = {
			name = "Hongse Niangzi Jun"
			division_names_group = CHI_MIL_01
			regiments = {
				irregular_infantry = { x = 0 y = 0 }
				irregular_infantry = { x = 0 y = 1 }
				irregular_infantry = { x = 1 y = 0 }
				irregular_infantry = { x = 1 y = 1 }
			}
		}
		random_owned_controlled_state = {
			prioritize = { 1046 }
			limit = {
				is_in_home_area = yes
				impassable = no
			}
			create_unit = {
				division = "name = \"Hongse Niangzi Jun\" division_template = \"Hongse Niangzi Jun\" start_experience_factor = 0.3"
				prioritize_location = 1046
				owner = ROOT
			}
		}
		add_war_support = 0.1
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_peoples_army
	icon = GFX_goal_integrate_the_militia
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	mutually_exclusive = { focus = CHI_modern_divisions }
	x = 0
	y = 2
	relative_position_id = CHI_regional_militias

	cost = 8

	ai_will_do = { factor = 66 }

	available = {
		has_country_flag = CHI_prioritize_manpower
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_peoples_army"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
		}
		add_doctrine_cost_reduction = {
			name = CHI_peoples_army
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		hidden_effect = {
			CHI_dai_anlan = {
				remove_theorist_role = yes
			}
		}
		custom_effect_tooltip = CHI_NRA_peoples_army_tt
		add_to_variable = { CHI_NRA_irregular_infantry_attack_factor = 0.15 }
		add_to_variable = { CHI_NRA_irregular_infantry_defence_factor = 0.15 }
		add_to_variable = { CHI_NRA_land_night_attack = 0.1 }
		add_ideas = KR_focus_CHI_mass_production1
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_modern_divisions
	icon = GFX_goal_ENG_officer_corps
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	mutually_exclusive = { focus = CHI_peoples_army }
	x = 0
	y = 2
	relative_position_id = CHI_one_army

	cost = 8

	ai_will_do = { factor = 66 }

	available = {
		has_country_flag = CHI_prioritize_modernization
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_modern_divisions"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
		}
		add_doctrine_cost_reduction = {
			name = CHI_modern_divisions
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		hidden_effect = {
			CHI_su_yu = {
				remove_theorist_role = yes
			}
		}
		custom_effect_tooltip = CHI_NRA_modern_divisions_tt
		add_to_variable = { CHI_NRA_planning_speed = 0.1 }
		add_to_variable = { CHI_NRA_max_planning = 0.1 }
		add_to_variable = { CHI_NRA_experience_gain_factor = 0.05 }
		add_to_variable = { CHI_NRA_infantry_attack_factor = 0.1 }
		add_to_variable = { CHI_NRA_infantry_defense_factor = 0.1 }
		add_ideas = KR_focus_CHI_modern_art_of_war1
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_mountain_warfare
	icon = GFX_goal_generic_mountain_warfare2
	prerequisite = { focus = CHI_peoples_army }
	x = -1
	y = 1
	relative_position_id = CHI_peoples_army

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mountain_warfare"
		custom_effect_tooltip = mountain_training_tech_effect
		hidden_effect = {
			set_technology = { mountain_training_tech = 1 popup = no }
		}
		add_tech_bonus = {
			name = CHI_mountain_infantry
			bonus = 1
			uses = 1
			category = mountaineers_tech
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_dare_to_die
	icon = GFX_goal_CHI_peoples_army
	prerequisite = { focus = CHI_peoples_army focus = CHI_modern_divisions }
	x = -2
	y = 2
	relative_position_id = CHI_revolutionary_spirit

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_dare_to_die"
		add_war_support = 0.10
		custom_effect_tooltip = CHI_NRA_dare_to_die_tt
		add_to_variable = { CHI_NRA_army_org_factor = 0.05 }
		add_to_variable = { CHI_NRA_irregular_infantry_max_org_factor = 0.1 }
		add_to_variable = { CHI_NRA_partisan_effect = 0.15 }
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}

shared_focus = {
	id = CHI_air_land_integration
	icon = GFX_goal_generic_air_CAS_russian
	prerequisite = {
		focus = CHI_flexible_aircraft
		focus = CHI_heavy_airframes
	}
	prerequisite = { focus = CHI_modern_divisions }
	x = 1
	y = 1
	relative_position_id = CHI_modern_divisions

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_air_land_integration"
		add_equipment_to_stockpile = {
			type = small_plane_cas_airframe
			amount = 50
			producer = ENG
		}
		add_ideas = CHI_air_support
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_expand_the_supply_corps
	icon = GFX_focus_SOV_the_road_of_life
	prerequisite = { focus = CHI_peoples_army }
	prerequisite = { focus = CHI_mountain_warfare focus = CHI_dare_to_die }
	x = 0
	y = 2
	relative_position_id = CHI_peoples_army

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expand_the_supply_corps"
		army_experience = 10
		custom_effect_tooltip = CHI_NRA_supply_corps_factor_tt
		add_to_variable = { CHI_NRA_supply_corps_factor = -0.05 }
		add_to_variable = { CHI_NRA_training_time_factor = -0.1 }
		add_tech_bonus = {
			name = CHI_mechanized_warfare
			bonus = 1
			uses = 1
			category = motorized_equipment
		}
		swap_ideas = {
			remove_idea = KR_focus_CHI_mass_production1
			add_idea = KR_focus_CHI_mass_production2
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = CHI_mechanized_warfare
	icon = GFX_goal_generic_army_motorized
	prerequisite = { focus = CHI_modern_divisions }
	prerequisite = { focus = CHI_dare_to_die focus = CHI_air_land_integration }
	x = 0
	y = 2
	relative_position_id = CHI_modern_divisions

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mechanized_warfare"
		add_command_power = 30
		add_tech_bonus = {
			name = CHI_mechanized_warfare
			bonus = 1
			uses = 1
			category = motorized_equipment
		}
		custom_effect_tooltip = CHI_NRA_mechanized_tt
		add_to_variable = { CHI_NRA_planning_speed = 0.15 }
		add_to_variable = { CHI_NRA_max_planning = 0.15 }
		add_to_variable = { CHI_NRA_max_command_power = 10 }
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.1 }
		swap_ideas = {
			remove_idea = KR_focus_CHI_modern_art_of_war1
			add_idea = KR_focus_CHI_modern_art_of_war2
		}
		hidden_effect = {
			country_event = chi_dom.22
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_encirclement_tactics
	icon = GFX_EGY_Palestine_Defence
	prerequisite = { focus = CHI_expand_the_supply_corps }
	x = -1
	y = 1
	relative_position_id = CHI_expand_the_supply_corps

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_encirclement_tactics"
		army_experience = 50
		custom_effect_tooltip = CHI_NRA_encirclement_tactics_tt
		add_corps_commander_role = {
			character = CHI_nie_rongzhen
			desc = CHI_nie_rongzhen_desc
			traits = { irregulars_officer CHI_left_kmt_officer }
			skill = 2
			attack_skill = 2
			defense_skill = 1
			planning_skill = 1
			logistics_skill = 2
		}
		add_to_variable = { CHI_NRA_special_forces_cap = 0.02 }
		add_to_variable = { CHI_NRA_special_forces_attack_factor = 0.15 }
		add_to_variable = { CHI_NRA_special_forces_defence_factor = 0.15 }
		add_to_variable = { CHI_NRA_irregular_infantry_speed_factor = 0.10 }
		add_to_variable = { CHI_NRA_cas_reduction_factor = 0.15 }

		swap_ideas = {
			remove_idea = KR_focus_CHI_mass_production2
			add_idea = KR_focus_CHI_mass_production3
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = CHI_soul_of_whampoa
	icon = GFX_goal_chinese_national_army
	prerequisite = { focus = CHI_expand_the_supply_corps focus = CHI_mechanized_warfare }
	x = 0
	y = 2
	relative_position_id = CHI_dare_to_die

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_soul_of_whampoa"
		every_unit_leader = {
			add_attack = 1
			add_defense = 1
		}
		hidden_effect = {
			country_event = { id = chi_flavor.13 days = 3 }
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_modern_combined_arms
	icon = GFX_goal_generic_army_superior_firepower
	prerequisite = { focus = CHI_mechanized_warfare }
	x = 1
	y = 1
	relative_position_id = CHI_mechanized_warfare

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_modern_combined_arms"
		add_command_power = 15
		custom_effect_tooltip = CHI_NRA_modern_combined_arms_tt
		add_corps_commander_role = {
			character = CHI_du_yuming
			desc = CHI_du_yuming_desc
			traits = { inflexible_strategist armor_officer organizer career_officer CHI_left_kmt_officer }
			skill = 2
			attack_skill = 2
			defense_skill = 2
			planning_skill = 2
			logistics_skill = 1
		}
		add_advisor_role = {
			character = CHI_du_yuming
			advisor = {
				slot = high_command
				ledger = army
				idea_token = CHI_du_yuming_mhc
				desc = CHI_du_yuming_desc
				traits = { KR_MHC_armoured_1 }
				cost = 50
			}
		}
		add_to_variable = { CHI_NRA_training_time_factor = -0.05 }
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.1 }
		add_to_variable = { CHI_NRA_speed_factor = 0.1 }
		swap_ideas = {
			remove_idea = KR_focus_CHI_modern_art_of_war2
			add_idea = KR_focus_CHI_modern_art_of_war3
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

	##################################
	## KMT - Army Structure Subtree ##

shared_focus = {
	id = CHI_restore_whampoa
	icon = GFX_focus_chi_whampoa_military_academy
	prerequisite = { focus = CHI_form_army }
	x = 5
	y = 1
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	available = {
		has_country_flag = CHI_first_congress_completed
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_restore_whampoa"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
		}
		add_command_power = 25
		army_experience = 50
		add_popularity = { ideology = paternal_autocrat popularity = 0.05 }
		custom_effect_tooltip = CHI_NRA_restore_whampoa_tt
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.075 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
		add_to_variable = { CHI_NRA_army_leader_cost_factor = -0.25 }
		if = {
			limit = { CHI_deng_yanda = { is_second_in_command = yes } }
			hidden_effect = { country_event = { id = chi_flavor.9 days = 5 random_days = 15 } }
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = CHI_nat_air_army
	icon = GFX_goal_chinese_national_air_force
	prerequisite = { focus = CHI_restore_whampoa }
	x = -3
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_nat_air_army"
		air_experience = 50
		custom_effect_tooltip = CHI_NRA_nat_air_army_tt
		add_to_variable = { CHI_NRA_experience_gain_air_factor = 0.1 }
		if = {
			limit = { controls_state = 613 } #Nanjing
			613 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 596 } #Qiantang
			596 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 1044 } #Yuzhang
			1044 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 1046 } #Tingzhang
			1046 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else = {
			random_owned_controlled_state = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_INDUSTRY FOCUS_FILTER_AIRFORCE_BONUS }
}

shared_focus = {
	id = CHI_flexible_aircraft
	icon = GFX_goal_generic_air_fighter_new
	prerequisite = { focus = CHI_nat_air_army }
	mutually_exclusive = { focus = CHI_heavy_airframes }
	x = -1
	y = 1
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_flexible_aircraft"
		add_tech_bonus = {
			name = CHI_flexible_aircraft
			bonus = 1
			uses = 1
			category = light_air
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_heavy_airframes
	icon = GFX_goal_generic_air_bomber_new
	prerequisite = { focus = CHI_nat_air_army }
	mutually_exclusive = { focus = CHI_flexible_aircraft }
	x = 1
	y = 1
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_heavy_airframes"
		add_tech_bonus = {
			name = CHI_heavy_airframes
			bonus = 1
			uses = 1
			category = medium_air
			category = heavy_air
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_build_airfields
	icon = GFX_focus_generic_aircraft_production
	prerequisite = {
		focus = CHI_flexible_aircraft
		focus = CHI_heavy_airframes
	}
	x = 0
	y = 2
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_build_airfields"
		air_experience = 25
		add_doctrine_cost_reduction = {
			name = CHI_build_airfields
			cost_reduction = 0.5
			uses = 1
			category = air_doctrine
		}
	}
	search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIRFORCE_BONUS }
}

shared_focus = {
	id = CHI_naval_aviation
	icon = GFX_goal_generic_air_naval_bomber_new
	prerequisite = { focus = CHI_build_airfields }
	prerequisite = { focus = CHI_coastal_defenses }
	x = 1
	y = 1
	relative_position_id = CHI_build_airfields

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_naval_aviation"
		add_tech_bonus = {
			name = CHI_naval_aviation
			bonus = 1
			uses = 2
			category = naval_air
		}
		add_ideas = CHI_republican_naval_air_idea
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CHI_separate_naval_command
	icon = GFX_goal_chinese_national_navy
	prerequisite = { focus = CHI_restore_whampoa }
	x = 0
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	available = {
		any_owned_state = {
			is_coastal = yes
			is_controlled_by = ROOT
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_separate_naval_command"
		navy_experience = 15
		custom_effect_tooltip = CHI_NRA_separate_naval_command_tt
		add_to_variable = { CHI_NRA_experience_gain_navy_factor = 0.05 }
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						dockyard > 0
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
				}
				any_owned_state = {
					is_coastal = yes
				}
			}
			add_one_random_dockyard = yes
		}
	}
	search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_coastal_fleets
	icon = GFX_focus_generic_destroyer
	available = {
		num_of_naval_factories > 0
	}
	prerequisite = { focus = CHI_separate_naval_command }
	x = 0
	y = 1
	relative_position_id = CHI_separate_naval_command

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_coastal_fleets"
		add_tech_bonus = {
			name = CHI_coastal_fleets
			bonus = 1
			uses = 1
			category = dd_tech
		}
		add_doctrine_cost_reduction = {
			name = CHI_coastal_fleets
			cost_reduction = 0.5
			uses = 1
			category = naval_doctrine
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_coastal_defenses
	icon = GFX_goal_nested_fortifications
	available = {
		num_of_naval_factories > 0
	}
	prerequisite = { focus = CHI_coastal_fleets }
	x = -1
	y = 1
	relative_position_id = CHI_coastal_fleets

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_coastal_defenses"
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				is_in_home_area = yes
				is_coastal = yes
			}
			add_building_construction = {
				type = coastal_bunker
				province = {
					all_provinces = yes
					limit_to_coastal = yes
				}
				level = 2
				instant_build = yes
			}
		}
		custom_effect_tooltip = CHI_NRA_coastal_defenses_tt
		add_to_variable = { CHI_NRA_production_speed_coastal_bunker_factor = 0.15 }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_integrate_beiyang_navy
	icon = GFX_goal_FNG_beiyang_navy
	prerequisite = { focus = CHI_sanmin_commissars }
	prerequisite = { focus = CHI_coastal_fleets }
	x = 1
	y = 1
	relative_position_id = CHI_coastal_fleets

	cost = 8

	available = {
		NOT = {
			country_exists = QIE
			country_exists = FNG
		}
	}

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_integrate_beiyang_navy"
		navy_experience = 50
		add_doctrine_cost_reduction = {
			name = CHI_coastal_fleets
			cost_reduction = 0.5
			uses = 1
			category = naval_doctrine
		}
		country_event = { id = chi_flavor.14 }
	}
	search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CHI_new_dockyards
	icon = GFX_goal_generic_naval_industry
	prerequisite = {
		focus = CHI_integrate_beiyang_navy
		focus = CHI_special_methods_division
	}
	x = 1
	y = 1
	relative_position_id = CHI_integrate_beiyang_navy
	cost = 8
	ai_will_do = { factor = 10 }
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_new_dockyards"
		custom_effect_tooltip = CHI_new_dockyards_tt
		1046 = { #Tingzheng
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
		}
		if = {
			limit = {
				owns_state = 743  #Shanghai
			}
			743 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_NAVY_BONUS }
}

shared_focus = {
	id = CHI_submarine_doctrine
	icon = GFX_goal_generic_navy_submarine
	available = {
		num_of_naval_factories > 0
	}
	prerequisite = { focus = CHI_coastal_fleets }
	x = 0
	y = 2
	relative_position_id = CHI_coastal_fleets

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_submarine_doctrine"
		add_doctrine_cost_reduction = {
			name = CHI_submarine_doctrine
			cost_reduction = 0.5
			uses = 2
			category = naval_doctrine
		}
		add_tech_bonus = {
			name = CHI_submarine_doctrine
			bonus = 1
			uses = 1
			category = ss_tech
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CHI_contest_ijn
	icon = GFX_goal_kmt_contest_the_japanese_fleet
	prerequisite = {
		focus = CHI_submarine_doctrine
	}
	prerequisite = {
		focus = CHI_new_dockyards
	}
	x = 1
	y = 1
	relative_position_id = CHI_submarine_doctrine
	cost = 8
	ai_will_do = { factor = 10 }
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_contest_ijn"
		custom_effect_tooltip = CHI_contest_ijn_tt
		if = {
			limit = {
				KOR = {
					is_puppet_of = CHI
				}
				has_tech = radio_detection
			}
			525 = { #South Korea
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = radar_station
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = {
				has_tech = radio_detection
				owns_state = 745
			}
			745 = { #Port Arthur
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = radar_station
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = {
				has_tech = radio_detection
				owns_state = 1065
			}
			1065 = { #Jiaodong
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = radar_station
					level = 2
					instant_build = yes
				}
			}
		}
		add_tech_bonus = {
			name = CHI_contest_ijn
			bonus = 1
			uses = 2
			category = tp_tech
		}
	}

}

shared_focus = {
	id = CHI_naval_infantry
	icon = GFX_goal_generic_marines2
	available = {
		num_of_naval_factories > 0
	}
	prerequisite = { focus = CHI_coastal_defenses }
	x = 0
	y = 2
	relative_position_id = CHI_coastal_defenses

	cost = 8

	ai_will_do = {
		factor = 4
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_naval_infantry"
		add_tech_bonus = {
			name = CHI_naval_infantry
			bonus = 1
			uses = 1
			category = marine_tech
		}
		add_ideas = CHI_marine_corps_idea
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CHI_navy_of_revolution
	icon = GFX_goal_generic_socialist_army
	prerequisite = {
		focus = CHI_naval_infantry
	}
	prerequisite = {
		focus = CHI_contest_ijn
	}
	x = 1
	y = 1
	relative_position_id = CHI_naval_infantry
	cost = 8
	ai_will_do = { factor = 10 }
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_navy_of_revolution"
		add_timed_idea = {
			idea = CHI_revolutionary_navy_idea
			days = 365
		}
	}

}

shared_focus = {
	id = CHI_military_affairs_cmsn
	icon = GFX_goal_CHI_military_affairs_cmsn
	prerequisite = { focus = CHI_restore_whampoa }
	x = 3
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_military_affairs_cmsn"
		army_experience = 10
		add_doctrine_cost_reduction = {
			name = CHI_military_affairs_cmsn
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		custom_effect_tooltip = CHI_NRA_military_affairs_cmsn_tt
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.075 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
		add_to_variable = { CHI_NRA_army_leader_cost_factor = -0.25 }
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_RESEARCH FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = CHI_sanmin_commissars
	icon = GFX_goal_generic_join_faction
	prerequisite = { focus = CHI_military_affairs_cmsn }
	x = 0
	y = 1
	relative_position_id = CHI_military_affairs_cmsn

	cost = 8

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_sanmin_commissars"
		add_political_power = 50
		custom_effect_tooltip = CHI_NRA_sanmin_commissars_tt
		add_to_variable = { CHI_NRA_experience_loss_factor = -0.15 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_special_methods_division
	icon = GFX_goal_secret_agents
	prerequisite = {
		focus = CHI_sanmin_commissars
	}
	x = 0
	y = 1
	relative_position_id = CHI_sanmin_commissars

	cost = 8

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_special_methods_division"
		add_popularity = { ideology = totalist popularity = 0.05 }
		if = {
			limit = { NOT = { has_tech = tech_military_police } }
			set_technology = { tech_military_police = 1 }
		}
		else = {
			add_tech_bonus = {
				name = CHI_special_methods_division
				bonus = 1
				uses = 1
				technology = tech_military_police2
				technology = tech_military_police3
				technology = tech_military_police4
			}
		}
		add_tech_bonus = {
			name = CHI_special_methods_division
			bonus = 1
			uses = 1
			category = radar_tech
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

	#####################################################
	## KMT - TRANSITION TO REGIONAL POWER MISC FOCUSES ##
	#####################################################

shared_focus = {
	id = CHI_1st_congress
	icon = GFX_goal_CHI_YUN_reconcile
	prerequisite = { focus = CHI_est_navy }
	prerequisite = { focus = CHI_jiangxi_rail }
	x = 5
	y = 6

	cancelable = no

	cost = 6

	ai_will_do = { factor = 120 }

	available = {
		owns_state = 613
		NOT = { country_exists = LEP }
		NOT = { country_exists = ANQ }
	}

	select_effect = {
		log = "[GetDateText]: [Root.GetName]: Select Focus CHI_1st_congress"
		country_event = { id = chi_cng.1 days = 3 }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_1st_congress"
		add_war_support = -0.25
		set_cosmetic_tag = CHI_government
		set_capital = { state = 613 remember_old_capital = no } #Nanjing becomes capital
		custom_effect_tooltip = tooltip_white_line
		every_owned_state = {
			limit = {
				OR = {
					is_core_of = LEP
					is_core_of = ANQ
					is_core_of = SQI
				}
				has_resistance = yes
			}
			add_compliance = 15
		}
		custom_effect_tooltip = china_can_core_through_compliance
		hidden_effect = {
			set_potential_national_government = yes
			add_to_array = { china_possible_allies_array_northwest = XSM }
			add_to_array = { china_possible_allies_array_northwest = SIK }
		}
	}
}

	#############################
	## KMT - REVIVE CHINA TREE ##
	#############################

shared_focus = {
	id = CHI_revive_china
	icon = GFX_goal_CHI_revive_china
	prerequisite = {
		focus = CHI_1st_congress
	}
	x = 1
	y = 7

	cost = 8

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_revive_china"
		add_tech_bonus = {
			name = CHI_revive_china
			bonus = 1
			uses = 2
			category = industry
		}
		613 = { #Nanjing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_national_RC
	icon = GFX_goal_CHI_choose_capital
	prerequisite = { focus = CHI_revive_china }
	x = -1
	y = 1
	relative_position_id = CHI_revive_china

	cost = 8

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_national_RC"
		custom_effect_tooltip = CHI_national_RC_category_tt
		add_tech_bonus = {
			name = CHI_national_RC
			bonus = 1
			uses = 1
			category = industry
		}
		capital_scope = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		activate_targeted_decision = { target = THIS decision = CHI_dec_pop_industrialise }
		activate_targeted_decision = { target = 613 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 606 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 620 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 650 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 602 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 593 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 608 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 743 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 597 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 1062 decision = CHI_dec_civ_industrialise }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_natl_dockyard
	icon = GFX_goal_generic_construct_naval_dockyard
	prerequisite = { focus = CHI_national_RC }
	x = 0
	y = 1
	relative_position_id = CHI_national_RC

	cost = 8

	ai_will_do = {
		factor = 25
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_natl_dockyard"
		activate_targeted_decision = { target = 608 decision = CHI_dec_dock_industrialise }
		activate_targeted_decision = { target = 592 decision = CHI_dec_dock_industrialise }
		activate_targeted_decision = { target = 746 decision = CHI_dec_dock_industrialise }
		activate_targeted_decision = { target = 743 decision = CHI_dec_dock_industrialise }
	}
}

shared_focus = {
	id = CHI_standard_rail_gauges
	icon = GFX_goal_generic_construct_infrastructure
	available = {
		OR = {
			owns_state = 608
			owns_state = 613
			owns_state = 592
		}
	}
	prerequisite = { focus = CHI_natl_dockyard }
	x = 0
	y = 1
	relative_position_id = CHI_natl_dockyard

	cost = 8

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_standard_rail_gauges"
		add_one_random_infrastructure = yes
		add_one_random_infrastructure = yes
		add_one_random_infrastructure = yes
		add_one_random_infrastructure = yes
		add_one_random_infrastructure = yes
		add_one_random_infrastructure = yes
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_academica_sinica
	icon = GFX_focus_research2
	prerequisite = { focus = CHI_revive_china }
	x = 1
	y = 1
	relative_position_id = CHI_revive_china

	available = {
		num_of_factories > 30
	}

	cost = 8

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_academica_sinica"
		add_research_slot_until_five = yes
		hidden_effect = {
			country_event = { id = chi_flavor.11 days = 3 }
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_bopomofo
	icon = GFX_focus_generic_military_academy
	prerequisite = { focus = CHI_academica_sinica }
	x = 0
	y = 1
	relative_position_id = CHI_academica_sinica

	cost = 7

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_bopomofo"
		add_tech_bonus = {
			name = CHI_bopomofo
			bonus = 1
			uses = 2
			category = electronics
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_foreign_research
	icon = GFX_goal_generic_scientific_exchange
	prerequisite = { focus = CHI_bopomofo }
	x = 0
	y = 2
	relative_position_id = CHI_bopomofo

	cost = 8

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_foreign_research"
		country_event = { id = chi_dom.24 days = 1 }
	}
}

	######################################
	## KMT - PROCLAIM NEW REPUBLIC TREE ##
	######################################

shared_focus = {
	id = CHI_proclaim_new_republic
	icon = GFX_goal_COS_Ferrer_Coup
	prerequisite = {
		focus = CHI_1st_congress
	}

	x = 5
	y = 7

	cost = 5

	ai_will_do = { factor = 40 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_proclaim_new_republic"
		add_political_power = 50
		add_war_support = 0.1
		if = {
			limit = { CHI_chen_gongbo = { is_second_in_command = yes } }
			hidden_effect = { country_event = { id = chi_flavor.1 days = 5 random_days = 15 } }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_develop_the_capital
	icon = GFX_focus_generic_china1
	prerequisite = { focus = CHI_proclaim_new_republic }
	x = -1
	y = 1
	relative_position_id = CHI_proclaim_new_republic
	cost = 6

	ai_will_do = { factor = 5 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_develop_the_capital"
		capital_scope = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		add_stability = 0.05
	}
}

shared_focus = {
	id = CHI_build_national_mausoleum
	icon = GFX_goal_chi_sun_legacy
	prerequisite = { focus = CHI_develop_the_capital }
	x = 0
	y = 1
	relative_position_id = CHI_develop_the_capital

	cost = 5

	ai_will_do = { factor = 5 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_build_national_mausoleum"
		add_war_support = 0.05
		add_stability = 0.05
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CHI_new_culture_movement
	icon = GFX_goal_KTG_Bookstack
	prerequisite = {
		focus = CHI_build_national_mausoleum
		focus = CHI_bopomofo
	}
	x = -1
	y = 1
	relative_position_id = CHI_build_national_mausoleum

	cost = 8

	ai_will_do = { factor = 5 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_new_culture_movement"
		if = {
			limit = { has_government = radical_socialist }
			add_ideas = KR_focus_new_culture1
		}
		else_if = {
			limit = { has_government = totalist }
			add_ideas = KR_focus_new_culture3
		}
	}
}

shared_focus = {
	id = CHI_est_civil_service
	icon = GFX_focus_chi_examination_yuan
	prerequisite = { focus = CHI_proclaim_new_republic }
	x = 1
	y = 1
	relative_position_id = CHI_proclaim_new_republic

	cost = 8

	ai_will_do = { factor = 5 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_est_civil_service"
		custom_effect_tooltip = CHI_integration_time_down_tt
		custom_effect_tooltip = tooltip_white_line
		add_ideas = CHI_civil_service_idea
		add_popularity = { ideology = radical_socialist popularity = 0.1 }
		hidden_effect = {
			if = {
				limit = { CHI_zhou_fohai = { is_political_advisor = yes } }
				hidden_effect = { country_event = { id = chi_dom.8 days = 5 random_days = 15 } }
			}
		}
	}
}

shared_focus = {
	id = CHI_provisional_legislature
	icon = GFX_focus_chi_legislative_yuan
	prerequisite = { focus = CHI_est_civil_service }
	x = 0
	y = 1
	relative_position_id = CHI_est_civil_service

	cost = 8

	ai_will_do = { factor = 5 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_provisional_legislature"
		increase_CHI_popular_support = yes
	}
}

shared_focus = {
	id = CHI_ethnic_autonomy
	icon = GFX_focus_generic_self_management
	prerequisite = { focus = CHI_provisional_legislature }
	mutually_exclusive = { focus = CHI_unitary_state }
	x = -1
	y = 1
	relative_position_id = CHI_provisional_legislature

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_ethnic_autonomy
		}
		modifier = {
			factor = 1.64	# AI will end up Totalist ~20.3% of the time, as requires two wrong focuses
			has_country_flag = choose_CHI_unitary_state
		}
		modifier = {
			factor = 0
			has_game_rule = { rule = CHI_path option = CHI_PATH_TOTALIST }
			has_country_flag = choose_CHI_ethnic_autonomy
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_ethnic_autonomy"
		add_stability = -0.1
		add_political_power = 50
		custom_effect_tooltip = tooltip_white_line
		if = {
			limit = { NOT = { has_completed_focus = CHI_1st_congress } }
			custom_effect_tooltip = CHI_choose_congress_options
		}
		else_if = {
			limit = { has_country_flag = choose_CHI_ethnic_autonomy }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_choose_CHI_ethnic_autonomy_tt
			custom_effect_tooltip = CHI_ZhongTeJu_choose_wisely
		}
		else_if = {
			limit = { has_country_flag = choose_CHI_unitary_state }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_choose_CHI_unitary_state_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			set_country_flag = CHI_Zhongteju_angry
			add_popularity = { ideology = totalist popularity = 0.08 }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_unitary_state
	icon = GFX_goal_Centralised_Government
	prerequisite = { focus = CHI_provisional_legislature }
	mutually_exclusive = { focus = CHI_ethnic_autonomy }
	x = 1
	y = 1
	relative_position_id = CHI_provisional_legislature

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_unitary_state
		}
		modifier = {
			factor = 1.64	# AI will end up Totalist ~20.3% of the time, as requires two wrong focuses
			has_country_flag = choose_CHI_ethnic_autonomy
		}
		modifier = {
			factor = 0
			has_game_rule = { rule = CHI_path option = CHI_PATH_TOTALIST }
			has_country_flag = choose_CHI_unitary_state
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_unitary_state"
		add_stability = -0.1
		add_political_power = 50
		custom_effect_tooltip = tooltip_white_line
		if = {
			limit = { NOT = { has_completed_focus = CHI_1st_congress } }
			custom_effect_tooltip = CHI_choose_congress_options
		}
		else_if = {
			limit = { has_country_flag = choose_CHI_unitary_state }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_choose_CHI_unitary_state_tt
			custom_effect_tooltip = CHI_ZhongTeJu_choose_wisely
		}
		else_if = {
			limit = { has_country_flag = choose_CHI_ethnic_autonomy }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_choose_CHI_ethnic_autonomy_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			set_country_flag = CHI_Zhongteju_angry
			add_popularity = { ideology = totalist popularity = 0.08 }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
shared_focus = {
	id = CHI_national_labour
	icon = GFX_GBR_fate_of_unions
	prerequisite = {
		focus = CHI_ethnic_autonomy
		focus = CHI_unitary_state
	}
	mutually_exclusive = { focus = CHI_rec_syndies }
	x = 0
	y = 1
	relative_position_id = CHI_ethnic_autonomy

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_national_labour
		}
		modifier = {
			factor = 1.64	# AI will end up Totalist ~20.3% of the time, as requires two wrong focuses
			has_country_flag = choose_CHI_rec_syndies
		}
		modifier = {
			factor = 0
			has_game_rule = { rule = CHI_path option = CHI_PATH_TOTALIST }
			has_country_flag = choose_CHI_national_labour
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_national_labour"
		add_popularity = { ideology = radical_socialist popularity = 0.05 }
		add_popularity = { ideology = social_liberal popularity = 0.05 }
		custom_effect_tooltip = tooltip_white_line
		if = {
			limit = { NOT = { has_completed_focus = CHI_1st_congress } }
			custom_effect_tooltip = CHI_choose_congress_options
		}
		else_if = {
			limit = { has_country_flag = choose_CHI_national_labour }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_choose_CHI_national_labour_tt
			custom_effect_tooltip = CHI_ZhongTeJu_choose_wisely
		}
		else_if = {
			limit = { has_country_flag = choose_CHI_rec_syndies }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_choose_CHI_rec_syndies_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.08 }
			if = {
				limit = { has_country_flag = CHI_Zhongteju_angry }
				hidden_effect = {
					country_event = { id = chi_dom.28 days = 30 }
				}
			}
		}
	}
}

shared_focus = {
	id = CHI_rec_syndies
	icon = GFX_goal_syndicalist_workers
	prerequisite = {
		focus = CHI_ethnic_autonomy
		focus = CHI_unitary_state
	}
	mutually_exclusive = { focus = CHI_national_labour }
	x = 0
	y = 1
	relative_position_id = CHI_unitary_state

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_rec_syndies
		}
		modifier = {
			factor = 1.64	# AI will end up Totalist ~20.3% of the time, as requires two wrong focuses
			has_country_flag = choose_CHI_national_labour
		}
		modifier = {
			factor = 0
			has_game_rule = { rule = CHI_path option = CHI_PATH_TOTALIST }
			has_country_flag = choose_CHI_rec_syndies
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_rec_syndies"
		add_popularity = { ideology = radical_socialist popularity = 0.05 }
		add_popularity = { ideology = syndicalist popularity = 0.1 }
		custom_effect_tooltip = tooltip_white_line
		hidden_effect = { country_event = chi_flavor.15 }
		if = {
			limit = { NOT = { has_completed_focus = CHI_1st_congress } }
			custom_effect_tooltip = CHI_choose_congress_options
		}
		else_if = {
			limit = { has_country_flag = choose_CHI_rec_syndies }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_choose_CHI_rec_syndies_tt
			custom_effect_tooltip = CHI_ZhongTeJu_choose_wisely
		}
		else_if = {
			limit = { has_country_flag = choose_CHI_national_labour }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_choose_CHI_national_labour_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.08 }
			if = {
				limit = { has_country_flag = CHI_Zhongteju_angry }
				hidden_effect = {
					country_event = { id = chi_dom.28 days = 30 }
				}
			}
		}
	}
}

shared_focus = {
	id = CHI_local_democracy
	icon = GFX_goal_generic_national_unity
	prerequisite = {
		focus = CHI_national_labour
		focus = CHI_rec_syndies
	}
	mutually_exclusive = {
		focus = CHI_continued_tutelage
	}
	mutually_exclusive = {
		focus = CHI_dais_coup
	}
	available = {
		NOT = {
			has_country_leader = { character = CHI_wang_jingwei }
			has_country_leader = { character = CHI_hu_zongnan }
		}
	}
	x = -1
	y = 1
	relative_position_id = CHI_national_labour

	cost = 8

	ai_will_do = { factor = 1 }

	on_uncomplete = {
		remove_ideas = KR_focus_local_democracy1
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_local_democracy"
		add_popularity = { ideology = social_liberal popularity = 0.05 }
		add_popularity = { ideology = radical_socialist popularity = 0.15 }
		add_ideas = KR_focus_local_democracy1
		if = {
			limit = { CHI_deng_yingchao = { is_political_advisor = yes } }
			hidden_effect = { country_event = { id = chi_flavor.16 days = 5 random_days = 15 } }
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_continued_tutelage
	icon = GFX_focus_usa_voter_registration_act
	prerequisite = {
		focus = CHI_rec_syndies
		focus = CHI_national_labour
	}
	mutually_exclusive = { focus = CHI_local_democracy }
	mutually_exclusive = { focus = CHI_dais_coup }
	x = 0
	y = 3
	relative_position_id = CHI_provisional_legislature

	cost = 8

	ai_will_do = { factor = 1 }

	on_uncomplete = {
		remove_ideas = KR_focus_tutelage1
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_continued_tutelage"
		add_popularity = { ideology = radical_socialist popularity = 0.1 }
		add_popularity = { ideology = social_liberal popularity = 0.05 }
		add_ideas = KR_focus_tutelage1
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_dais_coup
	icon = GFX_goal_generic_espionage
	prerequisite = { focus = CHI_unitary_state focus = CHI_ethnic_autonomy }
	prerequisite = { focus = CHI_national_labour focus = CHI_rec_syndies }
	mutually_exclusive = { focus = CHI_local_democracy }
	mutually_exclusive = { focus = CHI_continued_tutelage }
	x = 1
	y = 1
	relative_position_id = CHI_rec_syndies

	cost = 0

	ai_will_do = { factor = 1 }

	available = {
		hidden_trigger = { always = no }
	}
	bypass = {
		has_government = totalist
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_dais_coup"
		custom_effect_tooltip = CHI_dais_coup_tt
		add_corps_commander_role = {
			character = CHI_he_zhonghan
			desc = CHI_he_zhonghan_commander_desc
			traits = { career_officer CHI_left_kmt_officer }
			skill = 2
			attack_skill = 1
			defense_skill = 2
			planning_skill = 2
			logistics_skill = 2
		}
		add_timed_idea = {
			idea = CHI_purged_rivals
			days = 100
		}
	}
}

shared_focus = {
	id = CHI_legalize_parties
	icon = GFX_goal_constitutional_guarantees
	prerequisite = { focus = CHI_local_democracy }
	x = 0
	y = 1
	relative_position_id = CHI_local_democracy

	cost = 8

	ai_will_do = { factor = 1 }

	on_uncomplete = {
		remove_ideas = KR_focus_local_democracy2
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_legalize_parties"
		swap_ideas = {
			remove_idea = KR_focus_local_democracy1
			add_idea = KR_focus_local_democracy2
		}
		add_popularity = { ideology = social_liberal popularity = 0.05 }
		add_popularity = { ideology = market_liberal popularity = 0.05 }
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_social_revolution
	icon = GFX_goal_Workers_Paradise
	prerequisite = { focus = CHI_continued_tutelage }
	x = 0
	y = 1
	relative_position_id = CHI_continued_tutelage

	cost = 8

	ai_will_do = { factor = 1 }

	on_uncomplete = {
		remove_ideas = KR_focus_tutelage2
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_social_revolution"
		swap_ideas = {
			remove_idea = KR_focus_tutelage1
			add_idea = KR_focus_tutelage2
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_purge
	icon = GFX_goal_backstab
	prerequisite = { focus = CHI_dais_coup }
	x = 0
	y = 1
	relative_position_id = CHI_dais_coup

	cost = 8

	ai_will_do = { factor = 1 }

	available = {
		has_government = totalist
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_purge"
		add_popularity = { ideology = totalist popularity = 0.10 }
		custom_effect_tooltip = CHI_purge_tt
		CHI_purge_characters = yes
		add_ideas = CHI_new_society
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_state_capitalism
	icon = GFX_goal_state_economy
	prerequisite = { focus = CHI_legalize_parties focus = CHI_social_revolution }
	x = 0
	y = 3
	relative_position_id = CHI_national_labour
	available = {
		has_global_flag = china_united
	}

	cost = 8

	ai_will_do = { factor = 1 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_state_capitalism"
		if = {
			limit = { controls_state = 613 } #Nanjing
			613 = {
				add_dynamic_modifier = {
					modifier = CHI_state_capitalism_plan
				}
			}
		}
		if = {
			limit = { controls_state = 608 } #Beijing
			608 = {
				add_dynamic_modifier = {
					modifier = CHI_state_capitalism_plan
				}
			}
		}
		if = {
			limit = { controls_state = 743 } #Shanghai
			743 = {
				add_dynamic_modifier = {
					modifier = CHI_state_capitalism_plan
				}
			}
		}
		if = {
			limit = { controls_state = 592 } #Guangzhou
			592 = {
				add_dynamic_modifier = {
					modifier = CHI_state_capitalism_plan
				}
			}
		}
		custom_effect_tooltip = CHI_state_capitalism_tt

	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CHI_state_collectivism
	icon = GFX_goal_OTT_Land_Reform
	prerequisite = { focus = CHI_purge }
	x = 0
	y = 1
	relative_position_id = CHI_purge

	cost = 8

	ai_will_do = { factor = 1 }

	available = {
		has_government = totalist
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_state_collectivism"
		add_stability = -0.1
		if = {
			limit = { controls_state = 1045 } #Xunyang
			1045 = { increase_state_category_by_one_level = yes }
		}
		if = {
			limit = { controls_state = 600 }
			600 = { increase_state_category_by_one_level = yes }
		}
		if = {
			limit = { controls_state = 606 }  #Anqing
			606 = { increase_state_category_by_one_level = yes }
		}
		add_ideas = CHI_totalist_economy
		country_event = chi_flavor.8
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_1st_national_elections
	icon = GFX_goal_generic_elections
	prerequisite = { focus = CHI_state_capitalism }
	prerequisite = { focus = CHI_legalize_parties }
	x = 0
	y = 2
	relative_position_id = CHI_legalize_parties

	cost = 4

	ai_will_do = { factor = 1 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_1st_national_elections"
		country_event = chi_dom.35
		add_stability = -0.1
		add_popularity = { ideology = social_conservative popularity = 0.05 }
		add_popularity = { ideology = social_liberal popularity = 0.1 }
		hidden_effect = {
			set_party_name = {
				ideology = social_conservative
				long_name = CHI_western_hills_clique_long
				name = CHI_western_hills_clique
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_deepen_party_state
	icon = GFX_goal_shadow_government
	prerequisite = {
		focus = CHI_social_revolution
		focus = CHI_state_collectivism
	}
	x = -1
	y = 1
	relative_position_id = CHI_state_collectivism

	cost = 8

	ai_will_do = { factor = 1 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_deepen_party_state"
		if = {
			limit = { has_idea = KR_focus_tutelage2 }
			swap_ideas = {
				remove_idea = KR_focus_tutelage2
				add_idea = KR_focus_tutelage3
			}
		}
		else_if = {
			limit = { has_idea = CHI_new_society }
			swap_ideas = {
				remove_idea = CHI_new_society
				add_idea = CHI_new_society2
			}
		}
		else = {
			custom_effect_tooltip = CHI_if_tutelage
			swap_ideas = {
				remove_idea = KR_focus_tutelage2
				add_idea = KR_focus_tutelage3
			}
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_if_dais_rule
			swap_ideas = {
				remove_idea = CHI_new_society
				add_idea = CHI_new_society2
			}
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_reborn
	icon = GFX_focus_SOV_builder_of_the_red_army
	prerequisite = { focus = CHI_state_collectivism }
	x = 1
	y = 1
	relative_position_id = CHI_state_collectivism

	cost = 8

	ai_will_do = { factor = 1 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_reborn"
		swap_ideas = {
			remove_idea = CHI_new_society2
			add_idea = CHI_revanchism
		}
		add_war_support = 0.2
		hidden_effect = {
			country_event = { id = chi_flavor.12 days = 3 }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

	##################################
	## KMT - MAJOR UNIFICATION TREE ##
	##################################

shared_focus = {
	id = CHI_plan_southern
	icon = GFX_goal_SZC_recover_the_first_province
	prerequisite = { focus = CHI_1st_congress }
	relative_position_id = CHI_1st_congress

	x = 3
	y = 1

	cost = 8

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			HNN = { default_attack_AI_trigger_FROM = yes }
		}
		modifier = {
			factor = 0
			GXC = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		is_subject = no
		OR = {
			can_declare_war_on = HNN
			can_declare_war_on = GXC
		}
	}

	bypass = {
		OR = {
			NOT = { country_exists = HNN }
			has_subject = HNN
		}
		OR = {
			NOT = { country_exists = GXC }
			has_subject = GXC
		}
	}

	will_lead_to_war_with = HNN
	will_lead_to_war_with = GXC

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_plan_southern"
		add_to_array = { china_possible_allies_array = GXC }
		add_to_array = { china_possible_allies_array = HNN }
		if = {
			limit = { HNN = { china_can_ROOT_offer_alliance = yes } }
			add_political_power = 40
			add_war_support = 0.05
			effect_tooltip = { activate_targeted_decision = { decision = china_offer_alliance target = HNN } }
		}
		else_if = {
			limit = { can_declare_war_on = HNN }
			create_wargoal = {
				type = annex_everything
				target = HNN
			}
		}
		if = {
			limit = { GXC = { china_can_ROOT_offer_alliance = yes } }
			add_political_power = 40
			add_war_support = 0.05
			effect_tooltip = { activate_targeted_decision = { decision = china_offer_alliance target = GXC } }
		}
		else_if = {
			limit = { can_declare_war_on = GXC }
			every_country_with_original_tag = {
				original_tag_to_check = GXC
				limit = { ROOT = { can_declare_war_on = PREV } }
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PREV
					}
				}
			}
		}
		if = {
			limit = { has_country_flag = CHI_southern_war_plan } #From the chi_cng.9
			add_timed_idea = {
				idea = CHI_southern_war_plan_idea
				days = 200
			}
		}
	}
}

shared_focus = {
	id = CHI_plan_western
	icon = GFX_goal_generic_attack_sichuan
	prerequisite = { focus = CHI_plan_southern }

	relative_position_id = CHI_plan_southern
	x = 0
	y = 1

	cost = 8

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			YUN = { default_attack_AI_trigger_FROM = yes }
		}
		modifier = {
			factor = 0
			SZC = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		is_subject = no
		OR = {
			can_declare_war_on = YUN
			can_declare_war_on = SZC
		}
	}

	bypass = {
		OR = {
			NOT = { country_exists = YUN }
			has_subject = YUN
		}
		OR = {
			NOT = { country_exists = SZC }
			has_subject = SZC
		}
	}

	will_lead_to_war_with = YUN
	will_lead_to_war_with = SZC

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_plan_western"
		add_to_array = { china_possible_allies_array = YUN }
		add_to_array = { china_possible_allies_array = SZC }
		if = {
			limit = { SZC = { china_can_ROOT_offer_alliance = yes } }
			add_political_power = 40
			add_war_support = 0.05
			effect_tooltip = { activate_targeted_decision = { decision = china_offer_alliance target = SZC } }
		}
		else_if = {
			limit = { can_declare_war_on = SZC }
			create_wargoal = {
				type = annex_everything
				target = SZC
			}
		}
		if = {
			limit = { YUN = { china_can_ROOT_offer_alliance = yes } }
			add_political_power = 40
			add_war_support = 0.05
			effect_tooltip = { activate_targeted_decision = { decision = china_offer_alliance target = YUN } }
		}
		else_if = {
			limit = { can_declare_war_on = YUN }
			create_wargoal = {
				type = annex_everything
				target = YUN
			}
		}
	}
}

shared_focus = {
	id = CHI_deal_with_north_warlords
	icon = GFX_goal_LEP_patronize_xiangshen
	prerequisite = { focus = CHI_1st_congress }

	x = 5
	y = 1
	relative_position_id = CHI_1st_congress

	cost = 5

	ai_will_do = { factor = 25 }

	available = {
		is_subject = no
	}

	bypass = {
		OR = {
			NOT = { country_exists = FNG }
			NOT = { country_exists = SHX }
			has_war_with = FNG
			FNG = { is_subject = yes }
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_deal_with_north_warlords"
		if = {
			limit = {
				country_exists = FNG
				NOT = { has_war_with = FNG }
				FNG = {
					is_subject = no
					NOT = { has_war_with = QIE }
				}
			}
			FNG = { country_event = { id = chi_fng.2 days = 1 } }
		}
		custom_effect_tooltip = tooltip_white_line
		custom_effect_tooltip = CHI_contact_rca_cells_tt
		if = {
			limit = {
				SHX = {
					has_country_flag = SHX_yan_feng_split
				}
				has_country_leader = { character = CHI_wang_jingwei }
			}
			SHX = { #if power struggle is ongoing, aid Feng's cause!
				SHX_strengthen_feng_large = yes
				add_popularity = {
					ideology = radical_socialist
					popularity = 0.05
				}
				country_event = chi_flavor.18
			}
		}
		if = {
			limit = {
				SHX = {
					NOT = {
						has_country_flag = SHX_yan_feng_split
					}
				}
				has_country_leader = { character = CHI_wang_jingwei }
			}
			SHX = {
				add_popularity = {
					ideology = radical_socialist
					popularity = 0.05
				}
				country_event = chi_flavor.18
			}
		}
		hidden_effect = {
			add_to_array = { china_possible_allies_array = SHX }
		}
	}
}

shared_focus = {
	id = CHI_northern_expedition
	icon = GFX_goal_generic_attack_zhili
	prerequisite = {
		focus = CHI_deal_with_north_warlords
	}

	x = 0
	y = 1
	relative_position_id = CHI_deal_with_north_warlords

	cost = 6

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0
			QIE = { default_attack_AI_trigger = yes }
		}
		modifier = {
			factor = 10
			QIE = { has_war_with = FNG }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = QIE }
	}

	will_lead_to_war_with = QIE

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_northern_expedition"
		country_event = chi_flavor.10
		create_wargoal = {
			type = annex_everything
			target = QIE
		}
		if = {
			limit = { has_country_flag = CHI_northern_war_plan }
			add_timed_idea = {
				idea = CHI_northern_war_plan_idea
				days = 200
			}
		}
		hidden_effect = {
			activate_targeted_decision = { target = SHX decision = CHI_dec_offer_eastern_shanxi }
		}
	}
}

shared_focus = {
	id = CHI_invade_FNG
	icon = GFX_goal_generic_attack_fengtian
	prerequisite = { focus = CHI_northern_expedition }
	x = -1
	y = 1
	relative_position_id = CHI_northern_expedition

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0
			has_wargoal_against = QIE
		}
		modifier = {
			factor = 0
			FNG = { default_attack_AI_trigger = yes }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = FNG }
	}

	will_lead_to_war_with = FNG

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_invade_FNG"
		create_wargoal = {
			type = annex_everything
			target = FNG
		}
	}
}

shared_focus = {
	id = CHI_anti_JAP
	icon = GFX_goal_kmt_contest_the_japanese
	prerequisite = {
		focus = CHI_northern_expedition
	}
	x = 1
	y = 1
	relative_position_id = CHI_northern_expedition

	cost = 7

	ai_will_do = { factor = 35 }

	available = {
		is_subject = no
	}

	bypass = {
		has_global_flag = JAP_defeated_by_china
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_anti_JAP"
		if = {
			limit = { controls_province = 11913 } #Nanjing
			613 = {
				add_building_construction = {
					type = bunker
					level = 3
					instant_build = yes
					province = {
						all_provinces = yes
						limit_to_border = yes
					}
				}
			}
		}
		add_timed_idea = {
			idea = CHI_march_of_the_volunteers
			days = 120
		}
	}

	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}
shared_focus = {
	id = CHI_reclaim_taiwan
	icon = GFX_goal_reclaim_taiwan
	prerequisite = {
		focus = CHI_anti_JAP
	}
	x = 0
	y = 1
	relative_position_id = CHI_anti_JAP

	cost = 5

	ai_will_do = {
		factor = 35
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			JAP = {
				OR = {
					is_stronger_than_ROOT_and_not_vulnerable_consider_naval_strength = yes
					overlord_is_stronger_than_ROOT_and_not_vulnerable_consider_naval_strength = yes
					faction_leader_is_stronger_than_ROOT_and_not_vulnerable_consider_naval_strength = yes
				}
			}
		}
	}
	available = {
		is_subject = no
		has_global_flag = JAP_defeated_by_china
		JAP = { owns_state = 524 }
		NOT = { has_non_aggression_pact_with = JAP }
	}
	bypass = {
		NOT = { JAP = { owns_state = 524 } }
	}
	will_lead_to_war_with = JAP
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_reclaim_taiwan"
		create_wargoal = {
			target = JAP
			type = take_state_focus
			generator = { 524 }
		}
		country_event = chi_flavor.17
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}

	####################################
	## KMT - OTHER SHENANIGANS TREE ##
	####################################

shared_focus = {
	id = CHI_reorder_north_china
	icon = GFX_goal_LKMT_A_New_China
	prerequisite = { focus = CHI_northern_expedition }
	x = 3
	y = 3
	relative_position_id = CHI_northern_expedition

	cost = 6

	ai_will_do = { factor = 1 }

	available = {
		has_global_flag = china_united
		has_full_control_of_state = 608
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_reorder_north_china"
		increase_CHI_popular_support = yes
	}
}

shared_focus = {
	id = CHI_institute_of_revolutionary_practice
	icon = GFX_focus_generic_socialist_science
	available = {
		num_of_factories > 100
	}
	prerequisite = { focus = CHI_reorder_north_china }
	x = -3
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 6

	ai_will_do = { factor = 1 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_institute_of_revolutionary_practice"
		add_research_slot_until_five = yes
	}
}

shared_focus = {
	id = CHI_fate_of_the_legations
	icon = GFX_goal_QIE_destroy_LEC
	available = {
		is_subject = no
	}
	bypass = {
		NOT = { country_exists = LEC }
		326 = { is_owned_by_ROOT_or_subject = yes } #Hong Kong
		609 = { is_owned_by_ROOT_or_subject = yes } #Tianjin
		728 = { is_owned_by_ROOT_or_subject = yes } #Guangzhouwan
		729 = { is_owned_by_ROOT_or_subject = yes } #Macau
		743 = { is_owned_by_ROOT_or_subject = yes } #Shanghai
		744 = { is_owned_by_ROOT_or_subject = yes } #Qingdao
		745 = { is_owned_by_ROOT_or_subject = yes } #Kwantung
		746 = { is_owned_by_ROOT_or_subject = yes } #Ningbo
		747 = { is_owned_by_ROOT_or_subject = yes } #Fuzhou
		801 = { is_owned_by_ROOT_or_subject = yes } #Shantou
		802 = { is_owned_by_ROOT_or_subject = yes } #Xiamen
		803 = { is_owned_by_ROOT_or_subject = yes } #Wenzhou
		996 = { is_owned_by_ROOT_or_subject = yes } #Weihaiwei
		1075 = { is_owned_by_ROOT_or_subject = yes } #Nantong
	}
	prerequisite = { focus = CHI_reorder_north_china }
	x = -2
	y = 2
	relative_position_id = CHI_reorder_north_china

	cost = 6

	ai_will_do = { factor = 1 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_fate_of_the_legations"
		add_war_support = 0.1
		china_enable_concession_decisions = yes
	}
}

shared_focus = {
	id = CHI_secure_northwest
	icon = GFX_goal_OTT_Abolish_Mecelle
	prerequisite = { focus = CHI_reorder_north_china }
	x = -1
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 15
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			XSM = { default_attack_AI_trigger_FROM = yes }
		}
		modifier = {
			factor = 0
			SIK = { default_attack_AI_trigger_FROM = yes }
		}
		modifier = {
			factor = 0
			KUM = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = {
			can_declare_war_on = XSM
			can_declare_war_on = SIK
			can_declare_war_on = KUM
			can_declare_war_on = ETS
		}
	}

	will_lead_to_war_with = XSM
	will_lead_to_war_with = SIK
	will_lead_to_war_with = KUM
	will_lead_to_war_with = ETS

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_secure_northwest"
		if = {
			limit = { can_declare_war_on = XSM }
			add_to_array = { ROOT.china_possible_targets_array = XSM }
			effect_tooltip = { activate_targeted_decision = { decision = china_demand_submission target = XSM } }
		}
		if = {
			limit = { can_declare_war_on = SIK }
			add_to_array = { ROOT.china_possible_targets_array = SIK }
			effect_tooltip = { activate_targeted_decision = { decision = china_demand_submission target = SIK } }
		}
		if = {
			limit = { can_declare_war_on = KUM }
			add_to_array = { ROOT.china_possible_targets_array = KUM }
			effect_tooltip = { activate_targeted_decision = { decision = china_demand_submission target = KUM } }
		}
		if = {
			limit = { can_declare_war_on = ETS }
			activate_targeted_decision = { decision = china_demand_annexation target = ETS }
		}
	}
}

shared_focus = {
	id = CHI_authority_TIB
	icon = YUN_GFX_Goal_Secure_Tibet
	prerequisite = { focus = CHI_reorder_north_china }
	x = 1
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 15
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			TIB = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		is_subject = no
		can_declare_war_on = TIB
		OR = {
			has_completed_focus = CHI_ethnic_autonomy
			has_completed_focus = CHI_unitary_state
		}
	}

	bypass = {
		OR = {
			NOT = { country_exists = TIB }
			has_subject = TIB
		}
	}

	will_lead_to_war_with = TIB

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_authority_TIB"
		TIB = { country_event = china_events.100 }
		custom_effect_tooltip = if_they_accept_tt
		effect_tooltip = {
			annex_country = {
				target = TIB
				transfer_troops = no
			}
		}
		custom_effect_tooltip = if_they_refuse_tt
		effect_tooltip = {
			create_wargoal = {
				target = TIB
				type = annex_everything
			}
		}
	}
}

shared_focus = {
	id = CHI_retake_MON
	icon = GFX_goal_MON_mongolia_flag
	prerequisite = { focus = CHI_reorder_north_china }
	x = 0
	y = 2
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			MON = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		is_subject = no
		can_declare_war_on = MON
	}

	bypass = {
		OR = {
			NOT = { country_exists = MON }
			has_subject = MON
			MON = { is_in_faction_with = 653.owner }
		}
	}

	will_lead_to_war_with = TIB

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_retake_MON"
		MON = { country_event = china_events.100 }
		custom_effect_tooltip = if_they_accept_tt
		effect_tooltip = {
			annex_country = {
				target = MON
				transfer_troops = no
			}
		}
		custom_effect_tooltip = if_they_refuse_tt
		effect_tooltip = {
			create_wargoal = {
				target = MON
				type = annex_everything
			}
		}
	}
}

shared_focus = {
	id = CHI_neutralize_RUS
	icon = GFX_focus_eng_expose_the_belly_of_the_bear
	prerequisite = { focus = CHI_secure_northwest }
	prerequisite = { focus = CHI_retake_MON }
	x = -1
	y = 1
	relative_position_id = CHI_retake_MON

	cost = 7

	ai_will_do = {
		factor = 0
		modifier = {
			add = 100
			OR = {
				330 = { owner = { is_ally_with = 653.owner } } #Urga
				619 = { owner = { is_ally_with = 653.owner } } #Kashgar
				886 = { owner = { is_ally_with = 653.owner } } #Jilin
			}
		}
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			var:653.owner = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = 653.owner }
	}

	will_lead_to_war_with = RUS
	will_lead_to_war_with = SOV

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_neutralize_RUS"
		create_wargoal = {
			target = 653.owner
			type = puppet_wargoal_focus
		}
	}
}

shared_focus = {
	id = CHI_renounce_mcmahon
	icon = GFX_focus_generic_provoke_border_clashes
	prerequisite = { focus = CHI_authority_TIB }
	mutually_exclusive = { focus = CHI_mission_red_india }
	x = 1
	y = 1
	relative_position_id = CHI_retake_MON

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			var:858.owner = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		is_subject = no
		OR = {
			owns_state = 322 #Lhasa
			has_subject = TIB
		}
	}

	bypass = {
		owns_state = 858
	}

	will_lead_to_war_with = HND
	will_lead_to_war_with = RAJ
	will_lead_to_war_with = PRF

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_renounce_mcmahon"
		add_state_claim = 858
		if = {
			limit = { var:858.owner = { is_indian_tag = yes } }
			create_wargoal = {
				target = 858.owner
				type = take_state_focus
				generator = { 858 }
			}
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = CHI_repay_syndicalists
	icon = GFX_focus_ger_great_red_menace
	prerequisite = { focus = CHI_reorder_north_china }
	x = 3
	y = 1
	mutually_exclusive = { focus = CHI_independent_FP }
	relative_position_id = CHI_reorder_north_china

	cost = 8

	ai_will_do = { factor = 1 }

	available = {
		is_subject = no
		INT = { is_faction_leader = yes }
		NOT = {
			has_government = totalist
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_repay_syndicalists"
		add_popularity = {
			ideology = syndicalist
			popularity = 0.05
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.05
		}
		add_ideas = CHI_revolutionary_diplomacy_idea
		custom_effect_tooltip = tooltip_white_line
		FRA = {
			add_timed_idea = {
				idea = CHI_internationale_aid_idea
				days = 365
			}
			hidden_effect = {
				country_event = chi_for.200 #event letting FRA know of construction crews
			}
		}
		ENG = {
			add_timed_idea = {
				idea = CHI_internationale_aid_idea
				days = 365
			}
			hidden_effect = {
				country_event = chi_for.200 #event letting FRA know of construction crews
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_independent_FP
	icon = GFX_goal_liberty
	prerequisite = { focus = CHI_reorder_north_china }
	x = 5
	y = 1
	mutually_exclusive = { focus = CHI_repay_syndicalists }
	relative_position_id = CHI_reorder_north_china

	cost = 8

	ai_will_do = { factor = 1 }

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_independent_FP"
		add_political_power = 50
		reverse_add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND_MAD
		}
		add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND_MAD
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_join_phalanstere
	icon = GFX_goal_FRA_phalanstere
	prerequisite = { focus = CHI_repay_syndicalists }
	x = -1
	y = 1
	relative_position_id = CHI_repay_syndicalists

	cost = 8

	ai_will_do = { factor = 1 }
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_join_phalanstere"
		FRA_add_to_phalanstere = yes
		add_offsite_building = {
			type = industrial_complex
			level = 1
		}
		hidden_effect = {
			FRA = {
				country_event = chi_for.201  #CHI joins Phalanstere
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_intervene_VIN
	icon = GFX_HND_indochina_revolution
	prerequisite = {
		focus = CHI_independent_FP
		focus = CHI_repay_syndicalists
	}
	x = 4
	y = 2
	relative_position_id = CHI_reorder_north_china

	cost = 8

	ai_will_do = {
		factor = 100
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			GEA = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		OR = {
			is_subject = no
			has_country_flag = CHI_refuse_INC
		}
	}

	bypass = {
		OR = {
			country_exists = INC
			NOT = { can_declare_war_on = GEA }
		}
	}

	will_lead_to_war_with = GEA

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_intervene_VIN"
		create_wargoal = {
			target = GEA
			type = topple_government
		}
	}
}

shared_focus = {
	id = CHI_sino_american_pact
	icon = GFX_goal_CSA_master_west
	prerequisite = {
		focus = CHI_independent_FP
	}
	x = 1
	y = 1
	relative_position_id = CHI_independent_FP

	cost = 8

	available = {
		country_exists = CSA
		NOT = { has_war_with = CSA }
		CSA = {
			has_completed_focus = CSA_reconstruction
			is_valid_peace_target = yes
		}
		can_declare_war_on = JAP
		JAP = { is_faction_leader = yes }
	}

	bypass = {
		OR = {
			NOT = { country_exists = CSA }
			JAP = { is_faction_leader = no }
			JAP = { has_socialist_government = yes }
		}
	}

	will_lead_to_war_with = JAP

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			OR = {
				ROOT_is_threatened = yes
				CSA = { ROOT_is_threatened = yes }
				JAP = { default_attack_AI_trigger_FROM = yes }
			}
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_sino_american_pact"
		CSA = { country_event = chi_faction.2 }
		custom_effect_tooltip = if_they_accept_tt
		effect_tooltip = {
			diplomatic_relation = {
				country = CSA
				relation = non_aggression_pact
			}
			create_wargoal = {
				target = JAP
				type = topple_government
			}
			CSA = {
				create_wargoal = {
					target = JAP
					type = topple_government
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_mission_red_india
	icon = GFX_goal_india_commune
	prerequisite = { focus = CHI_repay_syndicalists }
	x = 0
	y = 2
	mutually_exclusive = { focus = CHI_renounce_mcmahon }
	relative_position_id = CHI_repay_syndicalists

	cost = 8

	ai_will_do = { factor = 1 }

	available = {
		can_declare_war_on = HND
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = HND }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mission_red_india"
		HND = {
			country_event = { id = chi_for.42 days = 5 }
		}
	}
}

shared_focus = {
	id = CHI_form_eastasia_faction
	icon = GFX_goal_chi_international_revolution
	prerequisite = { focus = CHI_independent_FP }
	x = 0
	y = 2
	relative_position_id = CHI_independent_FP

	cost = 8

	ai_will_do = { factor = 1 }

	available = {
		is_valid_peace_target = yes
		OR = {
			has_global_flag = JAP_defeated_by_china
			JAP = { is_subject = yes }
			NOT = { country_exists = JAP }
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_form_eastasia_faction"
		custom_effect_tooltip = CHI_form_faction_tt
		country_event = chi_faction.1
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_support_INS_independence
	icon = GFX_focus_jap_strike_south
	prerequisite = {
		focus = CHI_form_eastasia_faction
		focus = CHI_mission_red_india
	}
	x = 0
	y = 2
	relative_position_id = CHI_intervene_VIN

	cost = 8

	ai_will_do = { factor = 1 }

	available = {
		is_subject = no
	}

	bypass = {
		NOT = {
			country_exists = GEA
			country_exists = DEI
		}
		PHI = { is_subject = no }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_support_INS_independence"
		unlock_decision_category_tooltip = CHI_liberate_asia_category
		hidden_effect = {
			activate_targeted_decision = { target = DEI decision = CHI_liberate_asia }
			activate_targeted_decision = { target = GEA decision = CHI_liberate_asia }
			activate_targeted_decision = { target = PHI decision = CHI_liberate_asia_PHI }
		}
	}
}

