############################################
## Intermarium (EE Cooperation) Decisions ##
## By Augenis & Matoro                    ##
############################################

MIE_decisions = {
	MIE_refuse_equipment_shipments = {
		icon = generic_agreement

		visible = {
			is_ai = no
			NOT = { has_country_flag = MIE_dont_send_equipment }
		}

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_refuse_equipment_shipments"
			set_country_flag = MIE_dont_send_equipment
		}
	}
	MIE_allow_equipment_shipments = {
		icon = generic_agreement

		visible = {
			is_ai = no
			has_country_flag = MIE_dont_send_equipment
		}

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_allow_equipment_shipments"
			clr_country_flag = MIE_dont_send_equipment
		}
	}
	MIE_spend_guns = {
		icon = generic_agreement

		visible = {
			tag = MIE
			is_in_faction_with = FROM
			FROM = { has_capitulated = no }
		}

		target_array = global.MIE_tags_array
		target_root_trigger = { tag = MIE }
		target_trigger = {
			is_in_faction_with = FROM
			FROM = {
				has_country_flag = MIE_member
				has_capitulated = no
			}
		}

		custom_cost_text = MIE_1000_guns
		custom_cost_trigger = {
			check_variable = {
				var = global.MIE_infantry_equipment
				value = 1000
				compare = greater_than_or_equals
			}
		}

		days_re_enable = 7

		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				FROM = { has_country_flag = MIE_dont_send_equipment }
			}
			modifier = {
				# avoid division by zero
				check_variable = { FROM.num_target_equipment_in_armies@infantry_equipment > 0 }

				set_temp_variable = { FROM_infantry_equipment_ratio = FROM.num_equipment_in_armies@infantry_equipment }
				divide_temp_variable = { FROM_infantry_equipment_ratio = FROM.num_target_equipment_in_armies@infantry_equipment }

				set_temp_variable = { FROM_infantry_equipment_factor = 1 }
				subtract_from_temp_variable = { FROM_infantry_equipment_factor = FROM_infantry_equipment_ratio }
				multiply_temp_variable = { FROM_infantry_equipment_factor = 20 }

				add = FROM_infantry_equipment_factor
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_spend_guns target: [From.GetName]"
			subtract_from_variable = { global.MIE_infantry_equipment = 1000 }
			FROM = {
				country_event = mie.5
				effect_tooltip = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1000
					}
				}
			}
		}
	}
	MIE_spend_support = {
		icon = generic_agreement

		visible = {
			tag = MIE
			is_in_faction_with = FROM
			FROM = { has_capitulated = no }
		}

		target_array = global.MIE_tags_array
		target_root_trigger = { tag = MIE }
		target_trigger = {
			is_in_faction_with = FROM
			FROM = { has_capitulated = no }
		}

		custom_cost_text = MIE_250_supporteq
		custom_cost_trigger = {
			check_variable = {
				var = global.MIE_support_equipment
				value = 250
				compare = greater_than_or_equals
			}
		}

		days_re_enable = 7

		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				FROM = { has_country_flag = MIE_dont_send_equipment }
			}
			modifier = {
				# avoid division by zero
				check_variable = { FROM.num_target_equipment_in_armies@support_equipment > 0 }

				set_temp_variable = { FROM_support_equipment_ratio = FROM.num_equipment_in_armies@support_equipment }
				divide_temp_variable = { FROM_support_equipment_ratio = FROM.num_target_equipment_in_armies@support_equipment }

				set_temp_variable = { FROM_support_equipment_factor = 1 }
				subtract_from_temp_variable = { FROM_support_equipment_factor = FROM_support_equipment_ratio }
				multiply_temp_variable = { FROM_support_equipment_factor = 20 }

				add = FROM_support_equipment_factor
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_spend_support target: [From.GetName]"
			subtract_from_variable = { global.MIE_support_equipment = 250 }
			FROM = {
				country_event = mie.6
				effect_tooltip = {
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 250
					}
				}
			}
		}
	}
	MIE_spend_artillery = {
		icon = generic_agreement

		visible = {
			tag = MIE
			is_in_faction_with = FROM
			FROM = { has_capitulated = no }
		}

		target_array = global.MIE_tags_array
		target_root_trigger = { tag = MIE }
		target_trigger = {
			is_in_faction_with = FROM
			FROM = { has_capitulated = no }
		}

		custom_cost_text = MIE_250_artilleryeq
		custom_cost_trigger = {
			check_variable = {
				var = global.MIE_artillery_equipment
				value = 250
				compare = greater_than_or_equals
			}
		}

		days_re_enable = 10

		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				FROM = { has_country_flag = MIE_dont_send_equipment }
			}
			modifier = {
				# avoid division by zero
				check_variable = { FROM.num_target_equipment_in_armies@artillery_equipment > 0 }

				set_temp_variable = { FROM_artillery_equipment_ratio = FROM.num_equipment_in_armies@artillery_equipment }
				divide_temp_variable = { FROM_artillery_equipment_ratio = FROM.num_target_equipment_in_armies@artillery_equipment }

				set_temp_variable = { FROM_artillery_equipment_factor = 1 }
				subtract_from_temp_variable = { FROM_artillery_equipment_factor = FROM_artillery_equipment_ratio }
				multiply_temp_variable = { FROM_artillery_equipment_factor = 20 }

				add = FROM_artillery_equipment_factor
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_spend_artillery target: [From.GetName]"
			subtract_from_variable = { global.MIE_artillery_equipment = 250 }
			FROM = {
				country_event = mie.7
				effect_tooltip = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 250
					}
				}
			}
		}
	}
	MIE_spend_guns_self = {
		icon = generic_agreement

		visible = {
			tag = MIE
		}

		custom_cost_text = MIE_1000_guns
		custom_cost_trigger = {
			check_variable = {
				var = global.MIE_infantry_equipment
				value = 1000
				compare = greater_than_or_equals
			}
		}

		days_re_enable = 10

		ai_will_do = {
			base = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@infantry_equipment > 0 }

				set_temp_variable = { ROOT_infantry_equipment_ratio = num_equipment_in_armies@infantry_equipment }
				divide_temp_variable = { ROOT_infantry_equipment_ratio = num_target_equipment_in_armies@infantry_equipment }

				set_temp_variable = { ROOT_infantry_equipment_factor = 1 }
				subtract_from_temp_variable = { ROOT_infantry_equipment_factor = ROOT_infantry_equipment_ratio }
				multiply_temp_variable = { ROOT_infantry_equipment_factor = 20 }

				add = ROOT_infantry_equipment_factor
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_spend_guns_self"
			subtract_from_variable = { global.MIE_infantry_equipment = 1000 }
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
			}
		}
	}
	MIE_spend_support_self = {
		icon = generic_agreement

		visible = {
			tag = MIE
		}

		custom_cost_text = MIE_250_supporteq
		custom_cost_trigger = {
			check_variable = {
				var = global.MIE_support_equipment
				value = 250
				compare = greater_than_or_equals
			}
		}

		days_re_enable = 10

		ai_will_do = {
			base = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@support_equipment > 0 }

				set_temp_variable = { ROOT_support_equipment_ratio = num_equipment_in_armies@support_equipment }
				divide_temp_variable = { ROOT_support_equipment_ratio = num_target_equipment_in_armies@support_equipment }

				set_temp_variable = { ROOT_support_equipment_factor = 1 }
				subtract_from_temp_variable = { ROOT_support_equipment_factor = ROOT_support_equipment_ratio }
				multiply_temp_variable = { ROOT_support_equipment_factor = 20 }

				add = ROOT_support_equipment_factor
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_spend_support_self"
			subtract_from_variable = { global.MIE_support_equipment = 250 }
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 250
			}
		}
	}
	MIE_spend_artillery_self = {
		icon = generic_agreement

		visible = {
			tag = MIE
		}

		custom_cost_text = MIE_250_artilleryeq
		custom_cost_trigger = {
			check_variable = {
				var = global.MIE_artillery_equipment
				value = 250
				compare = greater_than_or_equals
			}
		}

		days_re_enable = 10

		ai_will_do = {
			base = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@artillery_equipment > 0 }

				set_temp_variable = { ROOT_artillery_equipment_ratio = num_equipment_in_armies@artillery_equipment }
				divide_temp_variable = { ROOT_artillery_equipment_ratio = num_target_equipment_in_armies@artillery_equipment }

				set_temp_variable = { ROOT_artillery_equipment_factor = 1 }
				subtract_from_temp_variable = { ROOT_artillery_equipment_factor = ROOT_artillery_equipment_ratio }
				multiply_temp_variable = { ROOT_artillery_equipment_factor = 20 }

				add = ROOT_artillery_equipment_factor
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_spend_artillery_self"
			subtract_from_variable = { global.MIE_artillery_equipment = 250 }
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 250
			}
		}
	}
	MIE_invest_guns = {
		icon = ger_military_buildup

		visible = {
			is_in_faction_with = MIE
		}

		days_re_enable = 10

		custom_cost_text = MIE_500_guns
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 499 }
		}

		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				stockpile_ratio = { archetype = infantry_equipment ratio < 1.2 }
			}
			modifier = {
				factor = 2
				stockpile_ratio = { archetype = infantry_equipment ratio > 2 }
			}
			modifier = {
				factor = 2
				stockpile_ratio = { archetype = infantry_equipment ratio > 3 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_invest_guns"
			add_to_variable = { global.MIE_infantry_equipment = 500 }
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -500
				}
			}
		}
	}
	MIE_invest_support = {
		icon = ger_military_buildup

		visible = {
			is_in_faction_with = MIE
		}

		days_re_enable = 10

		custom_cost_text = MIE_150_supporteq
		custom_cost_trigger = {
			has_equipment = { support_equipment > 149 }
		}

		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				stockpile_ratio = { archetype = support_equipment ratio < 1.2 }
			}
			modifier = {
				factor = 2
				stockpile_ratio = { archetype = support_equipment ratio > 2 }
			}
			modifier = {
				factor = 2
				stockpile_ratio = { archetype = support_equipment ratio > 3 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_invest_support"
			add_to_variable = { global.MIE_support_equipment = 150 }
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = -150
				}
			}
		}
	}
	MIE_invest_artillery = {
		icon = ger_military_buildup

		visible = {
			is_in_faction_with = MIE
		}

		days_re_enable = 10

		custom_cost_text = MIE_250_artilleryeq
		custom_cost_trigger = {
			has_equipment = { artillery_equipment > 249 }
		}

		ai_will_do = {
			base = 20
			modifier = {
				factor = 0
				stockpile_ratio = { archetype = artillery_equipment ratio < 1.2 }
			}
			modifier = {
				factor = 2
				stockpile_ratio = { archetype = artillery_equipment ratio > 2 }
			}
			modifier = {
				factor = 2
				stockpile_ratio = { archetype = artillery_equipment ratio > 3 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_invest_artillery"
			add_to_variable = { global.MIE_artillery_equipment = 250 }
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = -250
				}
			}
		}
	}
	MIE_build_forts_in_whr = {
		icon = GFX_decision_fortress

		available = {
			FROM = {
				has_full_control_of_state = 207
				has_full_control_of_state = 1087
			}
		}

		visible = {
			tag = MIE #dynamic target, won't work in allowed
			is_in_faction_with = FROM
			FROM = { has_country_flag = MIE_member }
		}

		cancel_trigger = {
			OR = {
				NOT = { is_in_faction_with = MIE }
				russia_can_threaten_reichspakt = no
			}
		}

		targets = { WHR }
		target_trigger = {
			is_in_faction_with = FROM
			FROM = { has_country_flag = MIE_member }
		}

		custom_cost_text = MIE_2000_guns_500_sup
		custom_cost_trigger = {
			check_variable = {
				var = global.MIE_infantry_equipment
				value = 2000
				compare = greater_than_or_equals
			}
			check_variable = {
				var = global.MIE_support_equipment
				value = 500
				compare = greater_than_or_equals
			}
		}

		days_remove = 90
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel MIE_build_forts_in_whr target: [From.GetName]"
			add_to_variable = { global.MIE_infantry_equipment = 2000 }
			add_to_variable = { global.MIE_support_equipment = 500 }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_build_forts_in_whr target: [From.GetName]"
			subtract_from_variable = { global.MIE_infantry_equipment = 2000 }
			subtract_from_variable = { global.MIE_support_equipment = 500 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove MIE_build_forts_in_whr target: [From.GetName]"
			FROM = {
				country_event = mie.1
			}
			custom_effect_tooltip = MIE_build_forts_in_whr_tt
			hidden_effect = {
				207 = {
					add_building_construction = {
						type = bunker
						level = 1
						province = 233
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = 358
						instant_build = yes
					}
				}
				1087 = {
					add_building_construction = {
						type = bunker
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
						level = 1
						instant_build = yes
					}
				}
				194 = {
					add_building_construction = {
						type = bunker
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	MIE_joint_offensive_exercises = {
		icon = GFX_decision_soldierly_discipline

		visible = {
			tag = MIE
		}

		cancel_trigger = {
			OR = {
				NOT = { is_in_faction_with = MIE }
				russia_can_threaten_reichspakt = no
			}
		}

		custom_cost_text = army_xp_80
		custom_cost_trigger = {
			has_army_experience > 79.99
		}

		days_remove = 60
		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				add = 100
				date > 1938.01.01
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel MIE_joint_offensive_exercises"
			army_experience = 80
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_joint_offensive_exercises"
			army_experience = -80
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove MIE_joint_offensive_exercises"
			if = {
				limit = {
					any_army_leader = { has_trait = panzer_leader }
				}
				every_army_leader = {
					limit = { has_trait = panzer_leader }
					add_attack = 1
				}
			}
			else = {
				army_experience = 20
			}
			every_other_country = {
				limit = { has_country_flag = MIE_member }
				country_event = mie.2
				effect_tooltip = {
					if = {
						limit = {
							any_army_leader = { has_trait = panzer_leader }
						}
						every_army_leader = {
							limit = { has_trait = panzer_leader }
							add_attack = 1
						}
					}
					else = {
						army_experience = 20
					}
				}
			}
			custom_effect_tooltip = MIE_all_gain_1_attack
		}
	}
	MIE_joint_grand_strategy_planning = {
		icon = GFX_decision_hol_draw_up_staff_plans

		visible = {
			tag = MIE
		}

		cancel_trigger = {
			OR = {
				NOT = { is_in_faction_with = MIE }
				russia_can_threaten_reichspakt = no
			}
		}

		custom_cost_text = army_xp_80
		custom_cost_trigger = {
			has_army_experience > 79.99
		}

		days_remove = 60
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel MIE_joint_grand_strategy_planning"
			army_experience = 80
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_joint_grand_strategy_planning"
			army_experience = -80
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove MIE_joint_grand_strategy_planning"
			if = {
				limit = {
					any_army_leader = { has_trait = infantry_leader }
				}
				every_army_leader = {
					limit = { has_trait = infantry_leader }
					add_planning = 1
				}
			}
			else = {
				army_experience = 20
			}
			every_other_country = {
				limit = { has_country_flag = MIE_member }
				country_event = mie.3
				effect_tooltip = {
					if = {
						limit = {
							any_army_leader = { has_trait = infantry_leader }
						}
						every_army_leader = {
							limit = { has_trait = infantry_leader }
							add_planning = 1
						}
					}
					else = {
						army_experience = 20
					}
				}
			}
			custom_effect_tooltip = MIE_all_gain_1_planning
		}
	}
	MIE_international_tank_division = {
		icon = GFX_decision_generic_tank

		available = {
			if = {
				limit = { has_dlc_nsb = yes }
				has_tech = basic_medium_tank_chassis
			}
			else = {
				has_tech = basic_medium_tank
			}
			has_tech = motorised_infantry
		}

		visible = {
			tag = MIE
		}

		cancel_trigger = {
			OR = {
				NOT = { is_in_faction_with = MIE }
				russia_can_threaten_reichspakt = no
			}
		}

		custom_cost_text = army_xp_50
		custom_cost_trigger = {
			has_army_experience > 49.99
		}

		days_remove = 60
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel MIE_international_tank_division"
			army_experience = 50
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_international_tank_division"
			army_experience = -50
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove MIE_international_tank_division"
			set_global_flag = MIE_armored_division_exists
			MIE_form_armored_interdivision = yes
			every_other_country = {
				limit = { has_country_flag = MIE_member }
				country_event = mie.11
			}
		}
	}
	MIE_defense_contributions = {
		icon = GFX_decision_generic_flags

		visible = {
			tag = MIE
			NOT = { has_idea = MIE_contributions }
			russia_can_threaten_reichspakt = yes
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_defense_contributions"
			add_ideas = MIE_contributions
			every_other_country = {
				limit = { has_country_flag = MIE_member }
				country_event = mie.4
			}
			custom_effect_tooltip = MIE_defense_contributions_tt
			hidden_effect = { activate_mission = MIE_monthly_purchases }
		}
	}
	MIE_monthly_purchases = {
		icon = GFX_decision_generic_industry

		allowed = { always = no } #manually activated

		available = {
			hidden_trigger = { always = no }
		}

		cancel_trigger = {
			OR = {
				NOT = { has_idea = MIE_contributions }
				NOT = { is_in_faction_with = MIE }
				russia_can_threaten_reichspakt = no
			}
		}

		is_good = yes
		days_mission_timeout = 30

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout MIE_monthly_purchases"
			add_to_variable = { global.MIE_infantry_equipment = global.MIE_infantry_equipment_monthly }
			add_to_variable = { global.MIE_support_equipment = global.MIE_support_equipment_monthly }
			add_to_variable = { global.MIE_artillery_equipment = global.MIE_artillery_equipment_monthly }
			custom_effect_tooltip = MIE_defense_contributions_amount
			hidden_effect = { activate_mission = MIE_monthly_purchases }
		}
	}
	MIE_air_command_1 = {
		icon = GFX_decision_generic_air

		visible = {
			tag = MIE
		}

		cancel_trigger = {
			OR = {
				NOT = { is_in_faction_with = MIE }
				russia_can_threaten_reichspakt = no
			}
		}

		custom_cost_text = air_xp_50
		custom_cost_trigger = {
			has_air_experience > 49.99
		}

		days_remove = 60
		fire_only_once = yes

		ai_will_do = { factor = 10 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel MIE_air_command_1"
			air_experience = 50
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_air_command_1"
			air_experience = -50
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove MIE_air_command_1"
			every_other_country = {
				limit = {
					has_country_flag = MIE_member
					has_design_based_on = small_plane_airframe
				}
				country_event = mie.8
				effect_tooltip = {
					capital_scope = {
						add_building_construction = {
							type = air_base
							level = 1
							instant_build = yes
						}
						add_building_construction = {
							type = anti_air_building
							level = 2
							instant_build = yes
						}
					}
					add_equipment_to_stockpile = {
						type = small_plane_airframe
						amount = 50
					}
				}
			}
		}
	}
	MIE_air_command_2 = {
		icon = GFX_decision_generic_air

		visible = {
			tag = MIE
		}

		cancel_trigger = {
			OR = {
				NOT = { is_in_faction_with = MIE }
				russia_can_threaten_reichspakt = no
			}
		}

		custom_cost_text = air_xp_50
		custom_cost_trigger = {
			has_air_experience > 49.99
		}

		days_remove = 60
		fire_only_once = yes

		ai_will_do = { factor = 10 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel MIE_air_command_2"
			air_experience = 50
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_air_command_2"
			air_experience = -50
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove MIE_air_command_2"
			add_ideas = MIE_joint_air_command_1
			every_other_country = {
				limit = { has_country_flag = MIE_member }
				country_event = mie.9
				effect_tooltip = { add_ideas = MIE_joint_air_command_1 }
			}
		}
	}
	MIE_air_command_3 = {
		icon = GFX_decision_generic_air

		visible = {
			tag = MIE
			has_idea = MIE_joint_air_command_1
		}

		cancel_trigger = {
			NOT = {
				is_in_faction_with = MIE
				is_in_faction_with = GER
				russia_can_threaten_reichspakt = yes
			}
		}

		custom_cost_text = air_xp_50
		custom_cost_trigger = {
			has_air_experience > 49.99
		}

		days_remove = 60
		fire_only_once = yes

		ai_will_do = { factor = 10 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel MIE_air_command_3"
			air_experience = 50
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MIE_air_command_3"
			air_experience = -50
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove MIE_air_command_3"
			swap_ideas = {
				remove_idea = MIE_joint_air_command_1
				add_idea = MIE_joint_air_command_2
			}
			every_other_country = {
				limit = { has_country_flag = MIE_member }
				country_event = mie.10
				effect_tooltip = {
					swap_ideas = {
						remove_idea = MIE_joint_air_command_1
						add_idea = MIE_joint_air_command_2
					}
				}
			}
		}
	}
}

MIE_decisions_GER = {
	GER_sponsor_MIE = {
		icon = GFX_decision_generic_merge_plant_tank
		visible = {
			has_global_flag = MIE_intermarium_formed
			any_allied_country = {
				has_idea = MIE_contributions
				has_capitulated = no
			}
		}
		custom_cost_text = MIE_2000_guns_500_sup
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 2000 }
			has_equipment = { support_equipment > 500 }
		}
		days_remove = 14
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				has_equipment = { infantry_equipment > 7000 }
				has_equipment = { support_equipment > 1000 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GER_sponsor_MIE"
			MIE = { country_event = mie.13 }
			add_to_variable = { global.MIE_infantry_equipment = 2000 }
			add_to_variable = { global.MIE_support_equipment = 500 }
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -2000
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = -500
				}
			}
		}
	}
	GER_fight_forest_brothers = {
		icon = GFX_decision_generic_police_action
		visible = { country_exists = BAT }
		available = {
			BAT = {
				has_idea = BAT_forest_brothers
			}
		}
		cost = 35
		days_remove = 14
		cancel_if_not_visible = yes
		fire_only_once = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = BAT_path option = BAT_PATH_RIGA_SOCCON }
					has_game_rule = { rule = BAT_path option = BAT_PATH_RIGA_SOCLIB }
					has_game_rule = { rule = BAT_path option = BAT_PATH_RIGA_PATAUT }
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GER_fight_forest_brothers"
			BAT = { country_event = mie.14 }
			add_tech_bonus = {
				name = GER_fight_forest_brothers
				bonus = 0.5
				uses = 1
				category = military_police_tech
			}
			add_opinion_modifier = {
				modifier = KR_approves_of_govt
				target = GER
			}
		}
	}
	GER_fight_LAF = {
		icon = GFX_decision_generic_police_action
		visible = {
			LIT = {
				exists = yes
				has_active_mission = LIT_LAF_guerilla_activity
			}
		}
		custom_cost_text = CP_40
		custom_cost_trigger = {
			command_power > 40
		}
		days_remove = 30
		cancel_if_not_visible = yes
		fire_only_once = yes

		ai_will_do = {
			factor = 15
			modifier = {
				factor = 0
				has_game_rule = { rule = LIT_path option = LIT_PATH_NATPOP }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GER_fight_LAF"
			LIT = { country_event = mie.15 }
			add_tech_bonus = {
				name = GER_fight_LAF
				bonus = 0.5
				uses = 1
				category = military_police_tech
			}
			add_opinion_modifier = {
				modifier = KR_approves_of_govt
				target = GER
			}
		}
	}
	GER_WHR_coup = {
		icon = GFX_decision_spr_political_assassination
		visible = {
			has_global_flag = SOV_will_puppet_belarus
			WHR = {
				exists = yes
				is_ai = yes
			}
		}
		available = {
			WHR = { has_socialist_government = no }
		}
		cost = 90
		days_remove = 7
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 60
			modifier = {
				factor = 0
				has_game_rule = { rule = WHR_path option = WHR_PATH_RADSOC }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GER_WHR_coup"
			effect_tooltip = {
				add_named_threat = {
					threat = 5
					name = GER_coup_WHR
				}
			}
			WHR = { country_event = whrpol.7 }
			hidden_effect = {
				SOV = { country_event = mie.17 }
				WHR = { add_war_support = -0.2 }
			}
		}
	}
	GER_UKR_support = {
		icon = GFX_decision_gre_investment_decisions
		visible = {
			UKR = {
				exists = yes
				is_monarchy = yes
				NOT = { has_country_flag = UKR_revolt_over }
			}
		}
		available = {
			UKR = {
				OR = {
					has_idea = UKR_black_monday
					has_idea = UKR_black_monday_recovery
				}
			}
		}
		cost = 40
		days_remove = 21
		cancel_if_not_visible = yes

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GER_UKR_support"
			UKR = { country_event = mie.18 }
			add_opinion_modifier = {
				modifier = KR_approves_of_govt
				target = GER
			}
		}
	}
	POL_GER_buy = {
		icon = GFX_decision_cash_flow
		visible = {
			POL = {
				NOT = { has_country_flag = POL_trade_finished }
			}
		}
		cost = POL.POL_influence
		days_remove = 90
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_decision = POL_GER_sell
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove POL_GER_buy"
			POL = {
				set_temp_variable = { POL_influence_change = 5 }
				POL_add_german_influence = yes
				hidden_effect = {
					random_list = {
						seed = random
						10 = { country_event = poland.309 }#Investment
						10 = { country_event = poland.311 } #Problems
						40 = { }
					}
				}
			}
		}
	}
	POL_GER_sell = {
		icon = GFX_decision_hol_attract_foreign_investors
		visible = {
			POL = {
				set_temp_variable = { POL_influence_check = 5 }
				POL_GER_influence_check = yes
				NOT = { has_country_flag = POL_trade_finished }
			}
		}
		custom_cost_text = pol_ger_eco_texticon
		custom_cost_trigger = {
			POL = {
				set_temp_variable = { POL_influence_check = 5 }
				POL_GER_influence_check = yes
			}
		}
		days_remove = 90
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_decision = POL_GER_buy
			}
		}
		modifier = { political_power_gain = 0.3 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete POL_GER_sell"
			POL = {
				set_temp_variable = { POL_influence_change = -5 }
				POL_add_german_influence = yes
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove POL_GER_sell"
		}
	}
	POL_GER_lobby = {
		icon = GFX_decision_eng_propaganda_campaigns

		visible = {
			is_in_faction_with = POL
			is_monarchy = yes
		}

		custom_cost_text = pol_ger_eco_texticon
		custom_cost_trigger = {
			POL = {
				set_temp_variable = { POL_influence_check = 5 }
				POL_GER_influence_check = yes
			}
		}
		days_remove = 100
		days_re_enable = 100
		cancel_if_not_visible = yes

		ai_will_do = { factor = 10 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete POL_GER_lobby"
			POL = {
				set_temp_variable = { POL_influence_change = -5 }
				POL_add_german_influence = yes
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove POL_GER_lobby"
			POL = { country_event = poland.310 }
		}
	}
	#wartime events
	POL_GER_promises = {
		icon = GFX_decision_generic_agreement

		visible = {
			is_in_faction_with = POL
			has_war_with = FRA
			NOT = { has_government = paternal_autocrat }
			POL = {
				is_puppet_of = GER
				has_autonomy_state = kr_oststaat
			}
		}

		cost = 25
		days_remove = 60
		cancel_if_not_visible = yes
		fire_only_once = yes

		ai_will_do = {
			base = surrender_progress
			modifier = {
				add = 10
				POL = { has_stability < 0.5 }
			}
			modifier = {
				add = 10
				POL = { has_stability < 0.3 }
			}
			modifier = {
				factor = 20
				has_democratic_government = yes
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete POL_GER_promises"
			set_temp_variable = { ideology_change_var = -2 }
			change_ruling_party_popularity = yes
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove POL_GER_promises"
			custom_effect_tooltip = POL_promise_tt
			set_country_flag = POL_GER_promised_independence
			hidden_effect = { POL = { country_event = poland.325 } }
		}
	}
	POL_GER_agricultural_exports = {
		icon = GFX_decision_generic_agriculture

		visible = {
			is_in_faction_with = POL
			has_war_with = FRA
		}

		custom_cost_text = pol_ger_eco_texticon
		custom_cost_trigger = {
			POL = {
				set_temp_variable = { POL_influence_check = 5 }
				POL_GER_influence_check = yes
			}
		}
		days_remove = 120
		cancel_if_not_visible = yes
		remove_trigger = {
			OR = {
				has_war = no
				has_war_with = POL
				POL = { has_country_flag = POL_deny_exports }
			}
		}

		ai_will_do = { factor = 10 }

		modifier = {
			stability_factor = 0.1
			production_speed_buildings_factor = 0.04
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete POL_GER_agricultural_exports"
			POL = {
				set_temp_variable = { POL_influence_change = -5 }
				POL_add_german_influence = yes
				country_event = poland.354
			}
		}
	}
	POL_GER_recruit_poland = {
		icon = GFX_decision_hand_grab

		visible = {
			has_war_with = RUS
			has_authoritarian_government = yes
			POL = { is_subject_of = GER }
			NOT = { has_idea = POL_GER_recruitment_2 }
			NOT = { has_country_flag = POL_forbade_recruitment }
		}

		cost = 75
		days_remove = 30
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 10
			modifier = {
				surrender_progress > 0.15
				add = 10
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove POL_GER_recruit_poland"
			if = {
				limit = { NOT = { has_idea = POL_GER_recruitment } }
				add_ideas = POL_GER_recruitment
				effect_tooltip = {
					POL = { add_ideas = POL_recruitment }
				}
				hidden_effect = {
					POL = { country_event = poland.350 }
				}
			}
			else_if = {
				limit = { has_idea = POL_GER_recruitment }
				swap_ideas = {
					remove_idea = POL_GER_recruitment
					add_idea = POL_GER_recruitment_2
				}
				effect_tooltip = {
					POL = {
						swap_ideas = {
							remove_idea = POL_recruitment
							add_idea = POL_recruitment_2
						}
					}
				}
				hidden_effect = {
					POL = { country_event = poland.351 }
				}
			}
		}
	}
	POL_GER_recruit_poland_reduce = {
		icon = GFX_decision_hand_out

		visible = {
			has_idea = POL_GER_recruitment
			has_idea = POL_GER_recruitment_2
		}

		cost = 50
		days_remove = 30
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 10
			modifier = {
				has_government = paternal_autocrat
				add = -10
			}
			modifier = {
				surrender_progress > 0.1
				add = -10
			}
			modifier = {
				has_war = no
				add = 1000
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove POL_GER_recruit_poland_reduce"
			if = {
				limit = { has_idea = POL_GER_recruitment }
				remove_ideas = POL_GER_recruitment
				effect_tooltip = {
					POL = { remove_ideas = POL_recruitment }
				}
			}
			else_if = {
				limit = { has_idea = POL_GER_recruitment_2 }
				swap_ideas = {
					remove_idea = POL_GER_recruitment_2
					add_idea = POL_GER_recruitment
				}
				effect_tooltip = {
					POL = {
						swap_ideas = {
							remove_idea = POL_recruitment_2
							add_idea = POL_recruitment
						}
					}
				}
			}
			hidden_effect = {
				POL = { country_event = poland.352 }
			}
		}
	}
}
