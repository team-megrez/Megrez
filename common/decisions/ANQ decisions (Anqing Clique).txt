###########################
# Anqing Clique Decisions
###########################
# By Erag/Jeankedezeehond
###########################

ANQ_anti_concessionists = {
	ANQ_chens_propaganda = {
		icon = oppression

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				check_variable = { credibility_factor < 50 }
			}
		}

		cost = 150
		days_remove = 50

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_chens_propaganda"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_10
			add_to_variable = {
				var = credibility_factor
				value = 10
			}
			anq_recalculate_chens_credibility = yes
		}
	}
	ANQ_harsh_desertion_policy = {
		icon = oppression

		available = {
			has_war = yes
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { credibility_factor < 60 }
			}
		}

		fire_only_once = yes
		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_harsh_desertion_policy"
			# Social Credit Score
			custom_effect_tooltip = anq_decrease_cred_10
			subtract_from_variable = {
				var = credibility_factor
				value = 10
			}
			anq_recalculate_chens_credibility = yes

			# Effect
			add_stability = 0.05
			add_timed_idea = {
				idea = ANQ_harsh_desertion_policy
				days = 200
			}
		}
	}
	ANQ_anticollaborationist_patrols = {
		icon = generic_army_support

		ai_will_do = { factor = 100 }

		fire_only_once = yes

		custom_cost_trigger = {
			command_power > 25
		}
		custom_cost_text = CP_25

		days_remove = 60

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_anticollaborationist_patrols"
			hidden_effect = {
				add_command_power = -25
			}
			add_stability = -0.05
			add_manpower = -1000
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_anticollaborationist_patrols"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_10
			add_to_variable = {
				var = credibility_factor
				value = 10
			}
			anq_recalculate_chens_credibility = yes
		}
	}
	ANQ_antiwestern_volunteers = {
		icon = generic_nationalism

		available = {
			custom_trigger_tooltip = {
				tooltip = cred_check
				check_variable = {
					credibility_factor > 79
				}
			}
			controls_state = 606
		}

		ai_will_do = { factor = 100 }

		fire_only_once = yes
		cost = 0
		days_remove = 10

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_antiwestern_volunteers"
			606 = {
				create_unit = {
					division = "name = \"Bubing Xie\" division_template = \"Bubing Xie\" start_experience_factor = 0.4 start_equipment_factor = 0.4"
					owner = ANQ
				}
				create_unit = {
					division = "name = \"Bubing Xie\" division_template = \"Bubing Xie\" start_experience_factor = 0.4 start_equipment_factor = 0.4"
					owner = ANQ
				}
			}
		}
	}
	ANQ_expel_western_nationals = {
		icon = generic_political_discourse

		available = {
			controls_state = 613
		}

		ai_will_do = { factor = 200 }

		fire_only_once = yes

		cost = 0

		days_remove = 200

		modifier = {
			production_speed_buildings_factor = -0.2
			research_speed_factor = -0.1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_expel_western_nationals"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_10
			add_to_variable = {
				var = credibility_factor
				value = 10
			}
			anq_recalculate_chens_credibility = yes
		}
	}
	ANQ_take_over_foreign_assets = {
		icon = generic_political_discourse

		available = {
			controls_state = 613
		}

		ai_will_do = { factor = 200 }

		fire_only_once = yes

		cost = 30
		days_remove = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_take_over_foreign_assets"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_10
			add_to_variable = {
				var = credibility_factor
				value = 10
			}
			anq_recalculate_chens_credibility = yes
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_take_over_foreign_assets"
			add_offsite_building = {
				type = industrial_complex
				level = 1
			}
			custom_effect_tooltip = tooltip_white_line
			GER = {
				add_opinion_modifier = {
					target = ANQ
					modifier = large_decrease
				}
			}
			CAN = {
				add_opinion_modifier = {
					target = ANQ
					modifier = large_decrease
				}
			}
			USA = {
				add_opinion_modifier = {
					target = ANQ
					modifier = large_decrease
				}
			}
			NFA = {
				add_opinion_modifier = {
					target = ANQ
					modifier = large_decrease
				}
			}
			RUS = {
				add_opinion_modifier = {
					target = ANQ
					modifier = large_decrease
				}
			}
		}
	}
	ANQ_redirect_criticism_japan = {
		icon = eng_propaganda_campaigns
		allowed = { always = no }
		visible = {
			country_exists = FROM
		}

		fire_only_once = yes
		cost = 100

		ai_will_do = { factor = 50 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_redirect_criticism_japan target: [From.GetName]"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_10
			add_to_variable = {
				var = credibility_factor
				value = 10
			}
			anq_recalculate_chens_credibility = yes
		}
	}
}

ANQ_internal_decisions = {
	#########################################
	### Capturing the key cities for Chen ###
	#	CITIES:
	#		Xuzhou
	#		Nanchang
	#		Jinhua
	#		Nanjing
	#
	#########################################

	ANQ_Xuzhou_City = {
		icon = generic_scorched_earth

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 1047 }
		}

		available = {
			controls_state = 1047
		}

		cost = 40
		days_remove = 10

		fire_only_once = yes

		ai_will_do = { factor = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Xuzhou_City"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_5
			add_to_variable = {
				var = credibility_factor
				value = 5
			}
			anq_recalculate_chens_credibility = yes
			1047 = {
				create_unit = {
					division = "name = \"Bubing Xie\" division_template = \"Bubing Xie\" start_experience_factor = 0.4 start_equipment_factor = 0.4"
					owner = ANQ
				}
			}
		}
	}

	ANQ_Nanchang_City = {
		icon = generic_scorched_earth

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 1044 }
		}

		available = {
			controls_state = 1044
		}

		cost = 40
		days_remove = 10

		fire_only_once = yes

		ai_will_do = { factor = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Nanchang_City"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_5
			add_to_variable = {
				var = credibility_factor
				value = 5
			}
			anq_recalculate_chens_credibility = yes
			1044 = {
				create_unit = {
					division = "name = \"Bubing Xie\" division_template = \"Bubing Xie\" start_experience_factor = 0.4 start_equipment_factor = 0.4"
					owner = ANQ
				}
			}
		}
	}

	ANQ_Jinhua_City = {
		icon = generic_scorched_earth

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 1067 }
		}

		available = {
			controls_state = 1067
		}

		cost = 0
		days_remove = 5

		fire_only_once = yes

		ai_will_do = { factor = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Jinhua_City"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_5
			add_to_variable = {
				var = credibility_factor
				value = 5
			}
			anq_recalculate_chens_credibility = yes
			1067 = {
				create_unit = {
					division = "name = \"Bubing Xie\" division_template = \"Bubing Xie\" start_experience_factor = 0.4 start_equipment_factor = 0.4"
					owner = ANQ
				}
			}
		}
	}

	ANQ_Nanjing_City = {
		icon = generic_scorched_earth

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 613 }
		}

		available = {
			controls_state = 613
		}

		cost = 0
		days_remove = 5

		fire_only_once = yes

		ai_will_do = { factor = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Nanjing_City"
			# Social Credit Score
			custom_effect_tooltip = anq_increase_cred_5
			add_to_variable = {
				var = credibility_factor
				value = 5
			}
			anq_recalculate_chens_credibility = yes
			613 = {
				create_unit = {
					division = "name = \" Nanjing Bubing Xie\" division_template = \"Bubing Xie\" start_experience_factor = 0.4 start_equipment_factor = 0.4" #Nanjing Infantry
					owner = ANQ
				}
				create_unit = {
					division = "name = \"Nanjing Bubing Xie\" division_template = \"Bubing Xie\" start_experience_factor = 0.4 start_equipment_factor = 0.4" # Nanjing Infantry
					owner = ANQ
				}
				create_unit = {
					division = "name = \"Nanjing Qibing Xie\" division_template = \"Qibing Xie\" start_experience_factor = 0.4 start_equipment_factor = 0.4" #Nanjing Cavalry
					owner = ANQ
				}
			}
		}
	}

	###########################################
	### Getting Support Lines online (Qing) ###
	#	RIVER:
	#		Yangtze
	#		Huai
	#	RAIL:
	#		Xuzhou
	#		Nanchang
	#		Jinan
	#
	###########################################

	ANQ_Yangtze_River_Line = {
		icon = generic_naval
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}

		state_target = yes
		fire_only_once = no
		days_remove = 30
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Yangtze_River_Line target: [From.GetName]"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_vlarge?100
				producer = QIE
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = anq_equip_line_vsmall?15
			}
		}
	}

	ANQ_Huai_River_Line = {
		icon = generic_naval
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}

		state_target = yes
		fire_only_once = no
		days_remove = 45
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Huai_River_Line target: [From.GetName]"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_medium?50
				producer = QIE
			}
		}
	}

	ANQ_Xuzhou_Rail_Line = {
		icon = GFX_decision_train
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}

		state_target = yes
		fire_only_once = no
		days_remove = 45
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Xuzhou_Rail_Line target: [From.GetName]"
			if = {
				limit = {
					controls_state = FROM
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_0
					amount = anq_equip_line_vlarge?110
					producer = QIE
				}
			}
			else_if = {
				limit = {
					controls_state = 1050
					controls_state = 1047
					controls_state = 613
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_0
					amount = anq_equip_line_vvlarge?80
					producer = QIE
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = infantry_equipment_0
					amount = anq_equip_line_large?100
					producer = QIE
				}
			}
		}
	}

	ANQ_Nanchang_Rail_Line = {
		icon = GFX_decision_train
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}

		state_target = yes
		fire_only_once = no
		days_remove = 45
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Nanchang_Rail_Line target: [From.GetName]"
			if = {
				limit = {
					controls_state = FROM
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_0
					amount = anq_equip_line_medium?35
					producer = QIE
				}
			}
			else_if = {
				limit = {
					controls_state = 1044
					controls_state = 1067
					controls_state = 596
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_0
					amount = anq_equip_line_large?60
					producer = QIE
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = infantry_equipment_0
					amount = anq_equip_line_small?20
					producer = QIE
				}
			}
		}
	}

	ANQ_Jinan_Rail_Line = {
		icon = GFX_decision_train
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}

		state_target = yes
		fire_only_once = no
		days_remove = 45
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Jinan_Rail_Line target: [From.GetName]"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_large?50
				producer = QIE
			}
		}
	}

	###########################################
	### Getting Supply Lines online (Japan) ###
	#	PORT:
	#		Nantong
	#		Wenzhou
	#		Quanzhou
	#		Hangzhou
	#
	###########################################

	ANQ_Nantong_Port_Line = {
		icon = generic_naval
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}
		visible = {
			NOT = { has_country_flag = ANQ_fng_nohelp_vs_sqi }
		}

		state_target = yes
		fire_only_once = no
		days_remove = 45
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Nantong_Port_Line target: [From.GetName]"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_vlarge?100
				producer = JAP
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_medium?20
				producer = FNG
			}
		}
	}

	ANQ_Wenzhou_Port_Line = {
		icon = generic_naval
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}
		visible = {
			NOT = { has_country_flag = ANQ_fng_nohelp_vs_sqi }
		}

		state_target = yes
		fire_only_once = no
		days_remove = 45
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Wenzhou_Port_Line target: [From.GetName]"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_vlarge?100
				producer = JAP
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_medium?20
				producer = FNG
			}
		}
	}

	ANQ_Quanzhou_Port_Line = {
		icon = generic_naval
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}
		visible = {
			NOT = { has_country_flag = ANQ_fng_nohelp_vs_sqi }
		}

		state_target = yes
		fire_only_once = no
		days_remove = 45
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Quanzhou_Port_Line target: [From.GetName]"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_vlarge?100
				producer = JAP
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_large?80
				producer = FNG
			}
		}
	}

	ANQ_Hangzhou_Port_Line = {
		icon = generic_naval
		allowed = { always = no }
		available = {
			controls_state = FROM
			OR = {
				has_war_with = LEP
				has_war_with = SQI
				has_war_with = CHI
			}
		}
		visible = {
			NOT = { has_country_flag = ANQ_fng_nohelp_vs_sqi }
		}

		state_target = yes
		fire_only_once = no
		days_remove = 45
		ai_will_do = { base = 50 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_Hangzhou_Port_Line target: [From.GetName]"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_vvvlarge?150
				producer = JAP
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = anq_equip_line_large?80
				producer = FNG
			}
		}
	}
}

ANQ_reconstruction_decisions = {
	ANQ_road_reconstruction_decision = {
		icon = GFX_decision_generic_construction
		allowed = { always = no }
		visible = {
			custom_trigger_tooltip = {
				tooltip = lep_has_widespread_destruction
				OR = {
					has_idea = ANQ_widespread_destruction
					has_idea = ANQ_widespread_destruction1
					has_idea = ANQ_widespread_destruction2
				}
			}
		}
		available = {
			NOT = { has_country_flag = ANQ_is_reconstructing }
		}

		ai_will_do = {
			factor = 30
			modifier = {
				check_variable = { anq_kmt_unrest_level < 2 }
				check_variable = { anq_yiguandao_unrest_level < 2 }
				factor = 4
			}
		}

		fire_only_once = yes
		cost = anq_reconstruction_decision_cost?30
		days_remove = anq_reconstruction_decision_time?80

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_road_reconstruction_decision"
			set_country_flag = ANQ_is_reconstructing
			if = {
				limit = { has_country_flag = ANQ_has_reconstruction_cooperation }
				if = {
					limit = { ANQ_is_proqing = yes }
					custom_effect_tooltip = anq_increase_qie_05
					hidden_effect = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.005
						}
						ANQ_remove_beijing_spirit = yes
						ANQ_calculate_beijing_level = yes
						ANQ_add_beijing_spirit = yes
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_road_reconstruction_decision"
			ANQ_reduce_widespread_destruction = yes
			if = {
				limit = {
					controls_state = 596
				}
				596 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			clr_country_flag = ANQ_is_reconstructing
		}
	}
	ANQ_invest_in_armaments_industry_decision = {
		icon = GFX_decision_ger_military_buildup
		allowed = { always = no }
		visible = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = lep_has_widespread_destruction
					OR = {
						has_idea = ANQ_widespread_destruction
						has_idea = ANQ_widespread_destruction1
						has_idea = ANQ_widespread_destruction2
					}
				}
				custom_trigger_tooltip = {
					tooltip = ANQ_has_derelict_industry
					OR = {
						has_idea = ANQ_derelict_industry
						has_idea = ANQ_derelict_industry1
						has_idea = ANQ_derelict_industry2
						has_idea = ANQ_derelict_industry3
					}
				}
			}
		}
		available = {
			NOT = { has_country_flag = ANQ_is_reconstructing }
		}

		ai_will_do = {
			factor = 40
			modifier = {
				check_variable = { anq_kmt_unrest_level < 2 }
				check_variable = { anq_yiguandao_unrest_level < 2 }
				factor = 4
			}
		}

		fire_only_once = yes
		cost = anq_reconstruction_decision_cost?30
		days_remove = anq_reconstruction_decision_time?80

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_invest_in_armaments_industry_decision"
			set_country_flag = ANQ_is_reconstructing
			if = {
				limit = { has_country_flag = ANQ_has_reconstruction_cooperation }
				if = {
					limit = { ANQ_is_proqing = yes }
					custom_effect_tooltip = anq_increase_qie_05
					hidden_effect = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.005
						}
						ANQ_remove_beijing_spirit = yes
						ANQ_calculate_beijing_level = yes
						ANQ_add_beijing_spirit = yes
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_invest_in_armaments_industry_decision"
			ANQ_reduce_widespread_destruction = yes
			ANQ_reduce_derelict_industry = yes
			clr_country_flag = ANQ_is_reconstructing
		}
	}
	ANQ_repair_the_machinery_decision = {
		icon = GFX_decision_generic_industry
		allowed = { always = no }
		visible = {
			custom_trigger_tooltip = {
				tooltip = ANQ_has_derelict_industry
				OR = {
					has_idea = ANQ_derelict_industry
					has_idea = ANQ_derelict_industry1
					has_idea = ANQ_derelict_industry2
					has_idea = ANQ_derelict_industry3
				}
			}
		}
		available = {
			NOT = { has_country_flag = ANQ_is_reconstructing }
		}

		ai_will_do = {
			factor = 40
			modifier = {
				check_variable = { anq_kmt_unrest_level < 2 }
				check_variable = { anq_yiguandao_unrest_level < 2 }
				factor = 4
			}
		}

		fire_only_once = yes
		cost = anq_reconstruction_decision_cost?30
		days_remove = anq_reconstruction_decision_time?80

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_repair_the_machinery_decision"
			set_country_flag = ANQ_is_reconstructing
			if = {
				limit = { has_country_flag = ANQ_has_reconstruction_cooperation }
				if = {
					limit = { ANQ_is_proqing = yes }
					custom_effect_tooltip = anq_increase_qie_05
					hidden_effect = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.005
						}
						ANQ_remove_beijing_spirit = yes
						ANQ_calculate_beijing_level = yes
						ANQ_add_beijing_spirit = yes
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_repair_the_machinery_decision"
			ANQ_reduce_derelict_industry = yes
			clr_country_flag = ANQ_is_reconstructing
		}
	}
	ANQ_factory_repair_teams_decision = {
		icon = GFX_decision_eng_blackshirt_march
		allowed = { always = no }
		visible = {
			custom_trigger_tooltip = {
				tooltip = ANQ_has_derelict_industry
				OR = {
					has_idea = ANQ_derelict_industry
					has_idea = ANQ_derelict_industry1
					has_idea = ANQ_derelict_industry2
					has_idea = ANQ_derelict_industry3
				}
			}
		}
		available = {
			NOT = { has_country_flag = ANQ_is_reconstructing }
		}

		ai_will_do = {
			factor = 40
			modifier = {
				check_variable = { anq_kmt_unrest_level < 2 }
				check_variable = { anq_yiguandao_unrest_level < 2 }
				factor = 4
			}
		}

		fire_only_once = yes
		cost = anq_reconstruction_decision_cost?30
		days_remove = anq_reconstruction_decision_time?80

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_factory_repair_teams_decision"
			set_country_flag = ANQ_is_reconstructing
			if = {
				limit = { has_country_flag = ANQ_has_reconstruction_cooperation }
				if = {
					limit = { ANQ_is_proqing = yes }
					custom_effect_tooltip = anq_increase_qie_05
					hidden_effect = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.005
						}
						ANQ_remove_beijing_spirit = yes
						ANQ_calculate_beijing_level = yes
						ANQ_add_beijing_spirit = yes
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_factory_repair_teams_decision"
			ANQ_reduce_derelict_industry = yes
			clr_country_flag = ANQ_is_reconstructing
		}
	}
	ANQ_new_industrial_investments_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = { always = no }
		visible = {
			custom_trigger_tooltip = {
				tooltip = ANQ_has_derelict_industry
				OR = {
					has_idea = ANQ_derelict_industry
					has_idea = ANQ_derelict_industry1
					has_idea = ANQ_derelict_industry2
					has_idea = ANQ_derelict_industry3
				}
			}
		}
		available = {
			NOT = { has_country_flag = ANQ_is_reconstructing }
		}

		ai_will_do = {
			factor = 40
			modifier = {
				check_variable = { anq_kmt_unrest_level < 2 }
				check_variable = { anq_yiguandao_unrest_level < 2 }
				factor = 4
			}
		}

		fire_only_once = yes
		cost = anq_reconstruction_decision_cost?30
		days_remove = anq_reconstruction_decision_time?80

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_new_industrial_investments_decision"
			set_country_flag = ANQ_is_reconstructing
			if = {
				limit = { has_country_flag = ANQ_has_reconstruction_cooperation }
				if = {
					limit = { ANQ_is_proqing = yes }
					custom_effect_tooltip = anq_increase_qie_05
					hidden_effect = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.005
						}
						ANQ_remove_beijing_spirit = yes
						ANQ_calculate_beijing_level = yes
						ANQ_add_beijing_spirit = yes
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_new_industrial_investments_decision"
			ANQ_reduce_derelict_industry = yes
			clr_country_flag = ANQ_is_reconstructing
		}
	}
	ANQ_village_reconstruction_decision = {
		icon = GFX_decision_generic_political_discourse
		allowed = { always = no }
		visible = {
			custom_trigger_tooltip = {
				tooltip = lep_has_widespread_destruction
				OR = {
					has_idea = ANQ_widespread_destruction
					has_idea = ANQ_widespread_destruction1
					has_idea = ANQ_widespread_destruction2
				}
			}
		}
		available = {
			NOT = { has_country_flag = ANQ_is_reconstructing }
		}

		ai_will_do = {
			factor = 40
			modifier = {
				check_variable = { anq_kmt_unrest_level < 2 }
				check_variable = { anq_yiguandao_unrest_level < 2 }
				factor = 4
			}
		}

		fire_only_once = yes
		cost = anq_reconstruction_decision_cost?30
		days_remove = anq_reconstruction_decision_time?80

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_village_reconstruction_decision"
			set_country_flag = ANQ_is_reconstructing
			if = {
				limit = { has_country_flag = ANQ_has_reconstruction_cooperation }
				if = {
					limit = { ANQ_is_proqing = yes }
					custom_effect_tooltip = anq_increase_qie_05
					hidden_effect = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.005
						}
						ANQ_remove_beijing_spirit = yes
						ANQ_calculate_beijing_level = yes
						ANQ_add_beijing_spirit = yes
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_village_reconstruction_decision"
			ANQ_reduce_widespread_destruction = yes
			add_stability = 0.03
			clr_country_flag = ANQ_is_reconstructing
		}
	}
}

special_projects = {
	ANQ_subei_canal = {
		icon = generic_naval
		allowed = { always = no }

		visible = {
			#northern anhui
			controls_state = 1050
			#jiangsu
			controls_state = 1047
			controls_state = 598
		}

		modifier = {
			civilian_factory_use = 2
		}
		days_remove = 180
		fire_only_once = yes
		state_target = yes

		ai_will_do = { base = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_subei_canal target: [From.GetName]"
			1050 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			1047 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			598 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}

			set_country_flag = ANQ_subei_canal_completed
			if = {
				limit = { has_idea = ANQ_developing_nation }
				swap_ideas = {
					remove_idea = ANQ_developing_nation
					add_idea = ANQ_developing_nation1
				}
			}
			else = {
				swap_ideas = {
					remove_idea = ANQ_dike_and_levee_authority_idea
					add_idea = ANQ_dike_and_levee_authority_idea1
				}
			}
		}
	}

	ANQ_canal_dikes_qing = {
		icon = generic_naval
		allowed = { always = no }
		available = {
			#jinhua, qiantang
			controls_state = 596
			controls_state = 1067
		}

		modifier = {
			civilian_factory_use = 1
		}
		days_remove = 120
		fire_only_once = yes
		state_target = yes

		ai_will_do = { base = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_canal_dikes_qing target: [From.GetName]"
			596 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			1067 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}

			if = {
				limit = { has_idea = ANQ_developing_nation1 }
				swap_ideas = {
					remove_idea = ANQ_developing_nation1
					add_idea = ANQ_developing_nation2
				}
			}
			else = {
				swap_ideas = {
					remove_idea = ANQ_dike_and_levee_authority_idea1
					add_idea = ANQ_dike_and_levee_authority_idea2
				}
			}
		}
	}
}

ANQ_reestablish_control = {
	ANQ_temp_suppress_kmt = {
		icon = generic_ignite_civil_war
		allowed = {
			always = no
		}

		ai_will_do = {
			factor = 90
			modifier = {
				check_variable = { anq_kmt_unrest_level > 2 }
				factor = 3
			}
			modifier = {
				has_completed_focus = ANQ_fujian_encirclement_campaigns
				factor = 5
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = anq_can_suppress_tt
				NOT = {
					check_variable = {
						var = anq_kmt_unrest_level
						value = 2
						compare = less_than
					}
				}
			}
		}
		cost = 30
		days_remove = anq_kmt_suppress_remove?0
		selectable_mission = yes
		days_mission_timeout = anq_suppress_kmt_mission_timeout?70
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout ANQ_temp_suppress_kmt"
			clear_variable = anq_kmt_suppress_remove
			hidden_effect = {
				ANQ_increase_kmt_unrest_level = yes
				ANQ_negative_kmt_event = yes
				activate_mission = ANQ_temp_suppress_kmt
			}
			custom_effect_tooltip = anq_increase_kmt_unrest_tt
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_temp_suppress_kmt"
			custom_effect_tooltip = anq_decrease_kmt_unrest_tt
			if = {
				limit = {
					OR = {
						NOT = { has_completed_focus = ANQ_fujian_encirclement_campaigns }
						check_variable = { anq_kmt_unrest_level > 1 }
					}
				}
				set_variable = { anq_kmt_suppress_remove = days_mission_timeout@ANQ_temp_suppress_kmt }
			}
			else = {
				custom_effect_tooltip = anq_reduce_kmt_available_tt
				set_variable = { anq_yiguandao_suppress_remove = 0 }
			}
			hidden_effect = { ANQ_decrease_kmt_unrest_level = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_temp_suppress_kmt"
			clear_variable = anq_kmt_suppress_remove
			if = {
				limit = {
					OR = {
						NOT = { has_completed_focus = ANQ_fujian_encirclement_campaigns }
						check_variable = { anq_kmt_unrest_level > 1 }
					}
				}
				hidden_effect = {
					set_temp_variable = { anq_kmt_random_delay = random }
					subtract_from_temp_variable = { anq_kmt_random_delay = -0.5 }
					multiply_temp_variable = { anq_kmt_random_delay = 15 }
					add_to_variable = { anq_suppress_kmt_mission_timeout = anq_kmt_random_delay }
					activate_mission = ANQ_temp_suppress_kmt
				}
			}
		}
	}

	ANQ_decision_lower_kmt_unrest = {
		icon = generic_ignite_civil_war
		allowed = { always = no }

		visible = {
			has_idea = ANQ_kuomintang
		}

		ai_will_do = { factor = 200 }

		available = {
			custom_trigger_tooltip = {
				tooltip = anq_can_eliminate_tt
				check_variable = {
					var = anq_kmt_unrest_level
					value = 2
					compare = less_than
				}
			}
		}
		cost = 45
		days_remove = 40
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_decision_lower_kmt_unrest"
			if = {
				limit = {
					check_variable = {
						var = anq_kmt_unrest_level
						value = 0
						compare = equals
					}
				}
				custom_effect_tooltip = anq_remove_kmt_unrest_tt
				remove_ideas = ANQ_kuomintang
				hidden_effect = {
					country_event = { id = anq.50 days = 1 }
				}
			}
			else = {
				custom_effect_tooltip = anq_decrease_kmt_unrest_tt
				ANQ_decrease_kmt_unrest_level = yes
			}
		}
	}

	ANQ_temp_suppress_yiguandao = {
		icon = generic_ignite_civil_war
		allowed = {
			always = no
		}

		ai_will_do = {
			factor = 80

			modifier = {
				has_completed_focus = ANQ_jiangsu_yiguandao_problem
				factor = 5
			}
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = anq_can_suppress_tt
				NOT = {
					check_variable = {
						var = anq_yiguandao_unrest_level
						value = 2
						compare = less_than
					}
				}
			}
		}
		selectable_mission = yes
		cost = 20
		days_remove = anq_yiguandao_suppress_remove?0
		days_mission_timeout = anq_suppress_yiguandao_mission_timeout?70
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout ANQ_temp_suppress_yiguandao"
			clear_variable = anq_yiguandao_suppress_remove
			hidden_effect = {
				ANQ_increase_yiguandao_unrest_level = yes
				ANQ_negative_yiguandao_event = yes
				activate_mission = ANQ_temp_suppress_yiguandao
			}
			custom_effect_tooltip = anq_increase_yiguandao_unrest_tt
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_temp_suppress_yiguandao"
			custom_effect_tooltip = anq_decrease_yiguandao_unrest_tt
			if = {
				limit = {
					OR = {
						NOT = { has_completed_focus = ANQ_jiangsu_yiguandao_problem }
						check_variable = { anq_yiguandao_unrest_level > 1 }
					}
				}
				set_variable = { anq_yiguandao_suppress_remove = days_mission_timeout@ANQ_temp_suppress_yiguandao }
			}
			else = {
				custom_effect_tooltip = anq_reduce_yiguandao_available_tt
				set_variable = { anq_yiguandao_suppress_remove = 0 }
			}
			hidden_effect = {
				ANQ_decrease_yiguandao_unrest_level = yes
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_temp_suppress_yiguandao"
			clear_variable = anq_yiguandao_suppress_remove
			if = {
				limit = {
					OR = {
						NOT = { has_completed_focus = ANQ_jiangsu_yiguandao_problem }
						check_variable = { anq_yiguandao_unrest_level > 1 }
					}
				}
				hidden_effect = {
					set_temp_variable = { anq_yiguandao_random_delay = random }
					subtract_from_temp_variable = { anq_yiguandao_random_delay = -0.5 }
					multiply_temp_variable = { anq_yiguandao_random_delay = 15 }
					add_to_variable = { anq_suppress_yiguandao_mission_timeout = anq_yiguandao_random_delay }
					activate_mission = ANQ_temp_suppress_yiguandao
				}
			}
		}
	}

	ANQ_decision_lower_yiguandao_unrest = {
		icon = generic_ignite_civil_war
		allowed = { always = no }

		visible = {
			has_idea = ANQ_yiguandao
		}

		ai_will_do = { factor = 200 }

		available = {
			custom_trigger_tooltip = {
				tooltip = anq_can_eliminate_tt
				check_variable = {
					var = anq_yiguandao_unrest_level
					value = 2
					compare = less_than
				}
			}
		}
		cost = 30
		days_remove = 30
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_decision_lower_yiguandao_unrest"
			if = {
				limit = {
					check_variable = {
						var = anq_yiguandao_unrest_level
						value = 0
						compare = equals
					}
				}
				custom_effect_tooltip = anq_remove_yiguandao_unrest_tt
				remove_ideas = ANQ_yiguandao
				hidden_effect = {
					country_event = { id = anq.58 days = 1 }
				}
			}
			else = {
				custom_effect_tooltip = anq_decrease_yiguandao_unrest_tt
				hidden_effect = { ANQ_decrease_yiguandao_unrest_level = yes }
			}
		}
	}
}

ANQ_influence_decisions = {
	ANQ_reduce_fng_influence = {
		icon = oppression
		allowed = { always = no }
		visible = {
			country_exists = FROM
			NOT = { has_war_with = FROM }
		}

		cancel_if_not_visible = yes
		cost = 100
		days_remove = 175

		ai_will_do = {
			base = 0

			modifier = {
				check_variable = { party_popularity@market_liberal > 40 }
				add = 80
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_reduce_fng_influence target: [From.GetName]"
			custom_effect_tooltip = anq_decrease_fng_5
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = -0.05
				}
				ANQ_remove_fengtian_spirit = yes
				ANQ_calculate_fengtian_level = yes
				ANQ_add_fengtian_spirit = yes
			}
		}
	}

	ANQ_closer_fng_cooperation = {
		icon = oppression
		allowed = { always = no }
		visible = {
			country_exists = FROM
			NOT = { has_war_with = FROM }
		}
		cancel_if_not_visible = yes
		cost = 50
		days_remove = 175

		ai_will_do = {
			base = 0
			modifier = {
				has_completed_focus = ANQ_panasian_legitimacy
				check_variable = { party_popularity@market_liberal < 25 }
				add = 20
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_closer_fng_cooperation target: [From.GetName]"
			custom_effect_tooltip = anq_increase_fng_5
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.05
				}
				ANQ_remove_fengtian_spirit = yes
				ANQ_calculate_fengtian_level = yes
				ANQ_add_fengtian_spirit = yes
			}
		}
	}

	ANQ_xinhai_loyalists = {
		icon = generic_civil_support
		allowed = { always = no }
		available = {
			has_war_with = QIE
		}

		visible = {
			NOT = { has_country_flag = FNG_hostile }
		}

		cancel_if_not_visible = yes
		ai_will_do = { base = 100 }

		cost = 50
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_xinhai_loyalists"
			division_template = {
				name = "Xinhai Loyalists"
				division_names_group = CHI_INF_01
				is_locked = no
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					infantry = { x = 0 y = 4 }
				}
			}
			set_province_controller = 7609
			set_province_controller = 12426
			hidden_effect = {
				620 = {
					create_unit = {
						division = "name = \"Xinhai Loyalists\" division_template = \"Xinhai Loyalists\" start_experience_factor = 0.64 start_equipment_factor = 0.72"
						owner = ANQ
						prioritize_location = 7609
					}
				}
				1058 = {
					create_unit = {
						division = "name = \"Xinhai Loyalists\" division_template = \"Xinhai Loyalists\" start_experience_factor = 0.55 start_equipment_factor = 0.79"
						owner = ANQ
						prioritize_location = 12426
					}
				}
			}
		}
	}

	ANQ_reduce_qie_influence = {
		icon = oppression
		allowed = { always = no }
		visible = {
			country_exists = FROM
		}
		cancel_if_not_visible = yes
		ai_will_do = {
			base = 0
			modifier = {
				check_variable = { party_popularity@market_liberal > 40 }
				add = 80
			}
		}

		cost = 100
		days_remove = 175

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_reduce_qie_influence target: [From.GetName]"
			custom_effect_tooltip = anq_decrease_qie_5
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = -0.05
				}
				ANQ_remove_beijing_spirit = yes
				ANQ_calculate_beijing_level = yes
				ANQ_add_beijing_spirit = yes
			}
		}
	}

	ANQ_closer_qie_cooperation = {
		icon = oppression
		allowed = { always = no }
		visible = {
			country_exists = FROM
		}

		cancel_if_not_visible = yes
		ai_will_do = {
			base = 0

			modifier = {
				has_completed_focus = ANQ_mend_qie_relations
				check_variable = { party_popularity@market_liberal < 25 }
				add = 20
			}
		}

		cost = 50
		days_remove = 175

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_closer_qie_cooperation target: [From.GetName]"
			custom_effect_tooltip = anq_increase_qie_5
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.05
				}
				ANQ_remove_beijing_spirit = yes
				ANQ_calculate_beijing_level = yes
				ANQ_add_beijing_spirit = yes
			}
		}
	}

	ANQ_coordinated_qie_industrialisation = {
		icon = GFX_decision_generic_industry
		allowed = { always = no }
		visible = {
			date > 1938.1.1
			FROM = {
				has_full_control_of_state = 608
			}
			ROOT = {
				has_full_control_of_state = 613
			}
		}

		cancel_if_not_visible = yes
		cost = 80
		days_remove = 100
		fire_only_once = yes
		ai_will_do = { base = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_coordinated_qie_industrialisation target: [From.GetName]"
			custom_effect_tooltip = anq_increase_qie_2
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.02
				}
				ANQ_remove_beijing_spirit = yes
				ANQ_calculate_beijing_level = yes
				ANQ_add_beijing_spirit = yes
			}
			608 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			613 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	ANQ_placate_qing = {
		icon = oppression
		allowed = { always = no }
		visible = {
			check_variable = { ANQ_beijing_anger > 1 }
			country_exists = FROM
		}

		available = {
			custom_trigger_tooltip = {
				check_variable = { ANQ_beijing_anger > 4.99 }
				tooltip = anq_anger_mt_5_tt
			}
		}

		days_remove = 30
		fire_only_once = no

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 100
				check_variable = { ANQ_beijing_anger > 15 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_placate_qing target: [From.GetName]"
			custom_effect_tooltip = anq_decrease_qie_anger_5
			hidden_effect = {
				subtract_from_variable = {
					var = ANQ_beijing_anger
					value = 5
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_placate_qing target: [From.GetName]"
			custom_effect_tooltip = anq_increase_qie_1
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.01
				}
				ANQ_remove_beijing_spirit = yes
				ANQ_calculate_beijing_level = yes
				ANQ_add_beijing_spirit = yes
			}
		}
	}

	ANQ_develop_wuchanganqing = {
		icon = GFX_decision_generic_industry
		allowed = { always = no }
		cost = 30
		modifier = {
			civilian_factory_use = 1
		}
		days_remove = 150
		fire_only_once = yes
		ai_will_do = { base = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_develop_wuchanganqing"
			custom_effect_tooltip = anq_increase_qie_1
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.01
				}
				ANQ_remove_beijing_spirit = yes
				ANQ_calculate_beijing_level = yes
				ANQ_add_beijing_spirit = yes
			}
			1048 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			606 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	ANQ_join_QIE_alliance = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			FROM = { has_war_with = FNG }
		}

		visible = {
			is_subject = no
			has_civil_war = no
			NOT = { has_war_with = SQI }
			FROM = { china_is_valid_government_to_join = yes }
		}

		fire_only_once = yes

		ai_will_do = {
			base = 5

			modifier = {
				add = -5
				check_variable = { ANQ_beijing_level < 2 }
			}

			modifier = {
				add = 10
				check_variable = { ANQ_beijing_level > 2 }
			}

			modifier = {
				add = 10
				check_variable = { ANQ_beijing_level > 3 }
			}

			modifier = {
				add = 30
				check_variable = { ANQ_beijing_level > 4 }
			}

			modifier = {
				add = 30
				check_variable = { ANQ_beijing_level > 6 }
			}

			modifier = {
				add = 50
				check_variable = { ANQ_beijing_level > 7 }
			}

			modifier = {
				add = 50
				check_variable = { ANQ_beijing_level > 9 }
			}

			modifier = {
				add = 100
				check_variable = { ANQ_beijing_level > 10 }
			}

			modifier = {
				add = 20
				FROM = { surrender_progress > 0.6 }
			}

			modifier = {
				add = 30
				FROM = { surrender_progress > 0.6 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_join_QIE_alliance target: [From.GetName]"
			custom_effect_tooltip = anq_will_lead_war_tt
			custom_effect_tooltip = anq_increase_qie_3
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.03
				}
				ANQ_remove_beijing_spirit = yes
				ANQ_calculate_beijing_level = yes
				ANQ_add_beijing_spirit = yes
			}
			FROM = {
				effect_tooltip = { china_puppet_ROOT_effect = yes }
				country_event = china_events.4
			}
		}
	}

	ANQ_join_war_vs_FNG_self = {
		icon = generic_prepare_civil_war
		allowed = { always = no }
		visible = {
			NOT = { is_in_faction_with = QIE }
			QIE = {
				has_war_with = FROM
			}
			NOT = { has_war_with = FROM }
		}

		cancel_if_not_visible = yes
		fire_only_once = yes
		war_with_target_on_remove = yes
		days_remove = 25

		ai_will_do = {
			base = 5

			modifier = {
				add = -5
				check_variable = { ANQ_beijing_level < 2 }
			}

			modifier = {
				add = 20
				check_variable = { ANQ_beijing_level > 2 }
			}

			modifier = {
				add = 30
				check_variable = { ANQ_beijing_level > 3 }
			}

			modifier = {
				add = 50
				check_variable = { ANQ_beijing_level > 4 }
			}

			modifier = {
				add = 20
				QIE = { surrender_progress > 0.2 }
			}

			modifier = {
				add = 30
				QIE = { surrender_progress > 0.5 }
			}

			modifier = {
				add = 40
				QIE = { surrender_progress > 0.6 }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ANQ_join_war_vs_FNG_self target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_join_war_vs_FNG_self target: [From.GetName]"
			FROM = { incoming_war_notification_effect = yes }
			setup_decision_attack_AI = yes
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_join_war_vs_FNG_self target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
}

foreign_politics = {
	ANQ_attack_SQI = {
		icon = generic_prepare_civil_war
		allowed = { always = no } #manually activated

		available = {
			is_neighbor_of = FROM
			NOT = { has_non_aggression_pact_with = FROM }
		}

		visible = {
			can_declare_war_on = FROM
			is_subject = no
			NOT = { has_global_flag = LEP_collapse_SQI_out }
			FROM = {
				NOT = { has_government = authoritarian_democrat }
				is_subject = no
			}
		}

		cancel_trigger = {
			OR = {
				is_subject = yes
				NOT = { can_declare_war_on = FROM }
				has_non_aggression_pact_with = FROM
				has_global_flag = LEP_collapse_SQI_out
				FROM = { is_subject = yes }
				FROM = { has_government = authoritarian_democrat }
			}
		}

		days_remove = 30
		fire_only_once = yes
		cancel_if_not_visible = yes
		war_with_target_on_remove = yes
		ai_will_do = { base = 100 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ANQ_attack_SQI target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_attack_SQI target: [From.GetName]"
			FROM = { incoming_war_notification_effect = yes }
			setup_decision_attack_AI = yes
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_attack_SQI target: [From.GetName]"
			clear_decision_attack_AI = yes
			if = {
				limit = { FROM = { NOT = { has_idea = league_collapse_SQI } } }
				FROM = { add_ideas = league_collapse_SQI }
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	ANQ_attack_FNG = {
		icon = generic_prepare_civil_war
		allowed = { always = no } #activated by effect
		available = {
			NOT = { country_exists = QIE }
		}
		visible = {
			can_declare_war_on = FROM
			is_subject = no
		}

		cost = 50
		days_remove = 30
		fire_only_once = yes
		cancel_if_not_visible = yes
		war_with_target_on_remove = yes

		ai_will_do = { base = 0 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ANQ_attack_FNG target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_attack_FNG target: [From.GetName]"
			FROM = { incoming_war_notification_effect = yes }
			setup_decision_attack_AI = yes
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_attack_FNG target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			hidden_effect = {
				remove_targeted_decision = { target = FROM decision = ANQ_attack_FNG }
			}
		}
	}

	ANQ_attack_QIE = {
		icon = generic_prepare_civil_war
		allowed = { always = no } #activated by effect
		available = {
			FROM = { has_war_with = FNG }
		}
		visible = {
			can_declare_war_on = FROM
			is_subject = no
		}

		days_remove = 30
		fire_only_once = yes
		cancel_if_not_visible = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				ROOT_is_threatened = yes
			}
			modifier = {
				factor = 0
				FROM = { is_stronger_than_ROOT_and_not_vulnerable = yes }
			}
			modifier = {
				factor = 0
				FROM = { overlord_is_stronger_than_ROOT_and_not_vulnerable = yes }
			}
			modifier = {
				factor = 0
				FROM = { faction_leader_is_stronger_than_ROOT_and_not_vulnerable = yes }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ANQ_attack_QIE target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_attack_QIE target: [From.GetName]"
			FROM = { incoming_war_notification_effect = yes }
			setup_decision_attack_AI = yes
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_attack_QIE target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			hidden_effect = {
				remove_targeted_decision = { target = QIE decision = ANQ_attack_QIE }
			}
		}
	}

	ANQ_attack_south = {
		icon = generic_prepare_civil_war
		allowed = { tag = ANQ }

		available = {
			is_neighbor_of = FROM
			ANQ_has_widespread_destruction = no
			ANQ_has_derelict_industry = no
			ANQ_has_ruined_interior = no
		}

		visible = {
			can_declare_war_on = FROM
			is_subject = no
		}

		cost = 50
		days_remove = 30

		targets = { GXC HNN }
		target_root_trigger = {
			has_completed_focus = ANQ_imperial_keystone
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		fire_only_once = yes
		cancel_if_not_visible = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				ROOT_is_threatened = yes
			}
			modifier = {
				factor = 0
				FROM = { is_stronger_than_ROOT_and_not_vulnerable = yes }
			}
			modifier = {
				factor = 0
				FROM = { overlord_is_stronger_than_ROOT_and_not_vulnerable = yes }
			}
			modifier = {
				factor = 0
				FROM = { faction_leader_is_stronger_than_ROOT_and_not_vulnerable = yes }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ANQ_attack_south target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_attack_south target: [From.GetName]"
			FROM = { incoming_war_notification_effect = yes }
			setup_decision_attack_AI = yes
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_attack_south target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			declare_war_on_GXC_revolter_if_in_civil_war = yes
		}
	}
}
